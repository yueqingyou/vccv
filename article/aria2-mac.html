<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="theme-color" content="#1d1f21"><link rel="manifest" href="/manifest.json"><script src="/sw-register.js"></script><meta name="description" content="备份一下macOS系统下配置aria2以及配合Chrome浏览器众多插件实现下载多线程等众多功能的过程。大部分来自GitHub作者分享，已在文末注明。"><meta property="og:type" content="article"><meta property="og:title" content="macOS系统配置aria2"><meta property="og:url" content="https://vccv.cc/article/aria2-mac.html"><meta property="og:site_name" content="月青悠"><meta property="og:description" content="备份一下macOS系统下配置aria2以及配合Chrome浏览器众多插件实现下载多线程等众多功能的过程。大部分来自GitHub作者分享，已在文末注明。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://vccv.cc/article/aria2-mac/image-20220319180124115.png"><meta property="og:image" content="https://vccv.cc/article/aria2-mac/image-20220319180542315.png"><meta property="og:image" content="https://vccv.cc/article/aria2-mac/QQ20220319-175017.gif"><meta property="article:published_time" content="2022-03-19T08:49:15.000Z"><meta property="article:modified_time" content="2022-12-05T11:53:44.000Z"><meta property="article:author" content="Yuesir"><meta property="article:tag" content="macos"><meta property="article:tag" content="aria2"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://vccv.cc/article/aria2-mac/image-20220319180124115.png"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>macOS系统配置aria2｜月青悠</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/style-dark.css"><script src="/js/switch.js"></script><link rel="stylesheet" href="/css/fancybox.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="月青悠" type="application/atom+xml">
</head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">首页</a></li><li><a href="/tags">标签</a></li><li><a href="/search">搜索</a></li><li><a href="/tools">工具</a></li><li><a href="/about">关于</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="上一篇" href="/article/takagi-san.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="下一篇" href="/article/qinglong-jd.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="返回顶部" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="切换主题"><i class="fas fa-lightbulb" aria-hidden="true" onmouseover='$("#i-switch").toggle()' onmouseout='$("#i-switch").toggle()' onclick="switchNightMode()"></i></a></li><li><a class="icon" aria-label="回到首页" href="/"><i class="fas fa-home" aria-hidden="true" onmouseover='$("#i-home").toggle()' onmouseout='$("#i-home").toggle()'></i></a></li></ul><span id="i-prev" class="info" style="display:none">上一篇</span> <span id="i-next" class="info" style="display:none">下一篇</span> <span id="i-top" class="info" style="display:none">返回顶部</span> <span id="i-switch" class="info" style="display:none">切换主题</span> <span id="i-home" class="info" style="display:none">回到首页</span></span><br><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Aria2%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.</span> <span class="toc-text">Aria2是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">配置前的准备工作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEAria2"><span class="toc-number">2.</span> <span class="toc-text">安装并配置Aria2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="toc-number">3.</span> <span class="toc-text">设置为开机自启动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">创建用户启动文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%B9%B6%E5%90%AF%E7%94%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-number">3.2.</span> <span class="toc-text">添加并启用自启动项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0-BT-tracker-%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">添加自动更新 BT tracker 功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-trackers-list-aria2-sh-%E8%84%9A%E6%9C%AC"><span class="toc-number">4.1.</span> <span class="toc-text">创建 trackers-list-aria2.sh 脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0"><span class="toc-number">4.2.</span> <span class="toc-text">设置任务计划程序 实现自动更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8B%E8%BD%BD%E9%80%9A%E7%9F%A5"><span class="toc-number">4.3.</span> <span class="toc-text">添加下载通知</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-download-complete-hook-sh-%E8%84%9A%E6%9C%AC"><span class="toc-number">4.4.</span> <span class="toc-text">创建 download-complete-hook.sh 脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-Hook-%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.5.</span> <span class="toc-text">添加 Hook 设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aria2-web-UI"><span class="toc-number">5.</span> <span class="toc-text">Aria2 web UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PRC-%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">PRC 设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8B%E8%BD%BD%E6%8F%92%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">安装浏览器下载插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%85%E4%BE%9B%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">仅供参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%9B%98%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">7.1.</span> <span class="toc-text">网盘文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.1.</span> <span class="toc-text">使用方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2"><span class="toc-number">8.</span> <span class="toc-text">感谢</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><a href="javascript:void(0);" onclick="switchNightMode()"><h1 class="posttitle" itemprop="name headline">macOS系统配置aria2</h1></a><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Yuesir</span></span><div class="postdate"><time datetime="2022-03-19T08:49:15.000Z" itemprop="datePublished">2022-03-19</time> (Updated: <time datetime="2022-12-05T11:53:44.000Z" itemprop="dateModified">2022-12-05</time>)</div><div class="article-category"><i class="fas fa-archive"></i> <a class="category-link" href="/categories/tips/">玩机技巧</a> › <a class="category-link" href="/categories/tips/macos/">macos</a></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link-link" href="/tags/aria2/" rel="tag">aria2</a>, <a class="tag-link-link" href="/tags/macos/" rel="tag">macos</a></div></div></header><div class="content" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="Aria2是什么"><a href="#Aria2是什么" class="headerlink" title="Aria2是什么"></a>Aria2是什么</h3><blockquote><p>Aria2是一款自由、跨平台命令行界面的下载管理器，支持的下载协议有：HTTP、HTTPS、FTP、Bittorrent以及Metalink。</p><p>Aria2的另一个特性便是可以使用JSON-RPC和XML-RPC进行HTTP远程下载控制，JSON-RPC接口可通过WebSocket获得。</p></blockquote><p>本人主要拿来下载种子Bittorrent文件以及多线程下载。</p><h3 id="配置前的准备工作"><a href="#配置前的准备工作" class="headerlink" title="配置前的准备工作"></a>配置前的准备工作</h3><ul><li><p>安装 <a target="_blank" rel="noopener" href="https://brew.sh/index_zh-cn">Homebrew</a> 。</p></li><li><p>会使用 <strong>vim</strong> 或者其他编辑器。</p><blockquote><p>常用命令：</p><p>在打开的vim 界面中按 <em>i</em> 键进入编辑模式；按 <em>Esc</em> 键退出编辑模式，进入命令行模式；使用 <strong>:wq</strong> 命令保存并退出。</p></blockquote></li></ul><h2 id="安装并配置Aria2"><a href="#安装并配置Aria2" class="headerlink" title="安装并配置Aria2"></a>安装并配置Aria2</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 Homebrew 安装 aria2</span></span><br><span class="line">brew install aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建配置文件aria2.conf和空对话文件aria2.session</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/.aria2 &amp;&amp; <span class="built_in">cd</span> ~/.aria2</span><br><span class="line"><span class="built_in">touch</span> aria2.conf</span><br><span class="line"><span class="built_in">touch</span> aria2.session</span><br></pre></td></tr></table></figure></div><p>编辑配置文件 <strong>aria2.conf</strong> ：</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">## 文件保存相关 ##</span><br><span class="line"></span><br><span class="line"># 文件的保存路径(可使用绝对路径或相对路径)<span class="punctuation">,</span> 默认<span class="punctuation">:</span> Mac下Downloads下载文件夹</span><br><span class="line">dir=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/Downloads</span><br><span class="line"># 启用磁盘缓存<span class="punctuation">,</span> <span class="number">0</span>为禁用缓存<span class="punctuation">,</span> 需<span class="number">1.16</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">16</span>M</span><br><span class="line">disk-cache=<span class="number">32</span>M</span><br><span class="line"># 文件预分配方式<span class="punctuation">,</span> 能有效降低磁盘碎片<span class="punctuation">,</span> 默认<span class="punctuation">:</span>prealloc</span><br><span class="line"># 预分配所需时间<span class="punctuation">:</span> none &lt; falloc ? trunc &lt; prealloc</span><br><span class="line"># falloc和trunc则需要文件系统和内核支持</span><br><span class="line"># NTFS建议使用falloc<span class="punctuation">,</span> EXT3/<span class="number">4</span>建议trunc<span class="punctuation">,</span> MAC 下需要注释此项</span><br><span class="line">#file-allocation=none</span><br><span class="line"># 断点续传</span><br><span class="line">continue=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## 下载连接相关 ##</span><br><span class="line"></span><br><span class="line"># 最大同时下载任务数<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-concurrent-downloads=<span class="number">5</span></span><br><span class="line"># 同一服务器连接数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span> 最大值<span class="number">16</span></span><br><span class="line">max-connection-per-server=<span class="number">5</span></span><br><span class="line"># 最小文件分片大小<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 取值范围<span class="number">1</span>M <span class="number">-1024</span>M<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">20</span>M</span><br><span class="line"># 假定size=<span class="number">10</span>M<span class="punctuation">,</span> 文件为<span class="number">20</span>MiB 则使用两个来源下载; 文件为<span class="number">15</span>MiB 则使用一个来源下载</span><br><span class="line">min-split-size=<span class="number">10</span>M</span><br><span class="line"># 单个任务最大线程数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#split=<span class="number">5</span></span><br><span class="line"># 分片选择算法<span class="punctuation">,</span>有助于视频的边下边播同时兼顾减少建立连接的次数</span><br><span class="line">stream-piece-selector=geom</span><br><span class="line"># 整体下载速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-download-limit=<span class="number">0</span></span><br><span class="line"># 单个任务下载速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-download-limit=<span class="number">0</span></span><br><span class="line"># 整体上传速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-upload-limit=<span class="number">0</span></span><br><span class="line"># 单个任务上传速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-upload-limit=<span class="number">0</span></span><br><span class="line"># 禁用IPv6<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">#disable-ipv6=<span class="keyword">true</span></span><br><span class="line"># 连接超时时间<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">60</span></span><br><span class="line">#timeout=<span class="number">60</span></span><br><span class="line"># 最大重试次数<span class="punctuation">,</span> 设置为<span class="number">0</span>表示不限制重试次数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-tries=<span class="number">5</span></span><br><span class="line"># 设置重试等待的秒数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#retry-wait=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">## 进度保存相关 ##</span><br><span class="line"></span><br><span class="line"># 日志文件</span><br><span class="line">log-level=notice</span><br><span class="line">log=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.log</span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line"># 需提前创建一个空文件否则会报错</span><br><span class="line">input-file=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 在Aria2退出时保存`错误/未完成`的下载任务到会话文件</span><br><span class="line">save-session=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 定时保存会话<span class="punctuation">,</span> <span class="number">0</span>为退出时才保存<span class="punctuation">,</span> 需<span class="number">1.16</span><span class="number">.1</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">save-session-interval=<span class="number">60</span></span><br><span class="line"></span><br><span class="line"># 强制保存会话<span class="punctuation">,</span> 即使任务已经完成<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span><br><span class="line">#force-save=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## RPC相关设置 ##</span><br><span class="line"></span><br><span class="line"># 启用RPC<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">enable-rpc=<span class="keyword">true</span></span><br><span class="line"># 允许所有来源<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-allow-origin-all=<span class="keyword">true</span></span><br><span class="line"># 允许非外部访问<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-listen-all=<span class="keyword">true</span></span><br><span class="line"># RPC监听端口<span class="punctuation">,</span> 端口被占用时可以修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6800</span></span><br><span class="line">rpc-listen-port=<span class="number">6800</span></span><br><span class="line"># 设置的RPC授权令牌</span><br><span class="line"># 此处使用`openssl rand -base64 <span class="number">32</span>`命令生成&lt;TOKEN&gt;</span><br><span class="line"># 此次需要自行配置，将&lt;TOKEN&gt;整体替换为你的RPC“密码”</span><br><span class="line">rpc-secret=&lt;TOKEN&gt;</span><br><span class="line"># 是否启用 RPC 服务的 SSL/TLS 加密<span class="punctuation">,</span></span><br><span class="line"># 启用加密后 RPC 服务需要使用 https 或者 wss 协议连接</span><br><span class="line">#rpc-secure=<span class="keyword">true</span></span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的证书文件<span class="punctuation">,</span></span><br><span class="line"># 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥</span><br><span class="line">#rpc-certificate=/path/to/certificate.pem</span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的私钥文件</span><br><span class="line">#rpc-private-key=/path/to/certificate.key</span><br><span class="line"></span><br><span class="line">## HTTP 设置 ##</span><br><span class="line"></span><br><span class="line"># 自定义 User Agent</span><br><span class="line">user-agent=Mozilla/<span class="number">5.0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_15_1) AppleWebKit/<span class="number">537.36</span> (KHTML<span class="punctuation">,</span> like Gecko) Chrome/<span class="number">80.0</span><span class="number">.3987</span><span class="number">.85</span> Safari/<span class="number">537.36</span></span><br><span class="line"></span><br><span class="line">## BT/PT下载相关 ##</span><br><span class="line"></span><br><span class="line"># 当下载的是一个种子(以.torrent结尾)时<span class="punctuation">,</span> 自动开始BT任务<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">follow-torrent=<span class="keyword">true</span></span><br><span class="line"># BT监听端口<span class="punctuation">,</span> 当端口被屏蔽时使用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 单个种子最大连接数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">55</span></span><br><span class="line">#bt-max-peers=<span class="number">55</span></span><br><span class="line"></span><br><span class="line">### DHT 功能<span class="punctuation">,</span> 仅对 BT 生效<span class="punctuation">,</span> PT 无效###</span><br><span class="line"># 打开 DHT (IPv4) 功能</span><br><span class="line">enable-dht=<span class="keyword">true</span></span><br><span class="line"># 打开 DHT (IPv6) 功能</span><br><span class="line">enable-dht6=<span class="keyword">true</span></span><br><span class="line"># DHT网络监听端口<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">dht-listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 本地节点查找</span><br><span class="line">bt-enable-lpd=<span class="keyword">true</span></span><br><span class="line"># 种子交换</span><br><span class="line">enable-peer-exchange=<span class="keyword">true</span></span><br><span class="line"># DHT (IPv4) 路由表文件路径</span><br><span class="line">dht-file-path=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht.dat</span><br><span class="line"># DHT (IPv6) 路由表文件路径</span><br><span class="line">dht-file-path6=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht6.dat</span><br><span class="line"></span><br><span class="line"># 客户端伪装<span class="punctuation">,</span> PT需要</span><br><span class="line">peer-id-prefix=-UT341-</span><br><span class="line">peer-agent=uTorrent/<span class="number">341</span>(<span class="number">109279400</span>)(<span class="number">30888</span>)</span><br><span class="line"></span><br><span class="line"># 同一服务器连接数</span><br><span class="line"># 每个种子限速<span class="punctuation">,</span> 对少种的PT很有用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">50</span>K</span><br><span class="line">#bt-request-peer-speed-limit=<span class="number">50</span>K</span><br><span class="line"># 当种子的分享率达到这个数时<span class="punctuation">,</span> 自动停止做种<span class="punctuation">,</span> <span class="number">0</span>为一直做种<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1.0</span></span><br><span class="line">seed-ratio=<span class="number">0</span></span><br><span class="line"># BT校验相关<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">#bt-hash-check-seed=<span class="keyword">true</span></span><br><span class="line"># 继续之前的BT任务时<span class="punctuation">,</span> 无需再次校验<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-seed-unverified=<span class="keyword">true</span></span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent文件)<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-save-metadata=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line"># BT 服务器地址</span><br><span class="line"># 逗号分隔的 BT 服务器地址. 如果服务器地址在 --bt-exclude-tracker 选项中<span class="punctuation">,</span> 其将不会生效.</span><br><span class="line">bt-tracker=udp<span class="punctuation">:</span><span class="comment">//tracker.coppersurfer.tk:6969/announce,udp://tracker.leechers-paradise.org:6969/announce,udp://tracker.opentrackr.org:1337/announce,udp://p4p.arenabg.com:1337/announce,udp://9.rarbg.to:2710/announce,udp://9.rarbg.me:2710/announce,udp://tracker.internetwarriors.net:1337/announce,udp://exodus.desync.com:6969/announce,udp://tracker.tiny-vps.com:6969/announce,udp://tracker.moeking.me:6969/announce,udp://retracker.lanta-net.ru:2710/announce,udp://open.stealth.si:80/announce,udp://open.demonii.si:1337/announce,udp://tracker.torrent.eu.org:451/announce,udp://tracker.cyberia.is:6969/announce,udp://denis.stalker.upeer.me:6969/announce,udp://tracker3.itzmx.com:6961/announce,udp://ipv4.tracker.harry.lu:80/announce,udp://valakas.rollo.dnsabr.com:2710/announce,udp://tracker.nyaa.uk:6969/announce,udp://retracker.netbynet.ru:2710/announce,udp://opentor.org:2710/announce,udp://explodie.org:6969/announce,http://explodie.org:6969/announce,udp://zephir.monocul.us:6969/announce,udp://xxxtor.com:2710/announce,udp://tracker.zum.bi:6969/announce,udp://tracker.yoshi210.com:6969/announce,udp://tracker.uw0.xyz:6969/announce,udp://tracker.sbsub.com:2710/announce,udp://tracker.lelux.fi:6969/announce,udp://tracker.iamhansen.xyz:2000/announce,udp://tracker.filemail.com:6969/announce,udp://tracker.dler.org:6969/announce,udp://retracker.sevstar.net:2710/announce,udp://retracker.akado-ural.ru:80/announce,udp://open.nyap2p.com:6969/announce,udp://chihaya.toss.li:9696/announce,udp://bt2.archive.org:6969/announce,udp://bt1.archive.org:6969/announce,udp://bt.okmp3.ru:2710/announce,https://tracker.nanoha.org:443/announce,http://tracker.torrentyorg.pl:80/announce,http://tracker.opentrackr.org:1337/announce,http://tracker.internetwarriors.net:1337/announce,http://tracker.bt4g.com:2095/announce,http://t.nyaatracker.com:80/announce,http://retracker.sevstar.net:2710/announce,http://pow7.com:80/announce,http://mail2.zelenaya.net:80/announce,http://h4.trakx.nibba.trade:80/announce,udp://tracker4.itzmx.com:2710/announce,udp://tracker2.itzmx.com:6961/announce,udp://tracker.zerobytes.xyz:1337/announce,udp://tracker.swateam.org.uk:2710/announce,udp://tr.bangumi.moe:6969/announce,udp://qg.lorzl.gq:2710/announce,udp://opentracker.i2p.rocks:6969/announce,udp://bt2.54new.com:8080/announce,https://tracker.opentracker.se:443/announce,https://tracker.lelux.fi:443/announce,http://www.loushao.net:8080/announce,http://vps02.net.orel.ru:80/announce,http://tracker4.itzmx.com:2710/announce,http://tracker3.itzmx.com:6961/announce,http://tracker2.itzmx.com:6961/announce,http://tracker1.itzmx.com:8080/announce,http://tracker01.loveapp.com:6789/announce,http://tracker.zerobytes.xyz:1337/announce,http://tracker.yoshi210.com:6969/announce,http://tracker.nyap2p.com:8080/announce,http://tracker.lelux.fi:80/announce,http://tracker.bz:80/announce,http://opentracker.i2p.rocks:6969/announce,http://open.acgnxtracker.com:80/announce</span></span><br><span class="line"># BT 排除服务器地址</span><br><span class="line">bt-exclude-tracker=</span><br><span class="line"></span><br><span class="line"># 启用后台进程</span><br><span class="line">daemon=<span class="keyword">false</span></span><br><span class="line"></span><br><span class="line"># 部分事件hook<span class="punctuation">,</span> 调用第三方命令<span class="punctuation">:</span>/path/to/command</span><br><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载错误</span><br><span class="line">on-download-error=</span><br><span class="line"></span><br><span class="line"># 代理 仅支持 HTTP 协议</span><br><span class="line">#all-proxy=http<span class="punctuation">:</span><span class="comment">//127.0.0.1:1087</span></span><br></pre></td></tr></table></figure></div><p>本配置文件注意事项如下:</p><ul><li>默认开启 RPC 模式。</li><li>已设置RPC授权令牌，请自行修改为自己的。</li><li>已经添加 BT tracker 。</li></ul><h2 id="设置为开机自启动"><a href="#设置为开机自启动" class="headerlink" title="设置为开机自启动"></a>设置为开机自启动</h2><h3 id="创建用户启动文件"><a href="#创建用户启动文件" class="headerlink" title="创建用户启动文件"></a>创建用户启动文件</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/Library/LaunchAgents/aria2.plist</span><br><span class="line">vim ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><p>写入如下：</p><div class="highlight-wrap" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>aria2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/bin/aria2c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>WorkingDirectory<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/用户名/Downloads<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>注意事项：</p><p>一定要记得修改 <em>WorkingDirectory</em> 目录的用户名为自己的用户名。</p></blockquote><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查plist语法是否正确</span></span><br><span class="line">plutil ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件权限</span></span><br><span class="line"><span class="built_in">chmod</span> 644 ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><h3 id="添加并启用自启动项"><a href="#添加并启用自启动项" class="headerlink" title="添加并启用自启动项"></a>添加并启用自启动项</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加自启动项: aria2</span></span><br><span class="line">launchctl load ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除自启动项: aria2</span></span><br><span class="line">launchctl unload ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动服务: aria2</span></span><br><span class="line">launchctl start aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止服务: aria2</span></span><br><span class="line">launchctl stop aria2</span><br></pre></td></tr></table></figure></div><blockquote><p>注意事项：</p><p>如果以前添加过aria2启动项，再次操作时记得先删除启动项再重新添加！</p></blockquote><h2 id="添加自动更新-BT-tracker-功能"><a href="#添加自动更新-BT-tracker-功能" class="headerlink" title="添加自动更新 BT tracker 功能"></a>添加自动更新 BT tracker 功能</h2><h3 id="创建-trackers-list-aria2-sh-脚本"><a href="#创建-trackers-list-aria2-sh-脚本" class="headerlink" title="创建 trackers-list-aria2.sh 脚本"></a>创建 trackers-list-aria2.sh 脚本</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/trackers-list-aria2.sh</span><br><span class="line">vim ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><p>脚本内容如下：</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 文件名 trackers-list-aria2.sh</span></span><br><span class="line"><span class="comment"># aria2 设置文件路径</span></span><br><span class="line">CONF=<span class="variable">$&#123;HOME&#125;</span>/.aria2/aria2.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置选择的 trackerlist （可选 all_aria2.txt, best_aria2.txt, http_aria2.txt）</span></span><br><span class="line">trackerfile=all_aria2.txt</span><br><span class="line"><span class="comment"># downloadfile=https://raw.githubusercontent.com/ngosang/trackerslist/master/$&#123;trackerfile&#125;</span></span><br><span class="line">downloadfile=https://trackerslist.com/<span class="variable">$&#123;trackerfile&#125;</span></span><br><span class="line"></span><br><span class="line">list=$(curl -fsSL <span class="variable">$&#123;downloadfile&#125;</span>)</span><br><span class="line"><span class="keyword">if</span> ! grep -q <span class="string">&quot;bt-tracker&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span> ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 添加 bt-tracker 服务器信息......\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\nbt-tracker=<span class="variable">$&#123;list&#125;</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 更新 bt-tracker 服务器信息.....\033[0m&quot;</span></span><br><span class="line">    sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&quot;s@bt-tracker.*@bt-tracker=<span class="variable">$&#123;list&#125;</span>@g&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 重启 aria2 服务</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 停止 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl stop aria2</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 启动 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl start aria2</span><br></pre></td></tr></table></figure></div><p>设置运行权限：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><h3 id="设置任务计划程序-实现自动更新"><a href="#设置任务计划程序-实现自动更新" class="headerlink" title="设置任务计划程序 实现自动更新"></a>设置任务计划程序 实现自动更新</h3><p>编译当前用户任务计划：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>可用 <strong>crontab -l</strong> 查看当前用户任务计划。文件内容如下：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MAILTO = <span class="string">&quot;&quot;</span></span><br><span class="line">0 18 * * * ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><blockquote><p>2022/05/27 更新：</p><p>添加 <em>MAILTO = “”</em> 配置避免终端出现 <em>You have new mail</em> 提示。</p><p>如果已经出现此类通知，输入 <code>mail</code> 即可查看并消除。</p></blockquote><p>或者直接输入：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(crontab -l 2&amp;&gt; /dev/null; <span class="built_in">echo</span> <span class="string">&quot;0 18 * * * ~/.aria2/trackers-list-aria2.sh&quot;</span>) | crontab</span><br></pre></td></tr></table></figure></div><blockquote><p>以上表示：</p><p>每天下午 6 点自动更新 BT tracker 并重启 aria2 服务。</p><p>取消计划任务：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>然后手动删除内容，或者直接运行：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l 2&amp;&gt; /dev/null| sed <span class="string">&quot;/trackers-list-aria2.sh/d&quot;</span> | crontab</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="添加下载通知"><a href="#添加下载通知" class="headerlink" title="添加下载通知"></a>添加下载通知</h3><p>最终效果：当下载完成会在屏幕右上角弹出一个提示框显示具体下载完成的文件名，同时语音播报：“有个文件下载完成，请查收！”</p><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180124115.png" data-caption="macOS 下aria2 提示框实例"><picture><source srcset="aria2-mac/image-20220319180124115.webp" type="image/webp"><img src="aria2-mac/image-20220319180124115.png" alt="macOS 下aria2 提示框实例"></picture></a></p><h3 id="创建-download-complete-hook-sh-脚本"><a href="#创建-download-complete-hook-sh-脚本" class="headerlink" title="创建 download-complete-hook.sh 脚本"></a>创建 download-complete-hook.sh 脚本</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/download-complete-hook.sh</span><br><span class="line">vim ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><p>脚本内容如下：</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># 文件名 download-complete-hook.sh</span></span><br><span class="line"><span class="comment"># 给aria2 RPC添加一个下载完成通知 for macOS</span></span><br><span class="line"><span class="comment"># 变量 3 表示下载完成文件的路径</span></span><br><span class="line"><span class="comment"># 具体提示框设置可参考`https://code-maven.com/display-notification-from-the-mac-command-line`。</span></span><br><span class="line"><span class="comment"># 不支持设置自定义图标</span></span><br><span class="line"></span><br><span class="line">fname=`<span class="built_in">basename</span> <span class="variable">$3</span>`</span><br><span class="line">osascript &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">display notification &quot;$fname 已经下载完成！&quot; with title &quot;【下载完成】&quot;</span></span><br><span class="line"><span class="string">say &quot;有个文件下载完成，请查收！&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></div><p>设置运行权限：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h3 id="添加-Hook-设置"><a href="#添加-Hook-设置" class="headerlink" title="添加 Hook 设置"></a>添加 Hook 设置</h3><blockquote><p>上面的 <em>aria2.conf</em> 配置文件已经包含了如下内容，使用上面文件的可以直接跳过此部分。</p></blockquote><p>在 aria2 设置文件 <strong>aria2.conf</strong> 加入如下内容：</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h2 id="Aria2-web-UI"><a href="#Aria2-web-UI" class="headerlink" title="Aria2 web UI"></a>Aria2 web UI</h2><p>无需安装，直接使用浏览器打开： <a target="_blank" rel="noopener" href="http://ariang.mayswind.net/latest/">AriaNg版 UI</a> 。</p><h3 id="PRC-设置"><a href="#PRC-设置" class="headerlink" title="PRC 设置"></a>PRC 设置</h3><blockquote><p>根据 <em>aria2.conf</em> 配置文件中的 PRC 相关设置项进行设置。</p></blockquote><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180542315.png" data-caption="AriaNg PRC设置"><picture><source srcset="aria2-mac/image-20220319180542315.webp" type="image/webp"><img src="aria2-mac/image-20220319180542315.png" alt="AriaNg PRC设置"></picture></a></p><h2 id="安装浏览器下载插件"><a href="#安装浏览器下载插件" class="headerlink" title="安装浏览器下载插件"></a>安装浏览器下载插件</h2><p><a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome插件</a></p><ul><li>内置一个离线 AriaNg版 UI</li><li>整合右键下载菜单</li></ul><blockquote><p>内置的离线AriaNg版也需要 <em>设置PRC</em> ，否则无法成功连接。</p></blockquote><h2 id="仅供参考"><a href="#仅供参考" class="headerlink" title="仅供参考"></a>仅供参考</h2><h3 id="网盘文件下载"><a href="#网盘文件下载" class="headerlink" title="网盘文件下载"></a>网盘文件下载</h3><p><a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN/scripts/436446">网盘直链下载助手</a>：需要通过安装拓展插件 <a target="_blank" rel="noopener" href="https://violentmonkey.github.io/get-it/">Violentmonkey</a> 或者 <a target="_blank" rel="noopener" href="https://www.tampermonkey.net/">Tampermonkey</a> 等脚本管理器来启用。</p><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><blockquote><p>配合<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome插件</a>使用。</p></blockquote><ol><li>选择要下载的文件，点击下载助手页面里的“Aria下载”或者“RPC下载”推送到Aria2 UI界面。</li><li>使用鼠标点击相应选项后，选择“发送链接”，然后确定下载。</li></ol><p><a data-fancybox="gallery" data-src="aria2-mac/QQ20220319-175017.gif" data-caption="插件使用示例"><picture><source srcset="aria2-mac/QQ20220319-175017.gif" type="image/webp"><img src="aria2-mac/QQ20220319-175017.gif" alt="插件使用示例"></picture></a></p><h2 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h2><p><a target="_blank" rel="noopener" href="https://github.com/maboloshi/">GitHub作者沙漠之子</a></p><div id="copyright"><style>#easter-egg{border:0;padding:10px 0;position:relative}#easter-egg::before{font-family:"Font Awesome 5 Free";font-weight:900;content:"本文结束 \f1b0  感谢阅读";position:absolute;padding:0 10px;line-height:1px;white-space:nowrap;left:50%;transform:translateX(-50%)}</style><hr id="easter-egg"><blockquote style="padding:0"><p>作者：Yuesir</p><p>本文链接：<a href="/article/aria2-mac.html" target="_blank" title="macOS系统配置aria2">https://vccv.cc/article/aria2-mac.html</a></p><p>版权声明：本博客所有文章除特别声明外,均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a> 许可协议，转载请注明出处！</p></blockquote><hr></div></div></article><div class="blog-post-comments"><div id="tcomment"><noscript>加载评论需要在浏览器启用 JavaScript 脚本支持</noscript></div></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">首页</a></li><li><a href="/tags">标签</a></li><li><a href="/search">搜索</a></li><li><a href="/tools">工具</a></li><li><a href="/about">关于</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Aria2%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.</span> <span class="toc-text">Aria2是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">配置前的准备工作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEAria2"><span class="toc-number">2.</span> <span class="toc-text">安装并配置Aria2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="toc-number">3.</span> <span class="toc-text">设置为开机自启动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">创建用户启动文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%B9%B6%E5%90%AF%E7%94%A8%E8%87%AA%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-number">3.2.</span> <span class="toc-text">添加并启用自启动项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0-BT-tracker-%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">添加自动更新 BT tracker 功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-trackers-list-aria2-sh-%E8%84%9A%E6%9C%AC"><span class="toc-number">4.1.</span> <span class="toc-text">创建 trackers-list-aria2.sh 脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0"><span class="toc-number">4.2.</span> <span class="toc-text">设置任务计划程序 实现自动更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8B%E8%BD%BD%E9%80%9A%E7%9F%A5"><span class="toc-number">4.3.</span> <span class="toc-text">添加下载通知</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-download-complete-hook-sh-%E8%84%9A%E6%9C%AC"><span class="toc-number">4.4.</span> <span class="toc-text">创建 download-complete-hook.sh 脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-Hook-%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.5.</span> <span class="toc-text">添加 Hook 设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aria2-web-UI"><span class="toc-number">5.</span> <span class="toc-text">Aria2 web UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PRC-%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">PRC 设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8B%E8%BD%BD%E6%8F%92%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">安装浏览器下载插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%85%E4%BE%9B%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">仅供参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%9B%98%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">7.1.</span> <span class="toc-text">网盘文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.1.</span> <span class="toc-text">使用方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2"><span class="toc-number">8.</span> <span class="toc-text">感谢</span></a></li></ol></div><div id="actions-footer"><a id="menu" class="icon" onclick='$("#nav-footer").toggle()'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a> <a id="toc" class="icon" onclick='$("#toc-footer").toggle()'><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a> <a id="switch" class="icon" onclick="switchNightMode()"><i class="fas fa-lightbulb fa-lg" aria-hidden="true"></i> 主题</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 顶部</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2020-2023 Yuesir <a href="https://github.com/probberechts/hexo-theme-cactus" rel="nofollow" target="_blank">Cactus</a> <a href="/atom.xml" target="_blank">RSS</a></div><div class="footer-right"><nav><ul><li><a href="/">首页</a></li><li><a href="/tags">标签</a></li><li><a href="/search">搜索</a></li><li><a href="/tools">工具</a></li><li><a href="/about">关于</a></li></ul></nav></div></footer></div><link rel="preload" href="/lib/font-awesome/css/all.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"></noscript><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$((function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="复制到粘贴板"><i class="far fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","").replace(/^\s+|\s+$/g,"")}}).on("success",(function(e){e.trigger.setAttribute("aria-label","复制成功!"),e.clearSelection()}))}))</script><script src="/js/main.js"></script><script src="/lib/fancybox/fancybox.umd.js"></script><script src="/lib/twikoo/twikoo.all.min.js"></script><script>twikoo.init({envId:"https://twikoo.vccv.cc",el:"#tcomment",onCommentLoaded:function(){for(var t=document.getElementsByClassName("tk-content"),e=0;e<t.length;e++){var a=t[e].getElementsByTagName("img");if(a.length>0)for(var n=0;n<a.length;n++){var o=a[n];if("tk-owo-emotion"!=o.className){var r=document.createElement("a");r.setAttribute("data-fancybox","gallery"),r.setAttribute("data-src",o.getAttribute("src")),r.setAttribute("data-caption","评论区："+o.getAttribute("alt")),r.appendChild(o.cloneNode(!1)),o.parentNode.insertBefore(r,o.nextSibling),o.remove()}}}}})</script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>