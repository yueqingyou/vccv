<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><script src="/sw-register.js"></script><meta name="description" content="Due to the author&#39;s frequent use of conda to configure the R kernel jupyter notebook on Linux remote servers, some steps are forgotten over time (the main problem is that the same pit will be stepped"><meta property="og:type" content="article"><meta property="og:title" content="Conda installing R kernel Notebook"><meta property="og:url" content="https://vccv.cc/en/article/conda-r-jupyter.html"><meta property="og:site_name" content="Yuesir"><meta property="og:description" content="Due to the author&#39;s frequent use of conda to configure the R kernel jupyter notebook on Linux remote servers, some steps are forgotten over time (the main problem is that the same pit will be stepped"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221017223737389.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221017233347844.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221010174813001.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221010182224588.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221010201826507.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221018152019887.png"><meta property="og:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221010205123146.png"><meta property="article:published_time" content="2022-10-10T09:27:01.000Z"><meta property="article:modified_time" content="2022-10-10T09:27:01.000Z"><meta property="article:author" content="Yuesir"><meta property="article:tag" content="conda"><meta property="article:tag" content="r"><meta property="article:tag" content="jupyter"><meta property="article:tag" content="droplet"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://vccv.cc/en/article/conda-r-jupyter/image-20221017223737389.png"><link rel="shortcut icon" href="/en/images/favicon.ico"><link rel="icon" type="image/png" href="/en/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon.png"><title>Conda installing R kernel Notebook｜Yuesir</title><link rel="stylesheet" href="/en/css/style.css"><link rel="stylesheet" href="/en/css/style-dark.css"><script src="/en/js/switch.js"></script><link rel="stylesheet" href="/en/css/fancybox.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/en/atom.xml" title="Yuesir" type="application/atom+xml">
</head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="Previous post" href="/en/article/docker-macos.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="Next post" href="/en/article/docker-easyconnect.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="Back to top" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="Switch theme"><i class="fas fa-lightbulb" aria-hidden="true" onmouseover='$("#i-switch").toggle()' onmouseout='$("#i-switch").toggle()' onclick="switchNightMode()"></i></a></li><li><a class="icon" aria-label="Back to home" href="/en/"><i class="fas fa-home" aria-hidden="true" onmouseover='$("#i-home").toggle()' onmouseout='$("#i-home").toggle()'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-switch" class="info" style="display:none">Switch theme</span> <span id="i-home" class="info" style="display:none">Back to home</span></span><br><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Guide"><span class="toc-number">2.</span> <span class="toc-text">Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-Conda"><span class="toc-number">2.1.</span> <span class="toc-text">Install Conda</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-Environment"><span class="toc-number">2.2.</span> <span class="toc-text">Creating Environment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-R"><span class="toc-number">2.3.</span> <span class="toc-text">Install R</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-R-kernel-and-Jupyter"><span class="toc-number">2.4.</span> <span class="toc-text">Install R kernel and Jupyter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Start-Notebook"><span class="toc-number">2.5.</span> <span class="toc-text">Start Notebook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exception-Handling"><span class="toc-number">2.6.</span> <span class="toc-text">Exception Handling</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Module-Missing"><span class="toc-number">2.6.1.</span> <span class="toc-text">Module Missing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Port-Possession"><span class="toc-number">2.6.2.</span> <span class="toc-text">Port Possession</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Beautification-enhancements"><span class="toc-number">2.7.</span> <span class="toc-text">Beautification enhancements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Thanks"><span class="toc-number">3.</span> <span class="toc-text">Thanks</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><a href="javascript:void(0);" onclick="switchNightMode()"><h1 class="posttitle" itemprop="name headline">Conda installing R kernel Notebook</h1></a><div class="meta"><div class="postdate">Posted: <time datetime="2022-10-10T09:27:01.000Z" itemprop="datePublished">2022-10-10</time> (Updated: <time datetime="2022-10-10T09:27:01.000Z" itemprop="dateModified">2022-10-10</time>)</div><div class="article-category"><i class="fas fa-archive"></i> <a class="category-link" href="/en/categories/linux/">linux</a> › <a class="category-link" href="/en/categories/linux/technique/">technique</a></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link-link" href="/en/tags/conda/" rel="tag">conda</a>, <a class="tag-link-link" href="/en/tags/droplet/" rel="tag">droplet</a>, <a class="tag-link-link" href="/en/tags/jupyter/" rel="tag">jupyter</a>, <a class="tag-link-link" href="/en/tags/r/" rel="tag">r</a></div></div></header><div class="content" itemprop="articleBody"><h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Due to the author’s frequent use of conda to configure the R kernel jupyter notebook on Linux remote servers, some steps are forgotten over time (the main problem is that the same pit will be stepped on differently every time).</p><p>After summarizing the relevant tutorials and personal experience on the internet, a guide is provided for everyone and future me to refer to.</p><h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="Install-Conda"><a href="#Install-Conda" class="headerlink" title="Install Conda"></a>Install Conda</h3><blockquote><p>To start with an introduction to Conda, Anaconda and some of the connections between them.</p><p><a target="_blank" rel="noopener" href="https://conda.io/">Conda</a> is a package manager that supports binary packages, so you don’t need to compile from source when installing, and you can also install native libraries. However, some of the Python libraries in pip are not found in conda.</p><ul><li><a target="_blank" rel="noopener" href="https://anaconda.org/anaconda/">Anaconda</a> is a Python scientific computing distribution managed with Conda.</li><li><a target="_blank" rel="noopener" href="https://conda-forge.org/">Conda Forge</a> is another Python distribution that is more package rich than Anaconda. But one pitfall here is that Conda Forge and Anaconda <strong>are not fully compatible</strong>, so if you have a project that uses packages from both Anaconda and Conda Forge, there is a chance that it will hang.</li></ul></blockquote><p>Usually the servers I use have Anaconda installed beforehand,</p><p>Here is the official Anaconda <strong><a target="_blank" rel="noopener" href="https://docs.anaconda.com/anaconda/install/linux/">Installing Anaconda on Linux</a></strong> document with detailed step-by-step instructions and command explanations.</p><p><del>2022.10.17 Update Linux - Anaconda installation process under Centos7.</del></p><p><del>Due to the special domestic environment, it is still recommended to download Anaconda installation scripts directly from domestic sources such as <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&O=D">Tsinghua University Mirror Source</a>, usually choosing the <strong>x86_64 version</strong> of.</del></p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221017223737389.webp" data-caption="Mirror Source"><picture><source srcset="conda-r-jupyter/image-20221017223737389.webp" type="image/webp"><img src="conda-r-jupyter/image-20221017223737389.png" alt="Mirror Source"></picture></a></p><p>Chrome can be downloaded by right clicking and copying the file link address and then using wget in centos:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Download script</span></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh</span><br><span class="line"><span class="comment"># If prompted without wget use yum install</span></span><br><span class="line">yum install wget</span><br><span class="line"><span class="comment"># Execute the installation script Change the script name yourself</span></span><br><span class="line">bash Anaconda3-2022.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure></div><p>Here are some options I encountered myself, for the record. Please follow the script prompts as you see fit and enter.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Follow the prompt and type ENTER (enter)</span></span><br><span class="line">Welcome to Anaconda3 2022.05</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">continue</span> the installation process, please review the license</span><br><span class="line">agreement.</span><br><span class="line">Please, press ENTER to <span class="built_in">continue</span></span><br><span class="line">&gt;&gt; ENTER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Follow the prompts and enter yes</span></span><br><span class="line">Do you accept the license terms?</span><br><span class="line">[no] &gt;&gt;&gt;</span><br><span class="line">Please answer <span class="string">&#x27;yes&#x27;</span> or <span class="string">&#x27;no&#x27;</span>:<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Follow the prompts and type ENTER (enter)</span></span><br><span class="line"><span class="string"># Anaconda3 will now be installed into this location:</span></span><br><span class="line"><span class="string">/root/anaconda3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - Press ENTER to confirm the location</span></span><br><span class="line"><span class="string">  - Press CTRL-C to abort the installation</span></span><br><span class="line"><span class="string">  - Or specify a different location below</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[/root/anaconda3] &gt;&gt;&gt; ENTER</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># conda initialization default no recommend entering yes</span></span><br><span class="line"><span class="string"># If you choose no, you need to configure the environment variables yourself (Baidu keyword anaconda environment variables)</span></span><br><span class="line"><span class="string">installation finished.</span></span><br><span class="line"><span class="string">Do you wish the installer to initialize Anaconda3 by running conda init?</span></span><br><span class="line"><span class="string">Do you want the installer to initialize Anaconda3 by running conda init?</span></span><br><span class="line"><span class="string">[no] &gt;&gt;&gt; yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Here are some tips, briefly translated</span></span><br><span class="line"><span class="string"># For conda to take effect you need to close and reopen the current shell (reconnect to ssh)</span></span><br><span class="line"><span class="string"># If you don&#x27;</span>t need to activate the conda base environment at startup enter conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br><span class="line">==&gt; For changes to take effect, close and re-open your current shell.</span><br><span class="line"></span><br><span class="line">If you<span class="string">&#x27;d prefer that conda&#x27;</span>s base environment not be activated on startup,</span><br><span class="line">   <span class="built_in">set</span> the auto_activate_base parameter to <span class="literal">false</span>:</span><br><span class="line"></span><br><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br></pre></td></tr></table></figure></div><p><del>Anaconda is now installed, and by the way it is recommended to add domestic sources:</del></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Only for Chinese</span></span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/</span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls <span class="built_in">yes</span></span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221017233347844.webp" data-caption="For Chinese"><picture><source srcset="conda-r-jupyter/image-20221017233347844.webp" type="image/webp"><img src="conda-r-jupyter/image-20221017233347844.png" alt="For Chinese"></picture></a></p><h3 id="Creating-Environment"><a href="#Creating-Environment" class="headerlink" title="Creating Environment"></a>Creating Environment</h3><p>I am creating a new conda environment directly to avoid dependency conflicts with the least effort.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View existing conda environments</span></span><br><span class="line">conda <span class="built_in">env</span> list</span><br><span class="line"><span class="comment"># Create a new environment by name</span></span><br><span class="line"><span class="comment"># your_new_name_to_conda Replace with the name of the environment you want</span></span><br><span class="line">conda create -n your_new_name_to_conda</span><br><span class="line"><span class="comment"># Activate the new environment</span></span><br><span class="line">conda activate your_new_name_to_conda</span><br><span class="line"><span class="comment"># Check the installed dependencies</span></span><br><span class="line"><span class="comment"># The new environment is, of course, free of anything</span></span><br><span class="line">conda list</span><br><span class="line"><span class="comment"># Quit the new environment</span></span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010174813001.webp" data-caption="CLI Conda"><picture><source srcset="conda-r-jupyter/image-20221010174813001.webp" type="image/webp"><img src="conda-r-jupyter/image-20221010174813001.png" alt="CLI Conda"></picture></a></p><h3 id="Install-R"><a href="#Install-R" class="headerlink" title="Install R"></a>Install R</h3><p>Note here that you <strong>cannot</strong> use <code>conda install r</code> directly to install R.</p><p>If you enter the above command directly, you will be installing version 3.6 (I think) of R. This version is too old and many R packages are not available. As of 2022.10.10, the latest version of R’s conda is 4.2.1.</p><p>The following will explain how to install the latest version of R (4.2.1).</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># conda install r-base via conda-forge</span></span><br><span class="line">conda install -c conda-forge r-base</span><br></pre></td></tr></table></figure></div><p>conda-forge is also described at the beginning of the article, I feel it can be understood as a distribution inside Linux, maybe?</p><p>Before confirming the installation (i.e. before entering y), you can make sure beforehand if the version of r-base is version 4 or higher (currently 4.2.1).</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010182224588.webp" data-caption="4.2.1 version"><picture><source srcset="conda-r-jupyter/image-20221010182224588.webp" type="image/webp"><img src="conda-r-jupyter/image-20221010182224588.png" alt="4.2.1 version"></picture></a></p><h3 id="Install-R-kernel-and-Jupyter"><a href="#Install-R-kernel-and-Jupyter" class="headerlink" title="Install R kernel and Jupyter"></a>Install R kernel and Jupyter</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Specify to install using the default source</span></span><br><span class="line"><span class="comment"># r-irkernel is the r-kernel for jupyter notebook</span></span><br><span class="line"><span class="comment"># jupyter includes jupyter notebook</span></span><br><span class="line">conda install -c defaults r-irkernel jupyter</span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>Do not use conda-forge to install r-irkernel and jupyter here.</p><p>As mentioned before, Conda Forge and Anaconda <em>are not fully compatible</em>. I personally tried to install it using the <code>conda install -c conda-forge r-irkernel jupyter</code> command and jupyter notebook did not start properly. In this case just uninstall and reinstall.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Uninstall</span></span><br><span class="line">conda uninstall r-irkernel jupyter</span><br><span class="line"><span class="comment"># Install</span></span><br><span class="line">conda install -c defaults r-irkernel jupyter</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Start-Notebook"><a href="#Start-Notebook" class="headerlink" title="Start Notebook"></a>Start Notebook</h3><p>If everything is fine in the previous section, you will be able to start Jupyter Notebook properly here and create R’s notebook.</p><p>If it doesn’t start properly, please continue to read <strong>[Exception Handling]</strong> below.</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010201826507.webp" data-caption="Normal Run"><picture><source srcset="conda-r-jupyter/image-20221010201826507.webp" type="image/webp"><img src="conda-r-jupyter/image-20221010201826507.png" alt="Normal Run"></picture></a></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start Jupyter Notebook</span></span><br><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure></div><h3 id="Exception-Handling"><a href="#Exception-Handling" class="headerlink" title="Exception Handling"></a>Exception Handling</h3><h4 id="Module-Missing"><a href="#Module-Missing" class="headerlink" title="Module Missing"></a>Module Missing</h4><p>If you are prompted with <em><strong>ModuleNotFoundError: No module named ‘zmq.backend.cffi._cffi’</strong></em> when starting a notebook, the following is a similar situation.</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221018152019887.webp" data-caption="Module Missing"><picture><source srcset="conda-r-jupyter/image-20221018152019887.webp" type="image/webp"><img src="conda-r-jupyter/image-20221018152019887.png" alt="Module Missing"></picture></a></p><p>The solution can be found in <a target="_blank" rel="noopener" href="https://github.com/jupyter/notebook/issues/3435#issuecomment-398549304">an issue under the official repository</a> by uninstalling the module in question using pip and reinstalling it:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use pip instead of conda to manage pyzmq packages</span></span><br><span class="line">pip uninstall pyzmq</span><br><span class="line">pip install pyzmq</span><br></pre></td></tr></table></figure></div><p>Pro-tested to work.</p><blockquote><p>If you have similar <em>ModuleNotFoundError</em> problems, you can try the above method and use pip instead of conda to manage those python packages, uninstall and reinstall them first.</p><p>The main thing is to find that exact package name, you can try to search keywords in <a target="_blank" rel="noopener" href="https://pypi.org/">pypi</a>.</p></blockquote><h4 id="Port-Possession"><a href="#Port-Possession" class="headerlink" title="Port Possession"></a>Port Possession</h4><p>Since it is a server shared by multiple people in the lab, the default port 8888 of the notebook is also occupied. Here is the solution.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ipython</span><br><span class="line"><span class="comment"># Access the python console</span></span><br><span class="line">Python 3.7.13 (default, Mar 29 2022, 02:18:16) </span><br><span class="line">Type <span class="string">&#x27;copyright&#x27;</span>, <span class="string">&#x27;credits&#x27;</span> or <span class="string">&#x27;license&#x27;</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython 7.31.1 -- An enhanced Interactive Python. <span class="built_in">type</span> <span class="string">&#x27;? for help.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [1]: from notebook.auth import passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [2]: passwd()</span></span><br><span class="line"><span class="string">Enter password: </span></span><br><span class="line"><span class="string">Verify password: </span></span><br><span class="line"><span class="string">Out [2]: &#x27;</span>argon2:$argon2id<span class="variable">$v</span>=19<span class="variable">$m</span>=10240,t=10,p=xxxxxxxxx<span class="string">&#x27; # Copy the content between &#x27;</span><span class="string">&#x27; needed later</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [2]: exit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">jupyter notebook --generate-config # This will prompt you where the generated file is</span></span><br><span class="line"><span class="string">vim ~/.jupyter/jupyter_notebook_config.py # Edit the file prompted in the previous step here</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add or modify the following</span></span><br><span class="line"><span class="string">c.NotebookApp.allow_remote_access = True</span></span><br><span class="line"><span class="string">c.NotebookApp.ip = &#x27;</span>*<span class="string">&#x27;</span></span><br><span class="line"><span class="string">c.NotebookApp.password = u&#x27;</span>argon2:$argon2id<span class="variable">$v</span>=19<span class="variable">$m</span>=10240,t=10,p=8<span class="variable">$Vc5lLVsXKZLGftp6xrHfEfOkQvIU5YiOhdw</span><span class="string">&#x27; # Paste the previously copied key</span></span><br><span class="line"><span class="string">c.NotebookApp.open_browser = False</span></span><br><span class="line"><span class="string">c.NotebookApp.port = 61111 # Set the port and be careful not to duplicate it with others</span></span><br><span class="line"><span class="string">c.NotebookApp.notebook_dir = &#x27;</span>/home/xxx/<span class="string">&#x27; # not necessary set jupyter default directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Once set, you should be able to access it normally</span></span><br><span class="line"><span class="string">jupyter notebook</span></span><br></pre></td></tr></table></figure></div><h3 id="Beautification-enhancements"><a href="#Beautification-enhancements" class="headerlink" title="Beautification enhancements"></a>Beautification enhancements</h3><p>This part is not essential and is for record only.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure themes</span></span><br><span class="line">pip install jupyterthemes</span><br><span class="line"><span class="comment"># A set of theme settings that I personally like and have gotten used to</span></span><br><span class="line">jt -t monokai -f fira -fs 13 -cellw 90% -ofs 11 -dfs 11 -T -N</span><br><span class="line"><span class="comment"># Restore the default theme</span></span><br><span class="line">jt -r</span><br><span class="line"><span class="comment"># Configure plugins</span></span><br><span class="line">pip install jupyter_contrib_nbextensions</span><br><span class="line">jupyter contrib nbextension install --user</span><br><span class="line">pip install jupyter_nbextensions_configurator</span><br><span class="line"><span class="comment"># Suggested configuration items</span></span><br><span class="line"><span class="comment"># Hinterland code completion</span></span><br><span class="line"><span class="comment"># Collapsible headings Collapse headings</span></span><br><span class="line"><span class="comment"># Notify notification mechanism to run time-consuming tasks and notify when they are completed</span></span><br><span class="line"><span class="comment"># Codefolding collapsing code</span></span><br><span class="line"><span class="comment"># zenmode Hide the active status bar for easy attention to the code</span></span><br><span class="line"><span class="comment"># ExecuteTime shows the running time</span></span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010205123146.webp" data-caption="Plugin"><picture><source srcset="conda-r-jupyter/image-20221010205123146.webp" type="image/webp"><img src="conda-r-jupyter/image-20221010205123146.png" alt="Plugin"></picture></a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p>All the users who enthusiastically shared their tutorial experience.</p><div id="copyright"><style>#easter-egg{border:0;padding:10px 0;position:relative}#easter-egg::before{font-family:"Font Awesome 5 Free";font-weight:900;content:"Page Over \f1b0  Thank You";position:absolute;padding:0 10px;line-height:1px;white-space:nowrap;left:50%;transform:translateX(-50%)}</style><hr id="easter-egg"><blockquote style="padding:0"><p>Author: Yuesir</p><p>Link: <a href="/en/article/conda-r-jupyter.html" target="_blank" title="Conda installing R kernel Notebook">https://vccv.cc/en/article/conda-r-jupyter.html</a></p><p>Copyright: All articles except special statements are used <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a> license agreement, reproduced please indicate the source!</p></blockquote><hr></div></div></article><div class="blog-post-comments"><div id="tcomment"><noscript>Please enable JavaScript to view the comments.</noscript></div></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Guide"><span class="toc-number">2.</span> <span class="toc-text">Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-Conda"><span class="toc-number">2.1.</span> <span class="toc-text">Install Conda</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-Environment"><span class="toc-number">2.2.</span> <span class="toc-text">Creating Environment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-R"><span class="toc-number">2.3.</span> <span class="toc-text">Install R</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Install-R-kernel-and-Jupyter"><span class="toc-number">2.4.</span> <span class="toc-text">Install R kernel and Jupyter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Start-Notebook"><span class="toc-number">2.5.</span> <span class="toc-text">Start Notebook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exception-Handling"><span class="toc-number">2.6.</span> <span class="toc-text">Exception Handling</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Module-Missing"><span class="toc-number">2.6.1.</span> <span class="toc-text">Module Missing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Port-Possession"><span class="toc-number">2.6.2.</span> <span class="toc-text">Port Possession</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Beautification-enhancements"><span class="toc-number">2.7.</span> <span class="toc-text">Beautification enhancements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Thanks"><span class="toc-number">3.</span> <span class="toc-text">Thanks</span></a></li></ol></div><div id="actions-footer"><a id="menu" class="icon" onclick='$("#nav-footer").toggle()'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" onclick='$("#toc-footer").toggle()'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="switch" class="icon" onclick="switchNightMode()"><i class="fas fa-lightbulb fa-lg" aria-hidden="true"></i> Theme</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2020-2024 Yuesir <a href="https://github.com/probberechts/hexo-theme-cactus" rel="nofollow" target="_blank">Cactus</a> <a href="/en/atom.xml" target="_blank">RSS</a></div><div class="footer-right"><nav><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></nav></div></footer></div><link rel="preload" href="/en/lib/font-awesome/css/all.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="/en/lib/font-awesome/css/all.min.css"></noscript><script src="/en/lib/jquery/jquery.min.js"></script><script src="/en/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$((function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard"><i class="far fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","").replace(/^\s+|\s+$/g,"")}}).on("success",(function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()}))}))</script><script src="/en/js/main.js"></script><script src="/en/lib/fancybox/fancybox.umd.js"></script><script src="/en/lib/twikoo/twikoo.all.min.js"></script><script>twikoo.init({envId:"https://twikoo.vccv.cc",el:"#tcomment",lang:"en",onCommentLoaded:function(){for(var t=document.getElementsByClassName("tk-content"),e=0;e<t.length;e++){var n=t[e].getElementsByTagName("img");if(n.length>0)for(var a=0;a<n.length;a++){var o=n[a];if("tk-owo-emotion"!=o.className){var r=document.createElement("a");r.setAttribute("data-fancybox","gallery"),r.setAttribute("data-src",o.getAttribute("src")),r.setAttribute("data-caption","Comment: "+o.getAttribute("alt")),r.appendChild(o.cloneNode(!1)),o.parentNode.insertBefore(r,o.nextSibling),o.remove()}}}}})</script><script src="/lib/april-fool/load.js"></script></body></html>