<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:webfeeds="http://webfeeds.org/rss/1.0">
  <title>Yuesir</title>
  <icon>https://vccv.cc/en/images/favicon.ico</icon>
  <subtitle>I fully enjoy the fun of writing and programming. These output words are of great significance to me: they can help me explore, sort out and record the bits and pieces of life. Welcome visit!</subtitle>
  <link href="https://vccv.cc/en/atom.xml" rel="self"/>
  <link href="https://pubsubhubbub.appspot.com/" rel="hub"/>
  <link href="https://vccv.cc/en/"/>
  <updated>2024-03-14T02:17:56.000Z</updated>
  <id>https://vccv.cc/en/</id>
  
  <author>
    <name>Yuesir</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>

 <webfeeds:cover image="https://gravatar.zeruns.tech/avatar/faf6169dea156ae24b9794fb9ceb82f1" />
  <webfeeds:icon>https://vccv.cc/en/images/favicon.ico</webfeeds:icon>
  <webfeeds:logo>https://vccv.cc/en/images/favicon.ico</webfeeds:logo>
 <webfeeds:accentColor>0abab5</webfeeds:accentColor>
 <webfeeds:related layout="card" target="browser"/>

  
  <entry>
    <title>Thinkings about the hugging face document</title>
    <link href="https://vccv.cc/en/article/llm-transformers.html"/>
    <id>https://vccv.cc/en/article/llm-transformers.html</id>
    <published>2024-03-11T11:17:56.000Z</published>
    <updated>2024-03-14T02:17:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Single-GPU-Optimization"><a href="#Single-GPU-Optimization" class="headerlink" title="Single GPU Optimization"></a>Single GPU Optimization</h2><p>Resource: <a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one">Hugging Face Doc</a></p><table><thead><tr><th>Method/tool</th><th>Improves training speed</th><th>Optimizes memory utilization</th></tr></thead><tbody><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#batch-size-choice">Batch size choice</a></td><td>Yes</td><td>Yes</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#gradient-accumulation">Gradient accumulation</a></td><td>No</td><td>Yes</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#gradient-checkpointing">Gradient checkpointing</a></td><td>No</td><td>Yes</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#mixed-precision-training">Mixed precision training</a></td><td>Yes</td><td>(<strong>No</strong>)</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#optimizer-choice">Optimizer choice</a></td><td>Yes</td><td>Yes</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#data-preloading">Data preloading</a></td><td>Yes</td><td>No</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#deepspeed-zero">DeepSpeed Zero</a></td><td>No</td><td>Yes</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#using-torchcompile">torch.compile</a></td><td>Yes</td><td>No</td></tr><tr><td><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#using--peft">Parameter-Efficient Fine Tuning (PEFT)</a></td><td>No</td><td>Yes</td></tr></tbody></table><h3 id="FP16"><a href="#FP16" class="headerlink" title="FP16"></a>FP16</h3><blockquote><p>If your model doesn’t work well with mixed precision, for example if it wasn’t pretrained in mixed precision, you may encounter overflow or underflow issues which can cause NaN loss. For these cases, you should use full fp32 precision by explicitly disabling the default fp16 mode.</p></blockquote><h3 id="ZERO"><a href="#ZERO" class="headerlink" title="ZERO"></a>ZERO</h3><p>stage 1 Optimizer state</p><p>stage 2 Optimizer state + gradient</p><p>stage 3 optimizer state + gradient + model parameters (weights) </p><p>The inference stage zero-1 zero-2 does nothing, only zero-3 can be set (no optimizer is needed for the inference stage and no gradient is generated). Also if Transformers&lt;4.28, you need to set <code>synced_gpus=True</code> when generating.</p><blockquote><p>Using multiple GPUs with ZeRO-3 for generation requires synchronizing the GPUs by setting <code>synced_gpus=True</code> in the <a href="https://huggingface.co/docs/transformers/main/en/model_doc/phi#transformers.PhiForCausalLM.generate">generate()</a> method. Otherwise, if one GPU is finished generating before another one, the whole system hangs because the remaining GPUs haven’t received the weight shard from the GPU that finished first.</p><p>For Transformers&gt;=4.28, if <code>synced_gpus</code> is automatically set to <code>True</code> if multiple GPUs are detected during generation.</p></blockquote><p>If offload is configured, you need to choose an optimizer that is adapted to both CPU and GPU, and the commonly used Adam cannot be used.</p><blockquote><p>DeepSpeed and Transformers optimizer and scheduler can be mixed and matched as long as you don’t enable <code>offload_optimizer</code>. When <code>offload_optimizer</code> is enabled, you could use a <u>non-DeepSpeed optimizer</u> (except for LAMB) as long as it has <u>both a CPU and GPU implementation</u>.</p></blockquote><h2 id="Multi-GPU-Optimization"><a href="#Multi-GPU-Optimization" class="headerlink" title="Multi-GPU Optimization"></a>Multi-GPU Optimization</h2><p>Resource: <a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_many">Hugging Face Doc</a></p><p>It’s mostly just a few latitudes of parallelism: Data + Pipeline + Tensor.</p><h2 id="Confusion"><a href="#Confusion" class="headerlink" title="Confusion"></a>Confusion</h2><h3 id="FP16-1"><a href="#FP16-1" class="headerlink" title="FP16"></a>FP16</h3><p>Only speeds up the training process, <strong>not necessarily</strong> reduces the memory footprint (maybe even by a factor of 1.5).</p><blockquote><p>While mixed precision training results in faster computations, it can also lead to more GPU memory being utilized, especially for small batch sizes. <u>This is because the model is now present on the GPU in both 16-bit and 32-bit precision</u> (1.5x the original model on the GPU). From: <a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one#mixed-precision-training">Hugging Face Doc</a></p><p><u>Note</u>: when using mixed precision with a small model and a large batch size, there will be some memory savings but with a large model and a small batch size, the memory use will be larger.</p></blockquote><h4 id="Small-models-large-batch-sizes"><a href="#Small-models-large-batch-sizes" class="headerlink" title="Small models, large batch sizes"></a>Small models, large batch sizes</h4><ul><li><strong>MEMORY SAVINGS</strong>: For small models, the model parameters and weights take up relatively little memory. When training with large batch sizes, the memory occupied by activations and gradients becomes the main memory usage part. In this case, converting activations and gradients to FP16 can significantly reduce this portion of memory usage, as FP16 occupies half the memory of FP32. Even when considering the retention of FP32-accurate copies of the model weights, the overall memory usage is still reduced because the memory savings of the activations and gradients outweigh the memory overhead of the additional copies of the weights.</li><li><strong>EFFICIENCY AND SAVINGS</strong>: Large batch sizes mean that more data is processed per iteration, which increases the amount of memory required to compute activations and gradients. Since this part now uses FP16, the overall memory requirement is reduced compared to using only FP32.</li></ul><h4 id="Large-model-small-batch-size"><a href="#Large-model-small-batch-size" class="headerlink" title="Large model, small batch size"></a>Large model, small batch size</h4><ul><li><strong>Increased memory usage</strong>: for large models, the model parameters and weights themselves take up a lot of memory. In mixed-precision training, even if the activations and gradients are stored as FP16, a copy of the FP32-precision weights still needs to be retained to ensure the accuracy of the updates. This means that the additional memory overhead (due to the FP32 copy of the weights) is a relatively large part of the total memory footprint relative to the size of the model itself. When the batch size is small, the activations and gradients take up relatively little memory, so the memory saving effect from FP16 is not enough to offset the additional memory usage added by keeping FP32 weight copies.</li><li><strong>Impact of weighted copies</strong>: in this case, the additional memory used by FP32 weighted copies becomes a significant factor because the model itself is large. Even if FP16 is used for activation and gradient, the total memory usage may still increase due to FP32 weighted copies.</li></ul><h3 id="Gradient-accumulation"><a href="#Gradient-accumulation" class="headerlink" title="Gradient accumulation"></a>Gradient accumulation</h3><p>Effective batch = gradient accumulation * actual batch.</p><div class="highlight-wrap" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">training_args = TrainingArguments(per_device_train_batch_size=<span class="number">1</span>, gradient_accumulation_steps=<span class="number">4</span>, **default_args)</span><br></pre></td></tr></table></figure></div><p>In the above example, your effective batch size becomes 4.</p><div class="highlight-wrap" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>): <span class="comment"># Assume 2 epochs of training</span></span><br><span class="line">    <span class="keyword">for</span> i, (inputs, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(dataloader):: inputs = torch.tensor(inputs, dtype=torch.float32): <span class="comment"># Suppose train 2 epochs.</span></span><br><span class="line">        inputs = torch.tensor(inputs, dtype=torch.float32)</span><br><span class="line">        labels = torch.tensor(labels, dtype=torch.long)</span><br><span class="line">        <span class="comment"># Forward propagation</span></span><br><span class="line">        outputs = model(inputs)</span><br><span class="line">        loss = criterion(outputs, labels) / accumulation_steps <span class="comment"># Note that this is divided by the number of accumulated steps</span></span><br><span class="line">        <span class="comment"># Backward propagation</span></span><br><span class="line">        loss.backward()</span><br><span class="line">        <span class="comment"># Update model parameters every accumulation_steps</span></span><br><span class="line">        <span class="keyword">if</span> (i + <span class="number">1</span>) % accumulation_steps == <span class="number">0</span> <span class="keyword">or</span> (i + <span class="number">1</span>) == <span class="built_in">len</span>(dataloader).</span><br><span class="line">            optimizer.step() <span class="comment"># update parameters</span></span><br><span class="line">            optimizer.zero_grad() <span class="comment"># clear the gradient</span></span><br></pre></td></tr></table></figure></div><p>BP is required each time, but the optimizer updates the parameters only when the cumulative number of gradient steps is reached.</p><blockquote><p>optimizer.step() vs optimizer.zero_grad()</p><p>Normal training flow: zero_grad then step Avoid the gradient computed by previous batch to affect the current optimizer state.</p><p>Gradient accumulation process: step then zero_grad As the name suggests, we want to let the gradient accumulation take effect and then update the parameters at the end.</p></blockquote><p>Prioritize the <code>per_device_train_batch_size</code> setting that guarantees the GPU limit is reached before considering accumulation.</p><blockquote><p>While it is advised to max out GPU usage as much as possible, a high number of gradient accumulation steps can result in a more pronounced training slowdown. Consider the following example. Let’s say, the <code>per_device_train_batch_size=4</code> without gradient accumulation hits the GPU’s limit. If you would like to train with batches of size 64, do not set the <code>per_device_train_batch_size</code> to 1 and <code>gradient_accumulation_steps</code> to 64. Instead, keep <code>per_device_train_batch_size=4</code> and set <code>gradient_accumulation_steps=16</code>. This results in the same effective batch size while making better use of the available GPU resources.</p></blockquote><p>It is not known whether gradient accumulation causes excess memory usage. Or rather I don’t think it does, I think the gradient just changes from one number to another number resulting from multiple accumulations, the data format doesn’t change and the number of bytes taken up doesn’t change. In practice it seems to have an effect, but I can’t find a reason to rationalize it.</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://huggingface.co/docs/transformers/main/en/perf_train_gpu_one">Hugging Face Doc</a></p>]]></content>
    
    
    <summary type="html">Briefly record the conclusions and methods that appear in the official documentation of hugging face. By the way, record some personal thinking and confusion, so that it is convenient to go back and solve the problem later. Welcome to comment.</summary>
    
    
    
    <category term="thinking" scheme="https://vccv.cc/en/categories/thinking/"/>
    
    <category term="nlp" scheme="https://vccv.cc/en/categories/thinking/nlp/"/>
    
    <category term="llm" scheme="https://vccv.cc/en/categories/thinking/nlp/llm/"/>
    
    
    <category term="transformers" scheme="https://vccv.cc/en/tags/transformers/"/>
    
    <category term="huggingface" scheme="https://vccv.cc/en/tags/huggingface/"/>
    
  </entry>
  
  <entry>
    <title>Non-Root Installation of CUDA NLP by Conda</title>
    <link href="https://vccv.cc/en/article/cuda-conda-nlp.html"/>
    <id>https://vccv.cc/en/article/cuda-conda-nlp.html</id>
    <published>2024-03-10T08:13:14.000Z</published>
    <updated>2024-03-10T08:13:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>Non-ROOT users configure a remote CUDA server for a deep learning environment, below is an example of Pytorch.</p><h2 id="CUDA-driver"><a href="#CUDA-driver" class="headerlink" title="CUDA driver"></a>CUDA driver</h2><p>Check the version of CUDA already installed on the server:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc -V</span><br></pre></td></tr></table></figure></div><p>Showing version 11.4 here, but it doesn’t matter. Next to check the driver version, this relates to the latest CUDA version that we can install in the conda virtual environment.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br><span class="line"></span><br><span class="line"><span class="comment">### Output</span></span><br><span class="line"><span class="comment">### Driver Version: 535.129.03   CUDA Version: 12.2</span></span><br></pre></td></tr></table></figure></div><blockquote><p>Tips:</p><p>The CUDA Version shown here is 12.2, which is actually the latest CUDA version that the CUDA driver installed on the server supports to install, which means that the highest CUDA version we can install next is 12.2, and the CUDA version that has already been installed on this machine is 11.4.</p><p>Because we are a NON-ROOT user, we can’t change the <u>installed driver version</u>, but we can install the new CUDA version through the Conda virtual environment.</p></blockquote><h2 id="Conda"><a href="#Conda" class="headerlink" title="Conda"></a>Conda</h2><p>When configuring python-related environments for non-root users, I extremely recommend using the conda package manager for dependency management (in fact, it’s also recommended for those using R).</p><p>I’m installing the miniconda version here (the minimized version), but you can also install anaconda (the full version).</p><p>The blog has been written about <a href="https://vccv.cc/en/article/conda-r-jupyter.html">related content</a> before.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># I installed the environment with python 3.10</span></span><br><span class="line">conda create -n torch python=3.10</span><br><span class="line">conda activate torch</span><br></pre></td></tr></table></figure></div><h2 id="Pytorch"><a href="#Pytorch" class="headerlink" title="Pytorch"></a>Pytorch</h2><p>You can check the Pytorch history release at <a href="https://pytorch.org/get-started/previous-versions/">Pytorch History Release</a> and combine it with your own needs (e.g., [Colossal-AI](https:// colossalai.org/zh-Hans/docs/get_started/installation/) requires PyTorch &gt;= 1.11 and PyTorch &lt;= 2.1). I ended up with pytorch==2.1.0 and CUDA==11.8.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CUDA 11.8</span></span><br><span class="line"><span class="comment"># Less than the maximum supported driver version 12.2 but more than the installed CUDA version 11.4</span></span><br><span class="line"><span class="comment"># Try not to jump to a bigger version</span></span><br><span class="line"><span class="comment"># For example, if I have 11.4 installed on my machine, then I would install it with cuda=11.8. Does it seem to be a problem to install 12.1?</span></span><br><span class="line">conda install pytorch==2.1.0 torchvision==0.16.0 torchaudio==2.1.0 pytorch-cuda=11.8 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure></div><blockquote><p>Thinking:</p><p>As for why pytorch doesn’t redistribute for some cuda versions, in this <a href="https://github.com/pytorch/pytorch/issues/75992">issue</a> one of pytorch’s developers explains that pytorch-cuda113 can be used on cuda114 This simply means that there is no need to re-release it, and that the 113 version can be used for the 114 version.</p><p><a data-fancybox="gallery" data-src="cuda-conda-nlp/image-20240315144020525.webp" data-caption="pytorch-cuda"><picture>               <source srcset="cuda-conda-nlp/image-20240315144020525.webp" type="image/webp">               <img src="cuda-conda-nlp/image-20240315144020525.png" alt="pytorch-cuda"></picture></a></p></blockquote><p>Check availability</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(torch) [username/pwd]$ python</span><br><span class="line">Python 3.10.13 (main, Sep 11 2023, 13:44:35) [GCC 11.2.0] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import torch</span><br><span class="line">&gt;&gt;&gt; torch.cuda.is_available()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">exit</span>()</span><br></pre></td></tr></table></figure></div><h2 id="CUDA"><a href="#CUDA" class="headerlink" title="CUDA"></a>CUDA</h2><p>At <a href="https://anaconda.org/nvidia/cuda">Nvidia-Cuda</a> look for the CUDA version corresponding to the installed Pytorch, in my case 11.8.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># In nvidia, this channel doesn&#x27;t even show a progress bar when downloading packages.</span></span><br><span class="line"><span class="comment"># It will only show 0% or 100%, but the download speed is fine, it&#x27;s not walled off, just wait patiently.</span></span><br><span class="line">conda install nvidia/label/cuda-11.8.0::cuda</span><br></pre></td></tr></table></figure></div><p>At this point, enter the <code>nvcc -V</code> command to find that the installed version is now 11.8.</p><p><a data-fancybox="gallery" data-src="cuda-conda-nlp/image-20240315144208260.webp" data-caption="nvcc -V"><picture>               <source srcset="cuda-conda-nlp/image-20240315144208260.webp" type="image/webp">               <img src="cuda-conda-nlp/image-20240315144208260.png" alt="nvcc -V"></picture></a></p><h3 id="Cuda-installed-using-conda"><a href="#Cuda-installed-using-conda" class="headerlink" title="Cuda installed using conda"></a>Cuda installed using conda</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This prevents programs that cannot find the CUDA (11.8) installed by conda from using the CUDA (11.4) that comes with the system.</span></span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=<span class="variable">$CONDA_PREFIX</span></span><br></pre></td></tr></table></figure></div><h2 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h2><h3 id="gcc-clang-g-clang"><a href="#gcc-clang-g-clang" class="headerlink" title="gcc clang g++ clang++"></a>gcc clang g++ clang++</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The server comes with a version of gcc that is too low and doesn&#x27;t even support g++. Use conda to install it and it works straight away.</span></span><br><span class="line">conda install -c conda-forge cxx-compiler</span><br></pre></td></tr></table></figure></div><h3 id="xformers"><a href="#xformers" class="headerlink" title="xformers"></a>xformers</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Official repository suggested commands</span></span><br><span class="line">conda install xformers -c xformers</span><br><span class="line"></span><br><span class="line"><span class="comment"># Be sure to double-check the package change log before confirming the installation.</span></span><br><span class="line"><span class="comment"># There is a chance that it could replace an installed version of pytorch, so don&#x27;t install it.</span></span><br><span class="line"><span class="comment"># Try adding -c nvidia -c pytorch and you should be fine.</span></span><br><span class="line">conda install xformers -c xformers -c nvidia -c pytorch</span><br></pre></td></tr></table></figure></div><h3 id="transformers-amp-datasets-amp-accelerate"><a href="#transformers-amp-datasets-amp-accelerate" class="headerlink" title="transformers &amp; datasets &amp; accelerate"></a>transformers &amp; datasets &amp; accelerate</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Installation with conda may not be the latest version</span></span><br><span class="line">pip install transformers datasets accelerate -U</span><br></pre></td></tr></table></figure></div><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://anaconda.org/nvidia/cuda">Nvidia-Cuda</a></p><p><a href="https://pytorch.org/get-started/previous-versions/">Pytorch History Release</a></p><p><a href="https://github.com/pytorch/pytorch/issues/75992">Pytorch Github Issue</a></p>]]></content>
    
    
    <summary type="html">How a non-root user can install a newer version of the transformers suite without being able to change the version of the installed cuda driver.</summary>
    
    
    
    <category term="linux" scheme="https://vccv.cc/en/categories/linux/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/linux/technique/"/>
    
    
    <category term="conda" scheme="https://vccv.cc/en/tags/conda/"/>
    
    <category term="nvidia" scheme="https://vccv.cc/en/tags/nvidia/"/>
    
    <category term="cuda" scheme="https://vccv.cc/en/tags/cuda/"/>
    
    <category term="transformers" scheme="https://vccv.cc/en/tags/transformers/"/>
    
  </entry>
  
  <entry>
    <title>Switch Xcode to Compile Unadapted Theos Plugins</title>
    <link href="https://vccv.cc/en/article/switch-xcode-theos.html"/>
    <id>https://vccv.cc/en/article/switch-xcode-theos.html</id>
    <published>2023-04-24T14:52:25.000Z</published>
    <updated>2023-04-24T14:52:25.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Recently, I need to recompile an iOS jailbreak plugin named <a href="https://github.com/giorgioiavicoli/PassBy">PassBy</a>, and found that it reported errors frequently on my new device, so I recorded the exploration and solution process below.</p><p>Since I’m not a professional, and I don’t even know much about iOS development, this is a record of my exploration with the attitude of learning. If there are any mistakes, welcome to criticize and correct in the comment section.</p><blockquote><p>By the way, I would like to advertise my other related article haha:</p><p><a href="https://vccv.cc/article/passby-fix.html">iOS Jailbreak Plugin PassBy Customization</a>, documenting my attempts to solve PassBy’s non-recognition of Bluetooth wearable devices other than the Apple Watch.</p></blockquote><h2 id="Trying-to-compile"><a href="#Trying-to-compile" class="headerlink" title="Trying to compile"></a>Trying to compile</h2><h3 id="Firstly"><a href="#Firstly" class="headerlink" title="Firstly"></a>Firstly</h3><blockquote><p>System: macOS Monterey 12.6.5</p><p>Chip type: Intel chip, not M series</p><p>Xcode version: 14.2</p></blockquote><p>I first tried to compile directly by typing <code>make package</code>, which prompted openURL has been deprecated.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315141449391.webp" data-caption="openurl deprecated"><picture>               <source srcset="switch-xcode-theos/image-20240315141449391.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315141449391.png" alt="openurl deprecated"></picture></a></p><p>At this point I guessed that the Xcode version was too high to cause the mismatch, and I was going to go to the <a href="https://github.com/giorgioiavicoli/PassBy">source code</a> on GitHub first to see if the author had made any updates. Unfortunately, there was nothing I could do but try to modify the code.</p><p>According to the error message I first found the relevant c file, searched for the openURL keyword and commented out the relevant code.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315141626698.webp" data-caption="comment openURL code"><picture>               <source srcset="switch-xcode-theos/image-20240315141626698.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315141626698.png" alt="comment openURL code"></picture></a></p><p>Continue to look for, you can find that this is not affect the main function of the code, should be to perform a donation and source code to open the URL of the operation, because I am not familiar with Objective-C language, the simplest way is to directly comment out, but fortunately does not affect the main function of the plug-in. The two URLs I pasted below:</p><ul><li>Donate (Donate): <a href="https://paypal.me/giorgioiavicoli">https://paypal.me/giorgioiavicoli</a></li><li>Source Code: <a href="https://github.com/giorgioiavicoli/PassBy">https://github.com/giorgioiavicoli/PassBy</a></li></ul><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315141700986.webp" data-caption="comment openURL code"><picture>               <source srcset="switch-xcode-theos/image-20240315141700986.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315141700986.png" alt="comment openURL code"></picture></a></p><h3 id="Secondly"><a href="#Secondly" class="headerlink" title="Secondly"></a>Secondly</h3><p>Trying to continue compiling, unsurprisingly, a new problem arises.</p><p>This time, the problem is even more difficult, as theos is directly prompted by the Xcode compiler that it cannot find the Message framework.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315141745773.webp" data-caption="Message framework not found"><picture>               <source srcset="switch-xcode-theos/image-20240315141745773.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315141745773.png" alt="Message framework not found"></picture></a></p><p>This problem would not be something I could fix with a simple modification. My guess is that the newer versions of Xcode have discarded the framework, which leaves me with two options: either refactor the code (which would be too difficult for me to do), or switch to an older version of Xcode (which is a bit of an unknown quantity until I get my hands on it, and I can’t guarantee that I’ll be able to fix it).</p><p>I can only try to change the Xcode version.</p><h2 id="Change-the-Xcode-version"><a href="#Change-the-Xcode-version" class="headerlink" title="Change the Xcode version"></a>Change the Xcode version</h2><p>First check the current version, you can see that it is version 14.2.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315141951902.webp" data-caption="View version"><picture>               <source srcset="switch-xcode-theos/image-20240315141951902.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315141951902.png" alt="View version"></picture></a></p><p>On the <a href="https://developer.apple.com/support/xcode/">Xcode support page</a> you can clearly see the minimum system requirements for each Xcode version as well as the included SDKs and other information.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142009732.webp" data-caption="Xcode version differences"><picture>               <source srcset="switch-xcode-theos/image-20240315142009732.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142009732.png" alt="Xcode version differences"></picture></a></p><p>Next go to Apple’s official download page about <a href="https://developer.apple.com/download/all/?q=xcode">all versions of Xcode</a> and just download an older version. I downloaded version 12.5.1.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142032937.webp" data-caption="Download version 12.5.1 of Xcode"><picture>               <source srcset="switch-xcode-theos/image-20240315142032937.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142032937.png" alt="Download version 12.5.1 of Xcode"></picture></a></p><p>The next step is to extract the .xip file, change the name of the extracted Xcode.app to a name like Xcode_12.5.app, and finally move it to the /Application directory.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142049748.webp" data-caption="Unzip and rename"><picture>               <source srcset="switch-xcode-theos/image-20240315142049748.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142049748.png" alt="Unzip and rename"></picture></a></p><p>As you can see in the image above, my old version of Xcode doesn’t open directly, but it doesn’t matter for the purposes of this chapter, we don’t need to open the old version of Xcode directly to operate it. Please read on to find out why.</p><blockquote><p>It takes a while to unpack, so be patient.</p><p>Alternatively, you can download and update Xcode in the usual way. With a multi-threaded download tool, you can basically run at full broadband speed and avoid App Store download failures. The disadvantage is that decompression is more time-consuming.</p></blockquote><h2 id="Switch-Development"><a href="#Switch-Development" class="headerlink" title="Switch Development"></a>Switch Development</h2><p>Note that the subtitle of this section is not “Switching Xcode Versions”, because for us, all we need is the scripting tools that come with older versions of Xcode in the development directory, such as gcc and so on.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142237680.webp" data-caption="developer tools directory"><picture>               <source srcset="switch-xcode-theos/image-20240315142237680.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142237680.png" alt="developer tools directory"></picture></a></p><p>Next just use this command to switch the xcode-select directory:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcode-select -s /Applications/&#123;modify here to a specific filename&#125;/Contents/Developer/</span><br></pre></td></tr></table></figure></div><p>Just change it to your old version of the file name, and enter the password without showing it.</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142300052.webp" data-caption="switch path"><picture>               <source srcset="switch-xcode-theos/image-20240315142300052.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142300052.png" alt="switch path"></picture></a></p><p>At this point, enter the command again to verify:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -version</span><br><span class="line">xcode-select -p</span><br><span class="line">gcc -v</span><br><span class="line">g++ -v</span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142336388.webp" data-caption="old version of gcc"><picture>               <source srcset="switch-xcode-theos/image-20240315142336388.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142336388.png" alt="old version of gcc"></picture></a></p><p>The output of all the above commands can be seen in the words of the name of the old version of Xcode file you chose, something like <strong>Xcode_12.5</strong>.</p><h2 id="Thirdly"><a href="#Thirdly" class="headerlink" title="Thirdly"></a>Thirdly</h2><p>Trying to compile again, the problem is finally solved.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">yuesir at iMac <span class="keyword">in</span> /Volumes/Data/Xcode/PassBy</span><br><span class="line">$ make package</span><br><span class="line">&gt; Making all <span class="keyword">for</span> tweak PassBy…</span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;internal-library-compile&#x27;</span>.</span><br><span class="line">&gt; Making all <span class="keyword">in</span> passbyprefs…</span><br><span class="line">&gt; Making all <span class="keyword">for</span> bundle PassByPrefs…</span><br><span class="line">==&gt; Copying resource directories into the bundle wrapper…</span><br><span class="line">==&gt; Compiling PassByRootListController.m (arm64)…</span><br><span class="line">==&gt; Compiling PassByRootListController.m (arm64e)…</span><br><span class="line">==&gt; Linking bundle PassByPrefs (arm64)…</span><br><span class="line">==&gt; Generating debug symbols <span class="keyword">for</span> PassByPrefs…</span><br><span class="line">==&gt; Stripping PassByPrefs (arm64)…</span><br><span class="line">==&gt; Linking bundle PassByPrefs (arm64e)…</span><br><span class="line">==&gt; Generating debug symbols <span class="keyword">for</span> PassByPrefs…</span><br><span class="line">==&gt; Stripping PassByPrefs (arm64e)…</span><br><span class="line">==&gt; Merging bundle PassByPrefs…</span><br><span class="line">==&gt; Signing PassByPrefs…</span><br><span class="line">&gt; Making all <span class="keyword">in</span> passbyflipswitch…</span><br><span class="line">&gt; Making all <span class="keyword">for</span> bundle PassByFlipswitch…</span><br><span class="line">==&gt; Copying resource directories into the bundle wrapper…</span><br><span class="line">make[3]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;internal-bundle-compile&#x27;</span>.</span><br><span class="line">&gt; Making stage <span class="keyword">for</span> tweak PassBy…</span><br><span class="line">&gt; Making stage <span class="keyword">in</span> passbyprefs…</span><br><span class="line">&gt; Making stage <span class="keyword">for</span> bundle PassByPrefs…</span><br><span class="line">&gt; Making stage <span class="keyword">in</span> passbyflipswitch…</span><br><span class="line">&gt; Making stage <span class="keyword">for</span> bundle PassByFlipswitch…</span><br><span class="line">dm.pl: building package `com.giorgioiavicoli.passby:iphoneos-arm<span class="string">&#x27; in `./packages/com.giorgioiavicoli.passby_1.9.5_iphoneos-arm.deb&#x27;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>In fact, I tried to restore the above commented out code to normal, but I didn’t realize that it still reported the same error!</p><p>I suspected that it might be a problem with the version of Command Line Tools installed. I didn’t try it because I didn’t know what would happen if I installed a lower version of Tools.</p></blockquote><h2 id="Switch-Back"><a href="#Switch-Back" class="headerlink" title="Switch Back"></a>Switch Back</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcode-select -s /Applications/Xcode.app/Contents/Developer/</span><br></pre></td></tr></table></figure></div><p>Simply verify it:</p><p><a data-fancybox="gallery" data-src="switch-xcode-theos/image-20240315142734101.webp" data-caption="Switch back to original version"><picture>               <source srcset="switch-xcode-theos/image-20240315142734101.webp" type="image/webp">               <img src="switch-xcode-theos/image-20240315142734101.png" alt="Switch back to original version"></picture></a></p><h2 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h2><p>Here’s another script shared by others, but I didn’t try it myself, so I’m posting the link here as a thank you.</p><p>Link to the article: <a href="https://www.cnblogs.com/zndxall/p/12463744.html">https://www.cnblogs.com/zndxall/p/12463744.html</a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://developer.apple.com/download/all/?q=xcode%2012.5.1">Apple Xcode</a></p><p><a href="https://www.cnblogs.com/zndxall/p/12463744.html">Xcode installs multiple versions and switches versions automatically</a></p>]]></content>
    
    
    <summary type="html">After recently replacing my device with a new one, I was about to recompile an iOS jailbreak plugin called PassBy, and found that it frequently reported errors. After a bit of troubleshooting and searching, I determined that switching Xcode to an older version was the easiest solution, so I documented it.</summary>
    
    
    
    <category term="ios" scheme="https://vccv.cc/en/categories/ios/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/ios/technique/"/>
    
    
    <category term="macos" scheme="https://vccv.cc/en/tags/macos/"/>
    
    <category term="ios" scheme="https://vccv.cc/en/tags/ios/"/>
    
    <category term="xcode" scheme="https://vccv.cc/en/tags/xcode/"/>
    
    <category term="theos" scheme="https://vccv.cc/en/tags/theos/"/>
    
  </entry>
  
  <entry>
    <title>Brew installing R-Kernel Notebook</title>
    <link href="https://vccv.cc/en/article/brew-r-jupyter.html"/>
    <id>https://vccv.cc/en/article/brew-r-jupyter.html</id>
    <published>2023-01-16T03:40:36.000Z</published>
    <updated>2024-03-15T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>My other post describes using <a href="https://vccv.cc/en/article/conda-r-jupyter.html">Conda installing R kernel Notebook</a> on a Linux remote server, but I’ve found that conda doesn’t handle various dependency conflicts very well, often resulting in installations that don’t I found that conda doesn’t handle dependency conflicts well, which often leads to unsuccessful installations.</p><p>Later, I also used brew to install it on my macOS system, and found that it was easier and faster, so I summarized the steps.</p><blockquote><p>System: macOS Venture 13.1 (22C65)</p><p>Product: Intel Chip MacBook</p></blockquote><h2 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h2><p>Install <a href="https://brew.sh/">Homebrew</a>.</p><p>Homebrew is the most used package manager on macOS, and this is its <a href="https://docs.brew.sh/Installation">official installation tutorial</a>. But usually, we just need to enter the following command while making sure the network is accessible:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure></div><h2 id="R"><a href="#R" class="headerlink" title="R"></a>R</h2><p>It is so easy to install r package with brew:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install r</span><br></pre></td></tr></table></figure></div><h2 id="Jupyter"><a href="#Jupyter" class="headerlink" title="Jupyter"></a>Jupyter</h2><p>Almost the same as before:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install jupyterlab</span><br></pre></td></tr></table></figure></div><h2 id="R-Kernel"><a href="#R-Kernel" class="headerlink" title="R-Kernel"></a>R-Kernel</h2><p>Use r to install <a href="https://github.com/IRkernel/IRkernel">IRkernel</a>:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Go to the r console first</span></span><br><span class="line">R</span><br><span class="line"><span class="comment"># Install devtools</span></span><br><span class="line">install.packages(<span class="string">&#x27;IRkernel&#x27;</span>)</span><br><span class="line"><span class="comment"># At this point you might be asked to choose a mirror, just choose the nearest one</span></span><br><span class="line"><span class="comment"># Register the kernel with R</span></span><br><span class="line">IRkernel::installspec()</span><br><span class="line"><span class="comment"># Install the RStudio shortcut.</span></span><br><span class="line"><span class="comment"># If RStudio is installed, you can choose to install it, but not if you&#x27;re using a notebook.</span></span><br><span class="line">jupyter labextension install @techrah/text-shortcuts</span><br></pre></td></tr></table></figure></div><h2 id="Launch-Notebook"><a href="#Launch-Notebook" class="headerlink" title="Launch Notebook"></a>Launch Notebook</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure></div><p>Click Create or New button and find that you can create r-kernel notebooks now.</p><h2 id="Landscaping"><a href="#Landscaping" class="headerlink" title="Landscaping"></a>Landscaping</h2><p>This part is not necessary and is for record only.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure themes</span></span><br><span class="line">pip install jupyterthemes</span><br><span class="line"><span class="comment"># A set of theme settings that I personally like and have gotten used to</span></span><br><span class="line">jt -t monokai -f fira -fs 13 -cellw 90% -ofs 11 -dfs 11 -T -N</span><br><span class="line"><span class="comment"># Restore the default theme</span></span><br><span class="line">jt -r</span><br><span class="line"><span class="comment"># Configure plugins</span></span><br><span class="line">pip install jupyter_contrib_nbextensions</span><br><span class="line">jupyter contrib nbextension install --user</span><br><span class="line"><span class="comment"># Install the plugin manager This step may fail See update 1 later for details</span></span><br><span class="line">pip install jupyter_nbextensions_configurator</span><br><span class="line"><span class="comment"># Suggested configuration items</span></span><br><span class="line"><span class="comment"># Hinterland code completion</span></span><br><span class="line"><span class="comment"># Collapsible headings</span></span><br><span class="line"><span class="comment"># Notify Notify mechanism to run time-consuming tasks and notify when they&#x27;re done.</span></span><br><span class="line"><span class="comment"># zenmode Hide active status bar, easy to notice the code.</span></span><br><span class="line"><span class="comment"># ExecuteTime Show execution time</span></span><br></pre></td></tr></table></figure></div><h2 id="Postscript"><a href="#Postscript" class="headerlink" title="Postscript"></a>Postscript</h2><p>I didn’t run into any snags with this installation, so if you run into any other issues, feel free to leave them in the comments section.</p><h2 id="Update-1"><a href="#Update-1" class="headerlink" title="Update 1"></a>Update 1</h2><p>When I repeated this tutorial on 2023.03.20, I found that the <strong>Nbextensions</strong> tag would not appear. Upon checking, this was caused by the plugin not being updated to adapt a new version of the dependency package nbclassic.</p><p>See the GitHub <a href="https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator/issues/151">issue</a> for details.</p><p>Solution: Downgrade the dependency package. We may update it later.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install <span class="string">&quot;nbclassic&lt;0.5&quot;</span></span><br></pre></td></tr></table></figure></div><h2 id="Update-2"><a href="#Update-2" class="headerlink" title="Update 2"></a>Update 2</h2><p>2024.03.15 Update: The notebook was officially upgraded to version 7.x a couple months back. I haven’t had to do any 3rd party manipulation with the new version. It can be changed directly inside the settings with a high degree of customization.</p><p><a data-fancybox="gallery" data-src="brew-r-jupyter/image-20240315140244649.webp" data-caption="notebook-setting"><picture>               <source srcset="brew-r-jupyter/image-20240315140244649.webp" type="image/webp">               <img src="brew-r-jupyter/image-20240315140244649.png" alt="notebook-setting"></picture></a></p>]]></content>
    
    
    <summary type="html">I introduced in another article in the Linux remote server using conda configuration r-kernel jupyter notebook, but I found that conda for a variety of dependency conflicts are not handled well, often leading to unsuccessful installation. In macOS system locally using brew for installation is much easier and faster. Here I summarized steps for reference.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="brew" scheme="https://vccv.cc/en/tags/brew/"/>
    
    <category term="r" scheme="https://vccv.cc/en/tags/r/"/>
    
    <category term="jupyter" scheme="https://vccv.cc/en/tags/jupyter/"/>
    
  </entry>
  
  <entry>
    <title>Unix terminal installation configuration Oh My Zsh</title>
    <link href="https://vccv.cc/en/article/omz-terminal.html"/>
    <id>https://vccv.cc/en/article/omz-terminal.html</id>
    <published>2022-12-07T02:04:46.000Z</published>
    <updated>2022-12-07T02:04:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="What-is-Oh-My-Zsh"><a href="#What-is-Oh-My-Zsh" class="headerlink" title="What is Oh My Zsh"></a>What is Oh My Zsh</h3><ul><li><strong>Oh My Zsh</strong> is a community-driven command line tool, and as its homepage says, <strong>Oh My Zsh</strong> is a way of life. It is based on the <strong>zsh</strong> command line and offers theme configuration, plugin mechanism, and already built-in convenience operations. It gives us a whole new way to use the command line.</li><li><strong>Oh My Zsh</strong> is an extended toolset based on the <strong>zsh</strong> command line, providing a rich set of extended features.</li></ul><h3 id="Official-Website"><a href="#Official-Website" class="headerlink" title="Official Website"></a>Official Website</h3><p><a href="https://ohmyz.sh/">Oh My Zsh official website</a></p><p>If you are interested in more, you can go to the official website for details.</p><h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><ul><li><p>Install <strong>zsh</strong> to replace bash, etc. The default shell for macOS systems is currently zsh, other Linux systems may need to install zsh first.</p><p>Ubuntu：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install zsh</span></span><br><span class="line">apt install zsh</span><br><span class="line"><span class="comment"># set zsh as the default shell (if you don&#x27;t set it, start zsh with the direct zsh command)</span></span><br><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure></div><p>Centos：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install zsh</span><br><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure></div><p>Same for the others.</p></li><li><p>Install <strong>git</strong>, same as above using apt or yum package manager.</p></li><li><p>Finally you need <strong>curl</strong> or <strong>wget</strong>, install the same as above.</p></li></ul><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><h3 id="curl-installation"><a href="#curl-installation" class="headerlink" title="curl installation"></a>curl installation</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure></div><h3 id="wget-installation"><a href="#wget-installation" class="headerlink" title="wget installation"></a>wget installation</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)</span>&quot;</span></span><br></pre></td></tr></table></figure></div><p>There is no difference between the two installs.</p><h2 id="Themes"><a href="#Themes" class="headerlink" title="Themes"></a>Themes</h2><p>I usually use the <strong>steeef</strong> theme that comes with it, which is pretty clean and easy to use.</p><p>If you want to change the theme, just edit the <code>~/.zshrc</code> file and replace ZSH_THEME with the theme you like after it.</p><p><a data-fancybox="gallery" data-src="omz-terminal/image-20221209104217575.webp" data-caption="Change Theme"><picture>               <source srcset="omz-terminal/image-20221209104217575.webp" type="image/webp">               <img src="omz-terminal/image-20221209104217575.png" alt="Change Theme"></picture></a></p><blockquote><p>The .zshrc file.</p><p>The <code>.zshrc</code> file does the same thing as the <code>.bashrc</code> file. The default shell for most unix systems used to be bash, and the .bashrc file is the configuration file for bash.</p><p>The relevant explanation in the online help file, as viewed with the man bash command, is as follows.<br>.bashrc - The individual per-interactive-shell startup file.</p><p>This file mainly stores personalized settings, such as command aliases, paths, etc.</p><p>Each time you modify .bashrc, use source ~/.bashrc (or . ~/.bashrc) to immediately load the modified settings and make them take effect. Typically .bashrc is called explicitly in the .bash_profile file.</p><p>When you log in to linux and start bash, it will first read the ~/.bash_profile file, so ~/.bashrc will be executed and your personalized settings will take effect.</p></blockquote><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p>The management of omz plugins is very simple, there are two plugins directories, where <strong>user</strong> is your username:</p><ul><li><p><strong>/Users/user/.oh-my-zsh/plugins</strong></p><p>The official plugins directory. This directory is already preloaded with many useful plugins, which only need to be activated manually.</p></li><li><p><strong>/Users/user/.oh-my-zsh/custom/plugins</strong></p><p>Third-party plugins directory, shortcut command: <code>$ZSH_CUSTOM/plugins</code>.</p></li></ul><p>To install the plugins, just download the plugins to the third-party plugins directory, and then add the name of the corresponding plugins to the <code>plugins</code> variable in the <code>~/.zshrc</code> configuration file.</p><h3 id="Download-Plugin"><a href="#Download-Plugin" class="headerlink" title="Download Plugin"></a>Download Plugin</h3><h4 id="zsh-syntax-highlighting"><a href="#zsh-syntax-highlighting" class="headerlink" title="zsh-syntax-highlighting"></a>zsh-syntax-highlighting</h4><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Command syntax highlighting</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="omz-terminal/image-20221207141425504.webp" data-caption="Command syntax highlighting"><picture>               <source srcset="omz-terminal/image-20221207141425504.webp" type="image/webp">               <img src="omz-terminal/image-20221207141425504.png" alt="Command syntax highlighting"></picture></a></p><h4 id="zsh-autosuggestions"><a href="#zsh-autosuggestions" class="headerlink" title="zsh-autosuggestions"></a>zsh-autosuggestions</h4><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Command auto-completion</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="omz-terminal/image-20221207141800253.webp" data-caption="Command auto-completion"><picture>               <source srcset="omz-terminal/image-20221207141800253.webp" type="image/webp">               <img src="omz-terminal/image-20221207141800253.png" alt="Command auto-completion"></picture></a></p><blockquote><p>If you feel that <em>Tab key</em> is not convenient for completing, you can also customize the shortcut keys for completing.<br>For example, to set comma completion, just add the following line to <code>~/.zshrc</code> file.</p><div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bindkey &#x27;,&#x27; autosuggest-accept</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Enable-Plugin"><a href="#Enable-Plugin" class="headerlink" title="Enable Plugin"></a>Enable Plugin</h3><p>In the <strong>.zshrc</strong> file set.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=(git zsh-syntax-highlighting zsh-autosuggestions)</span><br></pre></td></tr></table></figure></div><p>Enable other plugins in the same way.</p><h2 id="Configuring-to-take-effect"><a href="#Configuring-to-take-effect" class="headerlink" title="Configuring to take effect"></a>Configuring to take effect</h2><p>One way to do this is to exit the terminal and reopen it, another, more common way is to use the <code>source</code> command I described earlier.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure></div><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://ohmyz.sh/">Oh My Zsh</a></p><p><a href="https://segmentfault.com/a/1190000018093021">安装oh my zsh插件</a></p>]]></content>
    
    
    <summary type="html">macOS has now replaced the default shell with zsh, which is a perfect match for the Oh My Zsh project to achieve an unimaginable terminal experience. With its colorful themes, powerful plug-ins, and active community, the &quot;Black Windows&quot; is no longer the cold terminal interface it used to be, but a unique my zsh of your own!</summary>
    
    
    
    <category term="unix" scheme="https://vccv.cc/en/categories/unix/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/unix/technique/"/>
    
    
    <category term="terminal" scheme="https://vccv.cc/en/tags/terminal/"/>
    
    <category term="oh my zsh" scheme="https://vccv.cc/en/tags/oh-my-zsh/"/>
    
  </entry>
  
  <entry>
    <title>Lightweight docker installation for macOS environment</title>
    <link href="https://vccv.cc/en/article/docker-macos.html"/>
    <id>https://vccv.cc/en/article/docker-macos.html</id>
    <published>2022-11-05T04:49:31.000Z</published>
    <updated>2023-12-19T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>If you don’t like the “bloat” of the official docker client, like me, and just want a separate and pure docker service without a GUI, or just want to try new things and tinker with new methods, then you are welcome to read this article.</p><p>Since I am using macOS, there is only one exploration record under Mac. If there are any omissions and errors, please feel free to criticize and point them out in the comment section.</p><blockquote><p>Computer environment for this article.</p><p>System：macOS Ventura 13.0.1 (22A400)</p><p>CPU：Intel Core i5（not sure if <em>Apple M series</em> processors are common）</p></blockquote><h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><ul><li><p>Install <a href="https://brew.sh/">Homebrew</a>.</p><p>Homebrew is the most used package manager under macOS platform, and this is its <a href="https://docs.brew.sh/Installation">official installation tutorial</a>. But usually, we just need to enter the following command while making sure the network is open.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Install-packages"><a href="#Install-packages" class="headerlink" title="Install packages"></a>Install packages</h2><ul><li><p>Use Homebrew to install docker.</p><p>Installing the most basic docker service is also very simple and can be done with one command.</p><p>Remember not to use the <code>brew install docker --cask</code> command, this will install docker graphically on macOS!!!</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install docker</span><br></pre></td></tr></table></figure></div></li><li><p>Installing Colima with Homebrew.</p><p><a href="https://github.com/abiosoft/colima">Colima</a> takes its name from Container on Lima. <a href="https://github.com/lima-vm/lima">Lima</a> is a virtual machine tool that enables automatic file sharing, port forwarding, and containerd.</p><p>Colima actually starts a virtual machine named <strong>colima</strong> through Lima. It helps us to simplify the usage process, but of course it is less customizable. If you are interested, you can of course use Lima to do the process manually yourself, which is more customizable, but more complex.</p><p>The installation is also very simple and is done with one command.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install colima</span><br></pre></td></tr></table></figure></div><p>This should take much longer to download, which is normal. As you can see below, Colima has a lot of dependencies.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ brew deps colima</span><br><span class="line">bdw-gc</span><br><span class="line">ca-certificates</span><br><span class="line">capstone</span><br><span class="line">gettext</span><br><span class="line">glib</span><br><span class="line">gmp</span><br><span class="line">gnutls</span><br><span class="line">guile</span><br><span class="line">jpeg-turbo</span><br><span class="line">libevent</span><br><span class="line">libidn2</span><br><span class="line">libnghttp2</span><br><span class="line">libpng</span><br><span class="line">libslirp</span><br><span class="line">libssh</span><br><span class="line">libtasn1</span><br><span class="line">libtool</span><br><span class="line">libunistring</span><br><span class="line">libusb</span><br><span class="line">lima</span><br><span class="line">lz4</span><br><span class="line">lzo</span><br><span class="line">m4</span><br><span class="line">ncurses</span><br><span class="line">nettle</span><br><span class="line">openssl@1.1</span><br><span class="line">p11-kit</span><br><span class="line">pcre2</span><br><span class="line">pixman</span><br><span class="line">pkg-config</span><br><span class="line">qemu</span><br><span class="line">readline</span><br><span class="line">snappy</span><br><span class="line">unbound</span><br><span class="line">vde</span><br><span class="line">xz</span><br><span class="line">zstd</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Start-Colima"><a href="#Start-Colima" class="headerlink" title="Start Colima"></a>Start Colima</h2><p>The official installation documentation describes that creating a docker runtime environment requires only the simplest command.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colima start</span><br></pre></td></tr></table></figure></div><p>Perhaps this is also the reason why the author has optimized the process specifically for docker, which is why I recommend using colima, it’s simple enough.</p><p><a data-fancybox="gallery" data-src="docker-macos/image-20221205160750680.webp" data-caption="Colima Run"><picture>               <source srcset="docker-macos/image-20221205160750680.webp" type="image/webp">               <img src="docker-macos/image-20221205160750680.png" alt="Colima Run"></picture></a></p><h2 id="Boot-up"><a href="#Boot-up" class="headerlink" title="Boot-up"></a>Boot-up</h2><blockquote><p>2023.12.20 Update:</p><p>Based on feedback from comments, colima already supports boot-up.</p><p>The method is also simple, since we installed colima using brew, we can just take over directly using <code>brew service</code>.</p><p><a data-fancybox="gallery" data-src="docker-macos/image-20231220215607833.webp" data-caption="Boot-up"><picture>               <source srcset="docker-macos/image-20231220215607833.webp" type="image/webp">               <img src="docker-macos/image-20231220215607833.png" alt="Boot-up"></picture></a></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services start colima</span><br></pre></td></tr></table></figure></div><p>If you are using other ways to install, make good use of search engines. Or follow the tip from comments by adding the <code>-foreground</code> parameter to set it up (<em>untested</em>).</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colima start –foreground</span><br></pre></td></tr></table></figure></div></blockquote><p><del>Although Colima still doesn’t provide such a feature so far, it is <a href="https://github.com/abiosoft/colima/issues/96">in development</a>.</del></p><p><del>Alternatively, for simple single-container docker use, we can create our own shell scripts and set the startup entries to achieve the same effect.</del></p><ul><li><p><del>To create the shell script.</del></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> colima.sh</span><br><span class="line"><span class="built_in">chmod</span> +x colima.sh</span><br></pre></td></tr></table></figure></div></li><li><p><del>Modify the contents of the script.</del></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim colima.sh</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Just write the start command to colima.sh</span><br><span class="line">colima start</span><br></pre></td></tr></table></figure></div></li><li><p><del>Add to the login entry.</del></p><p><del><a data-fancybox="gallery" data-src="docker-macos/image-20221213120548391.webp" data-caption="Login Entry"><picture>               <source srcset="docker-macos/image-20221213120548391.webp" type="image/webp">               <img src="docker-macos/image-20221213120548391.png" alt="Login Entry"></picture></a></del></p></li><li><p><del>Set the default open method to your terminal program.</del></p><p><del><a data-fancybox="gallery" data-src="docker-macos/image-20221213121901639.webp" data-caption="Default iTerm2"><picture>               <source srcset="docker-macos/image-20221213121901639.webp" type="image/webp">               <img src="docker-macos/image-20221213121901639.png" alt="Default iTerm2"></picture></a></del></p></li></ul><h2 id="Enjoy"><a href="#Enjoy" class="headerlink" title="Enjoy"></a>Enjoy</h2><p>It’s that simple, and the docker service is up and running. Type <code>docker ps -a</code> and simply test to see if it runs successfully. If you still have errors, keep reading on.</p><p><a data-fancybox="gallery" data-src="docker-macos/image-20221205160832483.webp" data-caption="Docker Run"><picture>               <source srcset="docker-macos/image-20221205160832483.webp" type="image/webp">               <img src="docker-macos/image-20221205160832483.png" alt="Docker Run"></picture></a></p><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><p><a data-fancybox="gallery" data-src="docker-macos/image-20221205153421353.webp" data-caption="Docker No Service"><picture>               <source srcset="docker-macos/image-20221205153421353.webp" type="image/webp">               <img src="docker-macos/image-20221205153421353.png" alt="Docker No Service"></picture></a></p><p>The diagram indicates that the docker service is not running, which is a problem with the colima configuration. You can try to reinstall Colima or re-run <code>colima start</code> to check if it is resolved.</p><h2 id="Additional"><a href="#Additional" class="headerlink" title="Additional"></a>Additional</h2><ul><li><p>You can further install <strong>docker-compose</strong> to use it.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install docker-compose</span><br></pre></td></tr></table></figure></div></li><li><p>If you want to run multiple containers, you can make configuration changes to the containers created by Colima.</p><p>Colima’s default resource configuration is 2 CPU / 2 G memory, which may not be enough in some cases. For example, if you start three mysql instances with docker-compose, it will happen that at least one of them will not start properly.</p><p>In this case, you can change the default configuration with the <code>-c</code> and <code>-m</code> start parameters, or with <code>colima start --edit</code>.</p></li></ul><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/abiosoft/colima">Colima</a></p><p><a href="https://github.com/lima-vm/lima">Lima</a></p><p><a href="https://www.docker.com/">Docker</a></p>]]></content>
    
    
    <summary type="html">If you&#39;re like me and don&#39;t like the &quot;bloat&quot; of the official docker client, or simply want to try new things and tinker with new methods, then you&#39;re welcome to read this post. Since the blogger is using macOS, this is only a record of exploration under Mac. If there are any errors of omission, please feel free to criticize and point them out in the comment section.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="macos" scheme="https://vccv.cc/en/tags/macos/"/>
    
    <category term="docker" scheme="https://vccv.cc/en/tags/docker/"/>
    
    <category term="colima" scheme="https://vccv.cc/en/tags/colima/"/>
    
  </entry>
  
  <entry>
    <title>Conda installing R kernel Notebook</title>
    <link href="https://vccv.cc/en/article/conda-r-jupyter.html"/>
    <id>https://vccv.cc/en/article/conda-r-jupyter.html</id>
    <published>2022-10-10T09:27:01.000Z</published>
    <updated>2022-10-10T09:27:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Due to the author’s frequent use of conda to configure the R kernel jupyter notebook on Linux remote servers, some steps are forgotten over time (the main problem is that the same pit will be stepped on differently every time).</p><p>After summarizing the relevant tutorials and personal experience on the internet, a guide is provided for everyone and future me to refer to.</p><h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="Install-Conda"><a href="#Install-Conda" class="headerlink" title="Install Conda"></a>Install Conda</h3><blockquote><p>To start with an introduction to Conda, Anaconda and some of the connections between them.</p><p><a href="https://conda.io/">Conda</a> is a package manager that supports binary packages, so you don’t need to compile from source when installing, and you can also install native libraries. However, some of the Python libraries in pip are not found in conda.</p><ul><li><a href="https://anaconda.org/anaconda/">Anaconda</a> is a Python scientific computing distribution managed with Conda.</li><li><a href="https://conda-forge.org/">Conda Forge</a> is another Python distribution that is more package rich than Anaconda. But one pitfall here is that Conda Forge and Anaconda <strong>are not fully compatible</strong>, so if you have a project that uses packages from both Anaconda and Conda Forge, there is a chance that it will hang.</li></ul></blockquote><p>Usually the servers I use have Anaconda installed beforehand,</p><p>Here is the official Anaconda <strong><a href="https://docs.anaconda.com/anaconda/install/linux/">Installing Anaconda on Linux</a></strong> document with detailed step-by-step instructions and command explanations.</p><p><del>2022.10.17 Update Linux - Anaconda installation process under Centos7.</del></p><p><del>Due to the special domestic environment, it is still recommended to download Anaconda installation scripts directly from domestic sources such as <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&O=D">Tsinghua University Mirror Source</a>, usually choosing the <strong>x86_64 version</strong> of.</del></p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221017223737389.webp" data-caption="Mirror Source"><picture>               <source srcset="conda-r-jupyter/image-20221017223737389.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221017223737389.png" alt="Mirror Source"></picture></a></p><p>Chrome can be downloaded by right clicking and copying the file link address and then using wget in centos:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Download script</span></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2022.05-Linux-x86_64.sh</span><br><span class="line"><span class="comment"># If prompted without wget use yum install</span></span><br><span class="line">yum install wget</span><br><span class="line"><span class="comment"># Execute the installation script Change the script name yourself</span></span><br><span class="line">bash Anaconda3-2022.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure></div><p>Here are some options I encountered myself, for the record. Please follow the script prompts as you see fit and enter.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Follow the prompt and type ENTER (enter)</span></span><br><span class="line">Welcome to Anaconda3 2022.05</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">continue</span> the installation process, please review the license</span><br><span class="line">agreement.</span><br><span class="line">Please, press ENTER to <span class="built_in">continue</span></span><br><span class="line">&gt;&gt; ENTER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Follow the prompts and enter yes</span></span><br><span class="line">Do you accept the license terms?</span><br><span class="line">[no] &gt;&gt;&gt;</span><br><span class="line">Please answer <span class="string">&#x27;yes&#x27;</span> or <span class="string">&#x27;no&#x27;</span>:<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Follow the prompts and type ENTER (enter)</span></span><br><span class="line"><span class="string"># Anaconda3 will now be installed into this location:</span></span><br><span class="line"><span class="string">/root/anaconda3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - Press ENTER to confirm the location</span></span><br><span class="line"><span class="string">  - Press CTRL-C to abort the installation</span></span><br><span class="line"><span class="string">  - Or specify a different location below</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[/root/anaconda3] &gt;&gt;&gt; ENTER</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># conda initialization default no recommend entering yes</span></span><br><span class="line"><span class="string"># If you choose no, you need to configure the environment variables yourself (Baidu keyword anaconda environment variables)</span></span><br><span class="line"><span class="string">installation finished.</span></span><br><span class="line"><span class="string">Do you wish the installer to initialize Anaconda3 by running conda init?</span></span><br><span class="line"><span class="string">Do you want the installer to initialize Anaconda3 by running conda init?</span></span><br><span class="line"><span class="string">[no] &gt;&gt;&gt; yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Here are some tips, briefly translated</span></span><br><span class="line"><span class="string"># For conda to take effect you need to close and reopen the current shell (reconnect to ssh)</span></span><br><span class="line"><span class="string"># If you don&#x27;</span>t need to activate the conda base environment at startup enter conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br><span class="line">==&gt; For changes to take effect, close and re-open your current shell.</span><br><span class="line"></span><br><span class="line">If you<span class="string">&#x27;d prefer that conda&#x27;</span>s base environment not be activated on startup,</span><br><span class="line">   <span class="built_in">set</span> the auto_activate_base parameter to <span class="literal">false</span>:</span><br><span class="line"></span><br><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br></pre></td></tr></table></figure></div><p><del>Anaconda is now installed, and by the way it is recommended to add domestic sources:</del></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Only for Chinese</span></span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/</span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls <span class="built_in">yes</span></span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221017233347844.webp" data-caption="For Chinese"><picture>               <source srcset="conda-r-jupyter/image-20221017233347844.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221017233347844.png" alt="For Chinese"></picture></a></p><h3 id="Creating-Environment"><a href="#Creating-Environment" class="headerlink" title="Creating Environment"></a>Creating Environment</h3><p>I am creating a new conda environment directly to avoid dependency conflicts with the least effort.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View existing conda environments</span></span><br><span class="line">conda <span class="built_in">env</span> list</span><br><span class="line"><span class="comment"># Create a new environment by name</span></span><br><span class="line"><span class="comment"># your_new_name_to_conda Replace with the name of the environment you want</span></span><br><span class="line">conda create -n your_new_name_to_conda</span><br><span class="line"><span class="comment"># Activate the new environment</span></span><br><span class="line">conda activate your_new_name_to_conda</span><br><span class="line"><span class="comment"># Check the installed dependencies</span></span><br><span class="line"><span class="comment"># The new environment is, of course, free of anything</span></span><br><span class="line">conda list</span><br><span class="line"><span class="comment"># Quit the new environment</span></span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010174813001.webp" data-caption="CLI Conda"><picture>               <source srcset="conda-r-jupyter/image-20221010174813001.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221010174813001.png" alt="CLI Conda"></picture></a></p><h3 id="Install-R"><a href="#Install-R" class="headerlink" title="Install R"></a>Install R</h3><p>Note here that you <strong>cannot</strong> use <code>conda install r</code> directly to install R.</p><p>If you enter the above command directly, you will be installing version 3.6 (I think) of R. This version is too old and many R packages are not available. As of 2022.10.10, the latest version of R’s conda is 4.2.1.</p><p>The following will explain how to install the latest version of R (4.2.1).</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># conda install r-base via conda-forge</span></span><br><span class="line">conda install -c conda-forge r-base</span><br></pre></td></tr></table></figure></div><p>conda-forge is also described at the beginning of the article, I feel it can be understood as a distribution inside Linux, maybe?</p><p>Before confirming the installation (i.e. before entering y), you can make sure beforehand if the version of r-base is version 4 or higher (currently 4.2.1).</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010182224588.webp" data-caption="4.2.1 version"><picture>               <source srcset="conda-r-jupyter/image-20221010182224588.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221010182224588.png" alt="4.2.1 version"></picture></a></p><h3 id="Install-R-kernel-and-Jupyter"><a href="#Install-R-kernel-and-Jupyter" class="headerlink" title="Install R kernel and Jupyter"></a>Install R kernel and Jupyter</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Specify to install using the default source</span></span><br><span class="line"><span class="comment"># r-irkernel is the r-kernel for jupyter notebook</span></span><br><span class="line"><span class="comment"># jupyter includes jupyter notebook</span></span><br><span class="line">conda install -c defaults r-irkernel jupyter</span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>Do not use conda-forge to install r-irkernel and jupyter here.</p><p>As mentioned before, Conda Forge and Anaconda <em>are not fully compatible</em>. I personally tried to install it using the <code>conda install -c conda-forge r-irkernel jupyter</code> command and jupyter notebook did not start properly. In this case just uninstall and reinstall.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Uninstall</span></span><br><span class="line">conda uninstall r-irkernel jupyter</span><br><span class="line"><span class="comment"># Install</span></span><br><span class="line">conda install -c defaults r-irkernel jupyter</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Start-Notebook"><a href="#Start-Notebook" class="headerlink" title="Start Notebook"></a>Start Notebook</h3><p>If everything is fine in the previous section, you will be able to start Jupyter Notebook properly here and create R’s notebook.</p><p>If it doesn’t start properly, please continue to read <strong>[Exception Handling]</strong> below.</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010201826507.webp" data-caption="Normal Run"><picture>               <source srcset="conda-r-jupyter/image-20221010201826507.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221010201826507.png" alt="Normal Run"></picture></a></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start Jupyter Notebook</span></span><br><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure></div><h3 id="Exception-Handling"><a href="#Exception-Handling" class="headerlink" title="Exception Handling"></a>Exception Handling</h3><h4 id="Module-Missing"><a href="#Module-Missing" class="headerlink" title="Module Missing"></a>Module Missing</h4><p>If you are prompted with <em><strong>ModuleNotFoundError: No module named ‘zmq.backend.cffi._cffi’</strong></em> when starting a notebook, the following is a similar situation.</p><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221018152019887.webp" data-caption="Module Missing"><picture>               <source srcset="conda-r-jupyter/image-20221018152019887.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221018152019887.png" alt="Module Missing"></picture></a></p><p>The solution can be found in <a href="https://github.com/jupyter/notebook/issues/3435#issuecomment-398549304">an issue under the official repository</a> by uninstalling the module in question using pip and reinstalling it:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use pip instead of conda to manage pyzmq packages</span></span><br><span class="line">pip uninstall pyzmq</span><br><span class="line">pip install pyzmq</span><br></pre></td></tr></table></figure></div><p>Pro-tested to work.</p><blockquote><p>If you have similar <em>ModuleNotFoundError</em> problems, you can try the above method and use pip instead of conda to manage those python packages, uninstall and reinstall them first.</p><p>The main thing is to find that exact package name, you can try to search keywords in <a href="https://pypi.org/">pypi</a>.</p></blockquote><h4 id="Port-Possession"><a href="#Port-Possession" class="headerlink" title="Port Possession"></a>Port Possession</h4><p>Since it is a server shared by multiple people in the lab, the default port 8888 of the notebook is also occupied. Here is the solution.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ipython</span><br><span class="line"><span class="comment"># Access the python console</span></span><br><span class="line">Python 3.7.13 (default, Mar 29 2022, 02:18:16) </span><br><span class="line">Type <span class="string">&#x27;copyright&#x27;</span>, <span class="string">&#x27;credits&#x27;</span> or <span class="string">&#x27;license&#x27;</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython 7.31.1 -- An enhanced Interactive Python. <span class="built_in">type</span> <span class="string">&#x27;? for help.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [1]: from notebook.auth import passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [2]: passwd()</span></span><br><span class="line"><span class="string">Enter password: </span></span><br><span class="line"><span class="string">Verify password: </span></span><br><span class="line"><span class="string">Out [2]: &#x27;</span>argon2:$argon2id<span class="variable">$v</span>=19<span class="variable">$m</span>=10240,t=10,p=xxxxxxxxx<span class="string">&#x27; # Copy the content between &#x27;</span><span class="string">&#x27; needed later</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [2]: exit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">jupyter notebook --generate-config # This will prompt you where the generated file is</span></span><br><span class="line"><span class="string">vim ~/.jupyter/jupyter_notebook_config.py # Edit the file prompted in the previous step here</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add or modify the following</span></span><br><span class="line"><span class="string">c.NotebookApp.allow_remote_access = True</span></span><br><span class="line"><span class="string">c.NotebookApp.ip = &#x27;</span>*<span class="string">&#x27;</span></span><br><span class="line"><span class="string">c.NotebookApp.password = u&#x27;</span>argon2:$argon2id<span class="variable">$v</span>=19<span class="variable">$m</span>=10240,t=10,p=8<span class="variable">$Vc5lLVsXKZLGftp6xrHfEfOkQvIU5YiOhdw</span><span class="string">&#x27; # Paste the previously copied key</span></span><br><span class="line"><span class="string">c.NotebookApp.open_browser = False</span></span><br><span class="line"><span class="string">c.NotebookApp.port = 61111 # Set the port and be careful not to duplicate it with others</span></span><br><span class="line"><span class="string">c.NotebookApp.notebook_dir = &#x27;</span>/home/xxx/<span class="string">&#x27; # not necessary set jupyter default directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Once set, you should be able to access it normally</span></span><br><span class="line"><span class="string">jupyter notebook</span></span><br></pre></td></tr></table></figure></div><h3 id="Beautification-enhancements"><a href="#Beautification-enhancements" class="headerlink" title="Beautification enhancements"></a>Beautification enhancements</h3><p>This part is not essential and is for record only.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure themes</span></span><br><span class="line">pip install jupyterthemes</span><br><span class="line"><span class="comment"># A set of theme settings that I personally like and have gotten used to</span></span><br><span class="line">jt -t monokai -f fira -fs 13 -cellw 90% -ofs 11 -dfs 11 -T -N</span><br><span class="line"><span class="comment"># Restore the default theme</span></span><br><span class="line">jt -r</span><br><span class="line"><span class="comment"># Configure plugins</span></span><br><span class="line">pip install jupyter_contrib_nbextensions</span><br><span class="line">jupyter contrib nbextension install --user</span><br><span class="line">pip install jupyter_nbextensions_configurator</span><br><span class="line"><span class="comment"># Suggested configuration items</span></span><br><span class="line"><span class="comment"># Hinterland code completion</span></span><br><span class="line"><span class="comment"># Collapsible headings Collapse headings</span></span><br><span class="line"><span class="comment"># Notify notification mechanism to run time-consuming tasks and notify when they are completed</span></span><br><span class="line"><span class="comment"># Codefolding collapsing code</span></span><br><span class="line"><span class="comment"># zenmode Hide the active status bar for easy attention to the code</span></span><br><span class="line"><span class="comment"># ExecuteTime shows the running time</span></span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="conda-r-jupyter/image-20221010205123146.webp" data-caption="Plugin"><picture>               <source srcset="conda-r-jupyter/image-20221010205123146.webp" type="image/webp">               <img src="conda-r-jupyter/image-20221010205123146.png" alt="Plugin"></picture></a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p>All the users who enthusiastically shared their tutorial experience.</p>]]></content>
    
    
    <summary type="html">Due to the author&#39;s frequent use of conda to configure the R kernel jupyter notebook on Linux remote servers, some steps are forgotten over time (the main problem is that the same pit will be stepped on differently every time). After summarizing the relevant tutorials and personal experience on the internet, a guide is provided for everyone and future me to refer to.</summary>
    
    
    
    <category term="linux" scheme="https://vccv.cc/en/categories/linux/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/linux/technique/"/>
    
    
    <category term="r" scheme="https://vccv.cc/en/tags/r/"/>
    
    <category term="jupyter" scheme="https://vccv.cc/en/tags/jupyter/"/>
    
    <category term="conda" scheme="https://vccv.cc/en/tags/conda/"/>
    
    <category term="droplet" scheme="https://vccv.cc/en/tags/droplet/"/>
    
  </entry>
  
  <entry>
    <title>Multiple Solutions for Toxic Software EasyConnect</title>
    <link href="https://vccv.cc/en/article/docker-easyconnect.html"/>
    <id>https://vccv.cc/en/article/docker-easyconnect.html</id>
    <published>2022-07-08T07:29:12.000Z</published>
    <updated>2022-12-28T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>I’m at home on vacation and I need to use <strong>EasyConnect</strong> to connect to the school’s intranet. I occasionally need to connect to the school’s server or access intranet pages, so I plan to download it.</p><p>But! EasyConnect is a rogue software, which is often referred to as a cancerous software. I then started looking for ways to deal with it.</p><blockquote><p>Under macOS, EasyConnect primarily behaves as follows.</p><ol><li>background resident processes EasyMonitor and ECAgentProxy, both running with root privileges.</li><li>automatically installs root certificates, including the system root certificate and FireFox root certificate, and reinstalls them after deletion.</li></ol><p>ps: Resident processes with <em>root</em> privileges means that these processes can read and write anything; installing root certificates means that they can directly perform man-in-the-middle attacks and tamper with data at will.</p></blockquote><h2 id="Method-1"><a href="#Method-1" class="headerlink" title="Method 1"></a>Method 1</h2><p>This method is suitable for computers with EasyConnect already installed, with minimal tossing.</p><ol><li><p>use <code>sudo su</code> to obtain administrator privileges.</p></li><li><p>Delete (rm)</p><p>/Library/LaunchDaemons/com.sangfor.EasyMonitor.plist.</p></li><li><p>delete /Library/LaunchAgents/com.sangfor.ECAgentProxy.plist.</p></li><li><p>reboot the Mac.</p></li><li><p>Open the keychain and delete the certificate under System Keychain - System - Certificates (keyword sangfor).</p></li></ol><blockquote><p>Be sure to <em>restart the Mac before deleting the certificate</em>, as the EasyMonitor process in the background will automatically import the certificate after it has been deleted.</p></blockquote><p>This eliminates the problem with EasyConnect. However, so far it causes EasyConnect not to connect, so we need to start EasyConnect in a secure way. Two scripts can be written to achieve start and exit.</p><p><strong>startEasyConnect.sh</strong></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line">/Applications/EasyConnect.app/Contents/Resources/bin/EasyMonitor &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">/Applications/EasyConnect.app/Contents/MacOS/EasyConnect &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></div><p><strong>killEasyMonitor.sh</strong></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line">pkill EasyMonitor</span><br><span class="line">pkill ECAgent</span><br><span class="line">pkill ECAgentProxy</span><br></pre></td></tr></table></figure></div><p>Place the above two scripts under the <code>PATH</code> path and grant executable permissions to.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x startEasyConnect.sh</span><br><span class="line"><span class="built_in">chmod</span> +x killEasyMonitor.sh</span><br></pre></td></tr></table></figure></div><p>When you need to use EasyConnect, execute the <code>startEasyConnect</code> command as <strong>regular user</strong> (the EasyMonitor process will not have permission to import the root certificate). After exiting EasyConnect, run <code>killEasyMonitor</code> to kill the EasyMonitor process in the background.</p><h2 id="Method-2"><a href="#Method-2" class="headerlink" title="Method 2"></a>Method 2</h2><p>Suitable for those who have not yet installed EasyConnect and have some knowledge of Docker and are not afraid of trouble. (being used)</p><h3 id="Installing-Docker"><a href="#Installing-Docker" class="headerlink" title="Installing Docker"></a>Installing Docker</h3><p><a href="https://docs.docker.com/desktop/windows/install/">Windows</a></p><p><a href="https://docs.docker.com/desktop/mac/install/">macOS</a></p><h3 id="Installing-Clash"><a href="#Installing-Clash" class="headerlink" title="Installing Clash"></a>Installing Clash</h3><p><a href="https://github.com/Fndroid/clash_for_windows_pkg/releases">Windows</a></p><p><a href="https://github.com/yichengchen/clashX/releases">ClashX</a> or <a href="https://install.appcenter.ms/users/clashx/apps/clashx-pro/distribution_groups/public">ClashX Pro</a> versions can also be installed on macOS</p><h3 id="Install-VNC-Viewer-optional"><a href="#Install-VNC-Viewer-optional" class="headerlink" title="Install VNC Viewer (optional)"></a>Install VNC Viewer (optional)</h3><p>If you are using EasyConnect <strong>which requires</strong> a graphical interface to log in, you need to install VNC Viewer, otherwise you can skip this step.</p><p>If you don’t know, you can skip this step and return to it later when you are prompted to run EasyConnect with Docker and cannot finish in the command line interface.</p><p>The installation of VNC Viewer is very simple, go to the <a href="https://www.realvnc.com/en/connect/download/viewer/">Download</a> page on the official website, select the appropriate version to download, and then go all the way to the next step to complete.</p><h3 id="Installing-a-text-editor"><a href="#Installing-a-text-editor" class="headerlink" title="Installing a text editor"></a>Installing a text editor</h3><p>Because it involves editing and modifying <strong>yaml</strong> files, you may need to install a <a href="https://code.visualstudio.com/">VSCode</a>, which does not use Notepad because it does not have highlighting, does not spell words, and does not automatically format, which may cause you to have some indentation, spelling, and punctuation errors that are more It is difficult to find.</p><p>VSCode is free, but here is another recommended software: <strong>Sublime Text</strong> (paid).</p><h3 id="Running-EasyConnect-with-Docker"><a href="#Running-EasyConnect-with-Docker" class="headerlink" title="Running EasyConnect with Docker"></a>Running EasyConnect with Docker</h3><p>First make sure that your Docker is running (try run <code>docker ps -a</code>). Open a terminal and enter different commands depending on whether you need a graphical interface or not.</p><blockquote><p>2022.12.29 Updated</p><p>I am an Intel model of MacBook, according to the reminder of the old brother in the comments section, the following tutorial <strong>does not apply</strong> to Apple’s own M series chips, i.e. <strong>arm architecture</strong> machines.</p><p>Since I don’t have an M-chip machine, please try compiling <strong>non-amd64</strong> branch files on your own if needed, see <a href="https://github.com/Hagb/docker-easyconnect/issues/167">issue167</a> for details. If you encounter new problems during the compilation process, you can read more issues raised by others.</p></blockquote><p><strong>Pure command line version:</strong></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.easyconn</span><br><span class="line">docker run --device /dev/net/tun --cap-add NET_ADMIN -v <span class="variable">$HOME</span>/.easyconn:/root/.easyconn -it -p 127.0.0.1:1080:1080 -p 127.0.0.1:8888:8888 -e IPTABLES_LEGACY=1 -e EC_VER=7.6.3 -e CLI_OPTS=<span class="string">&quot;-d vpn.xxx.edu.cn -u USERNAME -p PASSWORD&quot;</span> hagb/docker-easyconnect:cli</span><br></pre></td></tr></table></figure></div><p>The commands are explained below.</p><ul><li>In the first line, we create a configuration file in the <code>$HOME</code> directory of the current user to save login information.</li><li>On the second line, we start an EasyConnect command-line version of the Docker container.<ul><li><code>--device /dev/net/tun --cap-add NET_ADMIN</code> creates the virtual network device.</li><li><code>-it</code> returns an interactive terminal to display information.</li><li><code>-v</code> specifies the mount volume, where we map the configuration file in the <code>$HOME$</code> directory of the current user to the container, enabling the persistence of login information.</li><li><code>-p</code> specifies the port mapping of the container, you can change the port number according to the actual situation. where 1080 is the Socks5 proxy port and 8888 is the HTTP proxy port.</li><li><code>-e EC_VER </code> Set the value of the environment variable <code>EC_VER</code> in the container, specifying the version of Sangfor, preferably the same as the server side.</li><li><code>-e CLI_OPTS</code> sets the value of the environment variable <code>CLI_OPTS</code> in the container, specifying the parameters when running Sangfor. Here <code>-d</code> specifies the VPN address, <code>-u</code> specifies the user name, and <code>-p</code> specifies the user’s password. Please <strong>modify these information yourself correctly</strong>!</li><li><code>-e IPTABLES_LEGACY=1</code> uses the old iptables command, mainly to maintain compatibility with WSL. On some distributions of WSL, the absence of this environment variable will prevent the VPN from functioning properly. (Optional)</li></ul></li></ul><p>Please refer to: <a href="https://github.com/Hagb/docker-easyconnect/blob/master/doc/usage.md">docker-easyconnect/usage.md</a> for specific parameter settings</p><p><strong>GUI version:</strong></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --device /dev/net/tun --cap-add NET_ADMIN -ti -e PASSWORD=xxxx -v <span class="variable">$HOME</span>/.ecdata:/root -p 127.0.0.1:5901:5901 -p 127.0.0.1:1080:1080 hagb/docker-easyconnect:7.6.3</span><br></pre></td></tr></table></figure></div><p>Where <code>hagb/docker-easyconnect:7.6.3</code> means use <code>7.6.3</code> version of EasyConnect, please change the version number according to the actual situation.</p><blockquote><p>PS: When your port 5901 or 1080 is occupied by other services, you can change the port of EasyConnect that we run with docker above by using the following command (for example, the command line version is pure, the GUI version is the same);</p><p>127.0.0.1:<em>15901</em>:5901 and 127.0.0.1:<em>10180</em>:1080. You can change the 15901 and 10180 in 127.0.0.1:<em>15901</em>:1080 to your own unoccupied ports.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --device /dev/net/tun --cap-add NET_ADMIN -ti -e PASSWORD=xxxx -v <span class="variable">$HOME</span>/.ecdata:/root -p 127.0.0.1:15901:5901 -p 127.0.0.1:10180:1080 hagb/docker-easyconnect:7.6.3</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Graphical-VNC-Viewer-connection"><a href="#Graphical-VNC-Viewer-connection" class="headerlink" title="Graphical VNC Viewer connection"></a>Graphical VNC Viewer connection</h3><p>After typing, open <strong>VNC Viewer</strong>, click <strong>File -&gt; New connection</strong> in the upper left corner, or <strong>right click -&gt; New connection</strong> in the blank space, or use the shortcut key <strong>Ctrl + N</strong> to create a new link, and fill in the VNC Server in the pop-up dialog box <strong>127.0.0.1:5901</strong> , Name can be left out.</p><p><a data-fancybox="gallery" data-src="docker-easyconnect/v2-ef2d65c9a9b6b65228529a429261160c_r.webp" data-caption="VNC Viewer"><picture>               <source srcset="docker-easyconnect/v2-ef2d65c9a9b6b65228529a429261160c_r.webp" type="image/webp">               <img src="docker-easyconnect/v2-ef2d65c9a9b6b65228529a429261160c_r.jpg" alt="VNC Viewer"></picture></a></p><p>After clicking OK, double-click the link we just created, enter the password XXXX, and you’re ready to connect.</p><blockquote><p>It’s much easier to run EasyConnect in Docker without having to enter a captcha.</p><p>It is more convenient.</p><p>Also, the project itself remembers the server address you entered, so you only need to click the login button when you use it in the future.</p></blockquote><p>At this point, you’ll have a socks5 proxy running on <strong>1080 port</strong> on your computer, and the next step is to configure Clash to forward when we need it.</p><h3 id="Configuring-Clash"><a href="#Configuring-Clash" class="headerlink" title="Configuring Clash"></a>Configuring Clash</h3><p>This section describes how you can use EasyConnect’s VPN service when you need it.</p><p>First run Clash, click Profiles in the left navigation bar and you will see a default <strong>config.yaml</strong>, or you can edit other profiles if you have them. Click on the button shaped like <code>&lt; &gt;</code> to the right of the profile you want to edit, meaning edit the profile in a text editor, and add at the end.</p><div class="highlight-wrap" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add a sock5 proxy with the name vpn</span></span><br><span class="line"><span class="attr">proxies:</span></span><br><span class="line"><span class="bullet">-</span> &#123;<span class="attr">&quot;name&quot;:</span> <span class="string">&quot;vpn&quot;</span>, <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;socks5&quot;</span>, <span class="attr">&quot;server&quot;:</span> <span class="string">&quot;127.0.0.1&quot;</span>, <span class="attr">&quot;port&quot;:</span> <span class="string">&quot;1080&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add rules for ip-cidr</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">IP-CIDR,222.192.6.0/24,vpn</span></span><br></pre></td></tr></table></figure></div><blockquote><p>Caution.</p><p>The <code>222.192.6.0/24</code> filled in here means that only the traffic accessing <code>222.192.6.xxx</code> will go through the proxy configured above, which needs to be changed according to your actual situation.</p><p>Of course, if you are editing your own airport configuration file, you need to add the above content under the original <code>proxies</code> and <code>rules</code>, and * cannot add these two attributes*.</p></blockquote><p>At this point, in Clash’s General page, turn <strong>System Proxy</strong> on and you will have access to the school’s intranet, but not to remote desktops and other features, which will require further configuration if you need to use them.</p><h3 id="Configure-ClashX"><a href="#Configure-ClashX" class="headerlink" title="Configure ClashX"></a>Configure ClashX</h3><p>Similar to the above.</p><div class="highlight-wrap" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxies:</span></span><br><span class="line"><span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">&#x27;vpn&#x27;</span>, <span class="attr">type:</span> <span class="string">socks5</span>, <span class="attr">server:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, <span class="attr">port:</span> <span class="number">1080</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&#x27;IP-CIDR,172.20.2.0/24,vpn&#x27;</span></span><br></pre></td></tr></table></figure></div><h3 id="Configuring-TUN-mode"><a href="#Configuring-TUN-mode" class="headerlink" title="Configuring TUN mode"></a>Configuring TUN mode</h3><p>For TUN mode, the official documentation describes it as follows.</p><blockquote><p>For software that does not follow the system proxy, TUN mode can take over its traffic and leave it to CFW. In Windows, TUN mode performs better than TAP mode.</p></blockquote><p>Applications such as browsers use the system agent, and some non-system agent applications can be set up to be handled by CFW. In short, after configuring TUN mode, our requirements are ready to be implemented. To start TUN mode, you need to do the following (<strong>MacOS users skip the first two steps</strong>):</p><ol><li>open the General page of Clash, find Home Directory, click <code>Open Folder</code> on the right to open the <code>Home Directory</code> folder.</li><li>Go to the website <a href="https://www.wintun.net/">Wintun</a> and click <code>Download Wintun xxx</code> in the interface to download the zip package. Copy <code>wintun.dll</code> from the directory corresponding to <code>wintun-x.xx/wintun/bin</code> to the <code>Home Directory</code> directory according to the system version. Use the <code>amd64</code> version for <code>64</code> based processors for <code>64</code> bit operating systems, and choose the <code>arm64</code> version for M1 Macs.</li><li>Click Manage on the right side of Service Mode in General, and install Service Mode in the window that opens, the application will restart automatically when the installation is finished, and the Earth icon on the right side of Service Mode turns green.</li><li>Click <strong>settings -&gt; Profile Mixin -&gt; YAML</strong>, click <strong>Edit</strong> on the right side of <strong>YAML</strong>, enter the following content, and click the button at the bottom right to save.</li></ol><div class="highlight-wrap" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mixin:</span> </span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="attr">&#x27;mtalk.google.com&#x27;:</span> <span class="number">108.177</span><span class="number">.125</span><span class="number">.188</span></span><br><span class="line">    <span class="attr">&#x27;services.googleapis.cn&#x27;:</span> <span class="number">74.125</span><span class="number">.203</span><span class="number">.94</span></span><br><span class="line">    <span class="attr">&#x27;raw.githubusercontent.com&#x27;:</span> <span class="number">151.101</span><span class="number">.76</span><span class="number">.133</span></span><br><span class="line">  <span class="attr">dns:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">default-nameserver:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">1.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">ipv6:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">enhanced-mode:</span> <span class="string">redir-host</span> <span class="comment">#fake-ip</span></span><br><span class="line">    <span class="attr">nameserver:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://dns.rubyfish.cn/dns-query</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://223.5.5.5/dns-query</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://dns.pub/dns-query</span></span><br><span class="line">    <span class="attr">fallback:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://1.0.0.1/dns-query</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://public.dns.iij.jp/dns-query</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://dns.twnic.tw/dns-query</span></span><br><span class="line">    <span class="attr">fallback-filter:</span></span><br><span class="line">      <span class="attr">geoip:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">ipcidr:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">240.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/32</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">/32</span></span><br><span class="line">    <span class="attr">domain:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.google.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.facebook.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.twitter.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.youtube.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.xn--ngstr-lra8j.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.google.cn</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.googleapis.cn</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">+.gvt1.com</span></span><br><span class="line">  <span class="attr">tun:</span> </span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">stack:</span> <span class="string">gvisor</span></span><br><span class="line">    <span class="attr">dns-hijack:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">198.18</span><span class="number">.0</span><span class="number">.2</span><span class="string">:53</span></span><br><span class="line">    <span class="attr">macOS-auto-route:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">macOS-auto-detect-interface:</span> <span class="literal">true</span> <span class="comment"># 自动检测出口网卡</span></span><br></pre></td></tr></table></figure></div><ol start="5"><li>Return to the general page to turn on Mixin, and then click connections to find that all connections are in TUN mode, at which point we have completed all configurations.</li></ol><p>For more detailed configuration, please refer to the <a href="https://docs.cfw.lbyczf.com/contents/tun.html">TUN mode</a> page of the official documentation.</p><h3 id="Filtering-applications"><a href="#Filtering-applications" class="headerlink" title="Filtering applications"></a>Filtering applications</h3><p>Related rules can be found in.</p><div class="highlight-wrap" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxies:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;officeVpnProxy&quot;</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;socks5&quot;</span></span><br><span class="line"><span class="attr">server:</span> <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line"><span class="attr">port:</span> <span class="string">&quot;10180&quot;</span></span><br><span class="line"><span class="attr">proxy-groups:</span></span><br><span class="line"><span class="comment"># programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;programs&quot;</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">select</span></span><br><span class="line"><span class="attr">proxies:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;DIRECT&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;PROXY&quot;</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="comment"># programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,vpnkit.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,vpnkit-bridge.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.dev-envs.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.backend.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.extensions.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.proxy.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.service,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,com.docker.wsl-distro-proxy.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,Docker</span> <span class="string">Desktop.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,docker.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,wsl.exe,programs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">PROCESS-NAME,wslhost.exe,programs</span></span><br></pre></td></tr></table></figure></div><blockquote><p>Note: The ports should correspond to the ports you configured in the previous docker configuration.</p></blockquote><h3 id="Rebooting"><a href="#Rebooting" class="headerlink" title="Rebooting"></a>Rebooting</h3><p>When you close the terminal window or reboot your computer and want to start Docker again, we just need to start the appropriate container and click Login in VNC Viewer (if you don’t use the graphical interface, you only need to start the container).</p><p>To start the container, you don’t need to type the command above to create the container, because the command means create the container, download the image, start and enter the container, we have already created the container, we just need to start it later. So, we first need to know what containers we have, and then start the corresponding containers on it.</p><p>First, look at the containers we already have</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure></div><p>You should get similar output, and if this is your first time using Docker, you should only have one container</p><p><a data-fancybox="gallery" data-src="docker-easyconnect/v2-31c51548fc67de83039eeedf10bf28c5_r.webp" data-caption="docker container"><picture>               <source srcset="docker-easyconnect/v2-31c51548fc67de83039eeedf10bf28c5_r.webp" type="image/webp">               <img src="docker-easyconnect/v2-31c51548fc67de83039eeedf10bf28c5_r.jpg" alt="docker container"></picture></a></p><p>When you want to turn it on again after the computer has restarted, just type.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start 81f</span><br></pre></td></tr></table></figure></div><p>The <code>81f</code> is the <code>ID</code> of the container I want to start, which is the value of the first column, it’s a long value, usually you only need to enter the first few digits, or you can change it with the <code>docker rename</code> command.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rename OLDNAME NEWNAME</span><br></pre></td></tr></table></figure></div><h2 id="Uninstalling-EasyConnect"><a href="#Uninstalling-EasyConnect" class="headerlink" title="Uninstalling EasyConnect"></a>Uninstalling EasyConnect</h2><p>As I said before, one of the rogue things about EasyConnect is that it is very difficult to uninstall, but I have come up with a method based on information from the Internet and my own experience.</p><p>First, find the EasyConnect installation directory and double-click it to run the uninstaller, then you will see that the directory is not completely deleted, there are still a lot of files, so let’s perform the following steps.</p><ol><li>select all Shift + Delete, if you encounter the one that does not give the deletion will be skipped, then there will still be many files left.</li><li>Disconnect and restart the computer, come to the installation directory, change the names of all the folders, change them to whatever you want, restart again</li><li>Select all the folders that have just been renamed Shift + Delete, if this time still can not delete the folder cut to another place and then delete</li><li>restart the computer, administrator privileges to open the command line (if you do not have the usual command line tools can Win + X select <strong>Windows PowerShell (Administrator)</strong>)</li><li>enter the command <code>netsh winsock reset</code> and enter</li></ol><p>The last two steps to reset winsock are very important, if not performed will likely be a variety of clients can not connect to the network situation.</p><p>If you still have the <strong>sanfor</strong> service after uninstallation, you can refer to <a href="https://www.zhihu.com/question/333699380/answer/2358761655">this article</a> to try to solve it.</p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/Hagb/docker-easyconnect">docker-easyconnect</a></p><p><a href="https://soulike.tech/article/64">Soulike</a></p><p><a href="https://zhuanlan.zhihu.com/p/389894063">Jortana</a></p><p><a href="https://naiv.fun/Ops/sangfor-in-docker.html">Nativus</a></p>]]></content>
    
    
    <summary type="html">When at home on vacation and needed to use EasyConnect to connect to the school&#39;s intranet, so I planned to download it and use it. But! EasyConnect is a rogue software, which is often referred to as poisonous software, so I started to look for ways to deal with it.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="docker" scheme="https://vccv.cc/en/tags/docker/"/>
    
    <category term="easyconnect" scheme="https://vccv.cc/en/tags/easyconnect/"/>
    
    <category term="clash" scheme="https://vccv.cc/en/tags/clash/"/>
    
  </entry>
  
  <entry>
    <title>Yabai: Tiling Style Desktop for Mac</title>
    <link href="https://vccv.cc/en/article/mac-tiling-yabai.html"/>
    <id>https://vccv.cc/en/article/mac-tiling-yabai.html</id>
    <published>2022-05-19T04:03:26.000Z</published>
    <updated>2022-05-19T04:03:26.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Long-time Linux users should be familiar with <a href="https://i3wm.org/">i3wm</a>, which is significantly different from the floating (float) desktops of Mac and Windows operating systems, which are called tiling desktops. When I learned about the open source project <a href="https://github.com/koekeishiya/yabai">yabai</a> for Mac, I couldn’t wait to start using it.</p><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><blockquote><p>Equipment status:</p><p><a href="https://zhuanlan.zhihu.com/p/90508170">Homebrew is installed</a> (You can refer to the official website)</p><p><a href="https://github.com/koekeishiya/yabai/wiki/Disabling-System-Integrity-Protection">Closed SIP</a></p><p>Monterey12.4</p></blockquote><p>It is best to refer to <a href="https://github.com/koekeishiya/yabai/wiki/Installing-yabai-(latest-release)">Official Documents</a> for installation, after all, the official one is the latest and most accurate.</p><p>The following is a record of your own process, which is available for your reference.</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install yabai</span></span><br><span class="line">brew install koekeishiya/formulae/yabai</span><br><span class="line">sudo yabai --install-sa</span><br><span class="line"><span class="comment"># Start yabai</span></span><br><span class="line">brew services start yabai</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install skhd</span></span><br><span class="line">brew install koekeishiya/formulae/skhd</span><br><span class="line"><span class="comment"># Start skhd</span></span><br><span class="line">brew services start skhd</span><br><span class="line"></span><br><span class="line"><span class="comment">########### macOS Big Sur or Monterey More Steps ###########</span></span><br><span class="line">sudo yabai --load-sa</span><br><span class="line">sudo visudo -f /private/etc/sudoers.d/yabai</span><br><span class="line"><span class="comment"># Change &lt;user&gt; to you own username</span></span><br><span class="line"><span class="comment"># yuesir ALL = (root) NOPASSWD: /usr/local/bin/yabai --load-sa</span></span><br><span class="line">&lt;user&gt; ALL = (root) NOPASSWD: /usr/local/bin/yabai --load-sa</span><br><span class="line"><span class="comment"># Add to .yabairc</span></span><br><span class="line">sudo yabai --load-sa</span><br><span class="line">yabai -m signal --add event=dock_did_restart action=<span class="string">&quot;sudo yabai --load-sa&quot;</span></span><br></pre></td></tr></table></figure></div><p>yabai can be used with <a href="https://github.com/koekeishiya/skhd">skhd</a>, the option <strong>Secure Keyboard Entry</strong> must be disabled (off by default).</p><p>After the system starts yabai and skhd for the first time, macOS will prompt for permission to access the secondary functions. After adding permissions to <strong>System Preferences-&gt;Installability and Privacy-&gt;Privacy</strong>, execute the following command.</p><p><a data-fancybox="gallery" data-src="mac-tiling-yabai/1161505-20220306151719494-1937640907.webp" data-caption=" Authorization assistance functions "><picture>               <source srcset="mac-tiling-yabai/1161505-20220306151719494-1937640907.webp" type="image/webp">               <img src="mac-tiling-yabai/1161505-20220306151719494-1937640907.png" alt=" Authorization assistance functions "></picture></a></p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Restart</span></span><br><span class="line">brew services restart yabai</span><br><span class="line">brew services restart skhd</span><br></pre></td></tr></table></figure></div><p>This is still not working properly, and you still need to configure the relevant files yourself.</p><h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create yabai config</span></span><br><span class="line"><span class="built_in">touch</span> ~/.yabairc</span><br><span class="line"><span class="built_in">chmod</span> +x ~/.yabairc</span><br><span class="line"><span class="comment"># Create skhd config</span></span><br><span class="line"><span class="built_in">touch</span> ~/.skhdrc</span><br><span class="line"><span class="built_in">chmod</span> +x ~/.skhdrc</span><br></pre></td></tr></table></figure></div><h3 id="yabairc-Example："><a href="#yabairc-Example：" class="headerlink" title=".yabairc Example："></a>.yabairc <a href="https://www.cnblogs.com/tdg-yyx/p/15972309.html">Example</a>：</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里参考了 yabai 的 wiki 。具体步骤下面讲</span></span><br><span class="line">sudo yabai --load-sa</span><br><span class="line">yabai -m signal --add event=dock_did_restart action=<span class="string">&quot;sudo yabai --load-sa&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 窗口布局 bsp: 平铺 float: 浮动</span></span><br><span class="line">yabai -m config layout                       bsp</span><br><span class="line"><span class="comment"># 默认拆分规则 first_child second_child</span></span><br><span class="line">yabai -m config window_placement             second_child</span><br><span class="line"><span class="comment"># 窗口间距设置</span></span><br><span class="line">yabai -m config top_padding                  5</span><br><span class="line">yabai -m config bottom_padding               5</span><br><span class="line">yabai -m config left_padding                 5</span><br><span class="line">yabai -m config right_padding                5</span><br><span class="line">yabai -m config window_gap                   4</span><br><span class="line"><span class="comment"># 自动平衡所有窗口始终占据相同的空间</span></span><br><span class="line">yabai -m config auto_balance                 off</span><br><span class="line"><span class="comment"># 如果禁用自动平衡，此项属性定义的是新窗口占用的空间量。0.5意为旧窗口占用50%</span></span><br><span class="line">yabai -m config split_ratio                 0.50</span><br><span class="line"><span class="comment"># 鼠标修饰键 意思就是按着这个键就可以使用鼠标单独修改窗口大小了</span></span><br><span class="line">yabai -m config mouse_modifier               fn</span><br><span class="line"><span class="comment"># fn + 左键 移动</span></span><br><span class="line">yabai -m config mouse_action1                move</span><br><span class="line"><span class="comment"># fn + 右键 </span></span><br><span class="line">yabai -m config mouse_action2                resize</span><br><span class="line"><span class="comment"># 焦点跟随鼠标 默认off: 关闭  autoraise:自动提升 autofocus: 自动对焦</span></span><br><span class="line">yabai -m config focus_follows_mouse          autofocus</span><br><span class="line"><span class="comment"># 设置鼠标是否跟随当前活动窗口 默认 off: 关闭 on: 开启</span></span><br><span class="line">yabai -m config mouse_follows_focus          on</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浮动窗口问题在顶部</span></span><br><span class="line">yabai -m config window_topmost               on</span><br><span class="line"><span class="comment"># 修改窗口阴影 on: 打开 off: 关闭 float: 只显示浮动窗口的阴影</span></span><br><span class="line">yabai -m config window_shadow                <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 窗口透明度设置</span></span><br><span class="line">yabai -m config window_opacity               on</span><br><span class="line"><span class="comment"># 配置活动窗口不透明度</span></span><br><span class="line">yabai -m config active_window_opacity        1.0             </span><br><span class="line">yabai -m config normal_window_opacity        0.9</span><br><span class="line">yabai -m config window_opacity_duration      0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在主显示器上的每个空间顶部添加 20 填充 底部添加 0 填充</span></span><br><span class="line"><span class="comment"># yabai -m config external_bar main:20:0</span></span><br><span class="line"><span class="comment"># 在所有显示器上的每个空间顶部添加 0 填充 底部添加 0 填充</span></span><br><span class="line">yabai -m config external_bar all:0:5</span><br><span class="line"></span><br><span class="line"><span class="comment"># ================================ 规则 ================================</span></span><br><span class="line"><span class="comment"># 打开系统偏好设置，不使用平铺模式</span></span><br><span class="line">yabai -m rule --add app=<span class="string">&quot;^系统偏好设置$&quot;</span> manage=off</span><br><span class="line">yabai -m rule --add app=<span class="string">&quot;^提醒事项$&quot;</span> manage=off</span><br><span class="line">yabai -m rule --add app=<span class="string">&quot;^关于本机$&quot;</span> manage=off</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;yabai configuration loaded..&quot;</span></span><br></pre></td></tr></table></figure></div><h3 id="skhdrc-Example："><a href="#skhdrc-Example：" class="headerlink" title=".skhdrc Example："></a>.skhdrc Example：</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ================================ 窗口设置 ================================</span></span><br><span class="line"><span class="comment"># focus window : 激活窗口快捷键  h: 左  j: 下  k: 右 l: 上 </span></span><br><span class="line">alt - h : yabai -m window --focus west</span><br><span class="line">alt - j : yabai -m window --focus south</span><br><span class="line">alt - k : yabai -m window --focus north</span><br><span class="line">alt - l : yabai -m window --focus east </span><br><span class="line"><span class="comment"># 交换窗口位置</span></span><br><span class="line"><span class="built_in">shift</span> + alt - h : yabai -m window --swap west</span><br><span class="line"><span class="built_in">shift</span> + alt - j : yabai -m window --swap south</span><br><span class="line"><span class="built_in">shift</span> + alt - k : yabai -m window --swap north</span><br><span class="line"><span class="built_in">shift</span> + alt - l : yabai -m window --swap east</span><br><span class="line"><span class="comment"># 移动窗口位置</span></span><br><span class="line"><span class="built_in">shift</span> + cmd - h : yabai -m window --warp west</span><br><span class="line"><span class="built_in">shift</span> + cmd - j : yabai -m window --warp south</span><br><span class="line"><span class="comment"># 因与IDEA shift + cmd + K push code 冲突，故注释了此快捷键</span></span><br><span class="line"><span class="comment"># shift + cmd - k : yabai -m window --warp north</span></span><br><span class="line"><span class="built_in">shift</span> + cmd - l : yabai -m window --warp east</span><br><span class="line"><span class="comment"># 浮动窗口设置 参考了Magent默认设置。因为之前用习惯了。。。。</span></span><br><span class="line"><span class="comment"># 恢复原始窗口大小</span></span><br><span class="line">ctrl + alt - 0 : yabai -m space --balance</span><br><span class="line"><span class="comment"># 把浮动窗口左右平分整个屏幕  rows:cols:start-x:star-y:width:height  m行:n列:x:y:w:h</span></span><br><span class="line"><span class="comment"># 最大化</span></span><br><span class="line">ctrl + alt - <span class="built_in">return</span> : yabai -m window --grid 1:1:0:0:1:1</span><br><span class="line"><span class="comment"># 2分屏上</span></span><br><span class="line">ctrl + alt - up     : yabai -m window --grid 2:1:0:0:2:1</span><br><span class="line"><span class="comment"># 2分屏左</span></span><br><span class="line">ctrl + alt - left   : yabai -m window --grid 1:2:0:0:1:1</span><br><span class="line"><span class="comment"># 2分屏右</span></span><br><span class="line">ctrl + alt - right  : yabai -m window --grid 1:2:1:1:1:1</span><br><span class="line"><span class="comment"># 2分屏下</span></span><br><span class="line">ctrl + alt - down   : yabai -m window --grid 2:1:0:1:2:1</span><br><span class="line"><span class="comment"># 4分屏左上</span></span><br><span class="line">ctrl + alt - u : yabai -m window --grid 2:2:0:0:1:1</span><br><span class="line"><span class="comment"># 4分屏右上</span></span><br><span class="line">ctrl + alt - i : yabai -m window --grid 2:2:0:1:1:1</span><br><span class="line"><span class="comment"># 4分屏左下</span></span><br><span class="line">ctrl + alt - j : yabai -m window --grid 2:2:1:0:1:1</span><br><span class="line"><span class="comment"># 4分屏右下</span></span><br><span class="line">ctrl + alt - k : yabai -m window --grid 2:2:1:1:1:1</span><br><span class="line"><span class="comment"># 3分屏左1</span></span><br><span class="line">ctrl + alt - d : yabai -m window --grid 1:3:0:0:1:1</span><br><span class="line"><span class="comment"># 3分屏左2</span></span><br><span class="line">ctrl + alt - e : yabai -m window --grid 1:3:0:0:2:1</span><br><span class="line"><span class="comment"># 3分屏中1</span></span><br><span class="line">ctrl + alt - f : yabai -m window --grid 1:3:1:0:1:1</span><br><span class="line"><span class="comment"># 3分屏右2</span></span><br><span class="line">ctrl + alt - t : yabai -m window --grid 1:3:1:0:2:1</span><br><span class="line"><span class="comment"># 3分屏右1</span></span><br><span class="line">ctrl + alt - g : yabai -m window --grid 1:3:3:0:1:1</span><br><span class="line"><span class="comment"># 9分屏居中</span></span><br><span class="line">ctrl + alt - c : yabai -m window --grid 3:3:1:1:1:1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浮动/不浮动窗口 float / unfloat window and center on screen</span></span><br><span class="line">alt - t : yabai -m window --toggle <span class="built_in">float</span>;yabai -m window --grid 4:4:1:1:2:2</span><br><span class="line"></span><br><span class="line">alt - r         : yabai -m space --rotate 90</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整窗口大小</span></span><br><span class="line">ctrl + alt + cmd - left : yabai -m window --resize left:-50:0; yabai -m window --resize right:-50:0</span><br><span class="line">ctrl + alt + cmd - down : yabai -m window --resize bottom:0:50; yabai -m window --resize top:0:50</span><br><span class="line">ctrl + alt + cmd - up : yabai -m window --resize top:0:-50; yabai -m window --resize bottom:0:-50</span><br><span class="line">ctrl + alt + cmd - right : yabai -m window --resize right:50:0; yabai -m window --resize left:50:0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 Yabai</span></span><br><span class="line">cmd + alt - r : /usr/bin/env osascript &lt;&lt;&lt; <span class="string">&quot;display notification \&quot;正在重启 Yabai\&quot; with title \&quot;Yabai\&quot;&quot;</span>; launchctl kickstart -k <span class="string">&quot;gui/<span class="variable">$&#123;UID&#125;</span>/homebrew.mxcl.yabai&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ================================ 多桌面配置  ================================</span></span><br><span class="line"><span class="comment"># 创建一个新桌面，并把当前活动的窗口发送到新桌面，并且自动跳转到新桌面 需要jq支持 brew install jq</span></span><br><span class="line"><span class="built_in">shift</span> + cmd - n : yabai -m space --create &amp;&amp; index=<span class="string">&quot;<span class="subst">$(yabai -m query --spaces --display | jq &#x27;.| length&#x27;)</span>&quot;</span> &amp;&amp; yabai -m window --space <span class="string">&quot;<span class="variable">$&#123;index&#125;</span>&quot;</span> &amp;&amp; yabai -m space --focus <span class="string">&quot;<span class="variable">$&#123;index&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回最近的一个桌面</span></span><br><span class="line">alt - x : yabai -m space --focus recent</span><br><span class="line"><span class="comment"># 切换回第一个桌面</span></span><br><span class="line">alt - 1 : yabai -m space --focus 1</span><br><span class="line">alt - 2 : yabai -m space --focus 2</span><br><span class="line">alt - 3 : yabai -m space --focus 3</span><br><span class="line">alt - 4 : yabai -m space --focus 4</span><br><span class="line">alt - 5 : yabai -m space --focus 5</span><br><span class="line">alt - 6 : yabai -m space --focus 6</span><br><span class="line">alt - 7 : yabai -m space --focus 7</span><br><span class="line">alt - 8 : yabai -m space --focus 8</span><br><span class="line">alt - 9 : yabai -m space --focus 9</span><br><span class="line"><span class="comment"># 关闭当前桌面</span></span><br><span class="line">cmd + alt - w : yabai -m space --destroy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把窗口发送到桌面，并跟随过去 send window to desktop and follow focus</span></span><br><span class="line"><span class="built_in">shift</span> + cmd - z : yabai -m window --space next; yabai -m space --focus next</span><br><span class="line"><span class="built_in">shift</span> + cmd - 1 : yabai -m window --space  1; yabai -m space --focus 1</span><br><span class="line"><span class="built_in">shift</span> + cmd - 2 : yabai -m window --space  2; yabai -m space --focus 2</span><br><span class="line"><span class="built_in">shift</span> + cmd - 3 : yabai -m window --space  3; yabai -m space --focus 3</span><br><span class="line"><span class="built_in">shift</span> + cmd - 4 : yabai -m window --space  4; yabai -m space --focus 4</span><br><span class="line"><span class="built_in">shift</span> + cmd - 5 : yabai -m window --space  5; yabai -m space --focus 5</span><br><span class="line"><span class="built_in">shift</span> + cmd - 6 : yabai -m window --space  6; yabai -m space --focus 6</span><br><span class="line"><span class="built_in">shift</span> + cmd - 7 : yabai -m window --space  7; yabai -m space --focus 7</span><br><span class="line"><span class="built_in">shift</span> + cmd - 8 : yabai -m window --space  8; yabai -m space --focus 8</span><br><span class="line"><span class="built_in">shift</span> + cmd - 9 : yabai -m window --space  9; yabai -m space --focus 9</span><br><span class="line"></span><br><span class="line"><span class="comment"># ================================ APPS ================================</span></span><br><span class="line"><span class="comment"># iTerm2</span></span><br><span class="line">cmd - <span class="built_in">return</span> : open -a iTerm</span><br><span class="line"></span><br><span class="line"><span class="comment"># ================================ 多显示器配置 ================================</span></span><br><span class="line"><span class="comment"># focus monitora : </span></span><br><span class="line"><span class="comment"># ctrl + alt - z  : yabai -m display --focus prev</span></span><br><span class="line"><span class="comment"># ctrl + alt - 3  : yabai -m display --focus 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># send window to monitor and follow focus</span></span><br><span class="line"><span class="comment"># ctrl + cmd - c  : yabai -m window --display next; yabai -m display --focus next</span></span><br><span class="line"><span class="comment"># ctrl + cmd - 1  : yabai -m window --display 1; yabai -m display --focus 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># move floating window</span></span><br><span class="line"><span class="comment"># shift + ctrl - a : yabai -m window --move rel:-20:0</span></span><br><span class="line"><span class="comment"># shift + ctrl - s : yabai -m window --move rel:0:20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># increase window size</span></span><br><span class="line"><span class="comment"># shift + alt - a : yabai -m window --resize left:-20:0</span></span><br><span class="line"><span class="comment"># shift + alt - w : yabai -m window --resize top:0:-20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># decrease window size</span></span><br><span class="line"><span class="comment"># shift + cmd - s : yabai -m window --resize bottom:0:-20</span></span><br><span class="line"><span class="comment"># shift + cmd - w : yabai -m window --resize top:0:20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set insertion point in focused container</span></span><br><span class="line"><span class="comment"># ctrl + alt - h : yabai -m window --insert west</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># toggle window zoom</span></span><br><span class="line"><span class="comment"># alt - d : yabai -m window --toggle zoom-parent</span></span><br><span class="line"><span class="comment"># alt - f : yabai -m window --toggle zoom-fullscreen</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># toggle window split type</span></span><br><span class="line"><span class="comment"># alt - e : yabai -m window --toggle split</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浮动/不浮动窗口 float / unfloat window and center on screen</span></span><br><span class="line"><span class="comment">#alt - t : yabai -m window --toggle float;yabai -m window --grid 4:4:1:1:2:2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># toggle sticky(+float), topmost, picture-in-picture</span></span><br><span class="line"><span class="comment"># alt - p : yabai -m window --toggle sticky;\</span></span><br><span class="line"><span class="comment">#           yabai -m window --toggle topmost;\</span></span><br><span class="line"><span class="comment">#           yabai -m window --toggle pip</span></span><br></pre></td></tr></table></figure></div><h2 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h2><p>After using it for a few days, I found that skhd’s shortcuts often conflict with application or system shortcuts, which is a bit troublesome.</p><p>In addition, there are more shortcut keys, you need to use more to remember familiar, I use it again for a period of time to see the situation first.</p><p>The effect would be something like the following:</p><p><a data-fancybox="gallery" data-src="mac-tiling-yabai/image-20220520121029280.webp" data-caption=" Renderings "><picture>               <source srcset="mac-tiling-yabai/image-20220520121029280.webp" type="image/webp">               <img src="mac-tiling-yabai/image-20220520121029280.png" alt=" Renderings "></picture></a></p><p>Looked almost well, just haven’t played around with it, efficiency didn’t improve much, unfortunately.</p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/koekeishiya/yabai">yabai Open Source Project</a></p><p><a href="https://github.com/koekeishiya/skhd">skhd Open Source Project</a></p><p><a href="https://www.cnblogs.com/tdg-yyx/p/15972309.html">Toretto</a></p>]]></content>
    
    
    <summary type="html">Long-time Linux users should be no stranger to i3wm, which differs significantly from Mac and Windows operating systems like the floating (float) desktop, which is called the tiling (tiling) desktop. When I learned about the open source project yabai for Mac, I couldn&#39;t wait to start using it.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="macos" scheme="https://vccv.cc/en/tags/macos/"/>
    
    <category term="yabai" scheme="https://vccv.cc/en/tags/yabai/"/>
    
  </entry>
  
  <entry>
    <title>Takagi-san</title>
    <link href="https://vccv.cc/en/article/takagi-san.html"/>
    <id>https://vccv.cc/en/article/takagi-san.html</id>
    <published>2022-03-26T06:06:28.000Z</published>
    <updated>2022-03-26T06:06:28.000Z</updated>
    
    <content type="html"><![CDATA[<script src="https://cdn.jsdelivr.net/npm/dplayer@1/dist/DPlayer.min.js"></script><div id="mmedia-JnqtzvRxMlQlCVaE"></div><script> var JnqtzvRxMlQlCVaE_options = JSON.parse('{\"video\":{\"url\":\"takagi-san/videos/takagi-san.mp4\"}}'); JnqtzvRxMlQlCVaE_options.container = document.getElementById("mmedia-JnqtzvRxMlQlCVaE"); const dp_JnqtzvRxMlQlCVaE = new DPlayer(JnqtzvRxMlQlCVaE_options); </script><h2 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h2><p>The third season of <strong>Takagi-san</strong> (Japanese: からかい上手の高木さん) anime TV ended today (3.26), and there may not be a fourth season.</p><p>Purposely went to catch up at 1 a.m. and felt a lot of emotions.</p><p>Before learning that the theatrical version will be released in Japan in June, bilibili may be introduced, looking forward to it.</p><p>Also, reprinting a video of the upkeeper’s clip recapping three seasons of the show, great job.</p><p>Thanks to <a href="https://www.bilibili.com/video/BV1eS4y127Eg">吕吕吕谷修</a> .</p>]]></content>
    
    
    <summary type="html">Takagi-san&#39;s TV version is now finished, and there may not be a fourth season. Before learning that the theatrical version will be released in Japan in June, bilibili may be introduced, looking forward to it.</summary>
    
    
    
    <category term="thinking" scheme="https://vccv.cc/en/categories/thinking/"/>
    
    <category term="anime" scheme="https://vccv.cc/en/categories/thinking/anime/"/>
    
    
    <category term="takagi-san" scheme="https://vccv.cc/en/tags/takagi-san/"/>
    
  </entry>
  
  <entry>
    <title>MacOS User&#39;s Aria2 Configuration</title>
    <link href="https://vccv.cc/en/article/aria2-mac.html"/>
    <id>https://vccv.cc/en/article/aria2-mac.html</id>
    <published>2022-03-19T08:49:15.000Z</published>
    <updated>2022-03-19T08:49:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><h3 id="What-is-Aria2"><a href="#What-is-Aria2" class="headerlink" title="What is Aria2?"></a>What is Aria2?</h3><blockquote><p>Aria2 is a free, cross-platform command line interface download manager that supports HTTP, HTTPS, FTP, Bittorrent and Metalink.</p><p>Another feature of Aria2 is that you can use JSON-RPC and XML-RPC for HTTP remote download control, and the JSON-RPC interface is available through WebSocket.</p></blockquote><p>I mainly use to download seed Bittorrent files and multithreaded downloads.</p><h3 id="Preparation-before-configuration"><a href="#Preparation-before-configuration" class="headerlink" title="Preparation before configuration"></a>Preparation before configuration</h3><ul><li><p>Installed <a href="https://brew.sh/index_zh-cn">Homebrew</a> 。</p></li><li><p>Ability of using <strong>vim</strong> or other editors.</p><blockquote><p>Common commands:</p><p>Press the <em>i</em> key in the open vim interface to enter edit mode; Press the <em>Esc</em> key to exit edit mode and enter command line mode; Use the <em><strong>:wq</strong></em> command to save and exit.</p></blockquote></li></ul><h2 id="Install-and-configure-Aria2"><a href="#Install-and-configure-Aria2" class="headerlink" title="Install and configure Aria2"></a>Install and configure Aria2</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install aria2 by Homebrew</span></span><br><span class="line">brew install aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create aria2.conf and aria2.session files</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/.aria2 &amp;&amp; <span class="built_in">cd</span> ~/.aria2</span><br><span class="line"><span class="built_in">touch</span> aria2.conf</span><br><span class="line"><span class="built_in">touch</span> aria2.session</span><br></pre></td></tr></table></figure></div><p>Edit the configuration file <strong>aria2.conf</strong> :</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">## 文件保存相关 ##</span><br><span class="line"></span><br><span class="line"># 文件的保存路径(可使用绝对路径或相对路径)<span class="punctuation">,</span> 默认<span class="punctuation">:</span> Mac下Downloads下载文件夹</span><br><span class="line">dir=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/Downloads</span><br><span class="line"># 启用磁盘缓存<span class="punctuation">,</span> <span class="number">0</span>为禁用缓存<span class="punctuation">,</span> 需<span class="number">1.16</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">16</span>M</span><br><span class="line">disk-cache=<span class="number">32</span>M</span><br><span class="line"># 文件预分配方式<span class="punctuation">,</span> 能有效降低磁盘碎片<span class="punctuation">,</span> 默认<span class="punctuation">:</span>prealloc</span><br><span class="line"># 预分配所需时间<span class="punctuation">:</span> none &lt; falloc ? trunc &lt; prealloc</span><br><span class="line"># falloc和trunc则需要文件系统和内核支持</span><br><span class="line"># NTFS建议使用falloc<span class="punctuation">,</span> EXT3/<span class="number">4</span>建议trunc<span class="punctuation">,</span> MAC 下需要注释此项</span><br><span class="line">#file-allocation=none</span><br><span class="line"># 断点续传</span><br><span class="line">continue=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## 下载连接相关 ##</span><br><span class="line"></span><br><span class="line"># 最大同时下载任务数<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-concurrent-downloads=<span class="number">5</span></span><br><span class="line"># 同一服务器连接数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span> 最大值<span class="number">16</span></span><br><span class="line">max-connection-per-server=<span class="number">5</span></span><br><span class="line"># 最小文件分片大小<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 取值范围<span class="number">1</span>M <span class="number">-1024</span>M<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">20</span>M</span><br><span class="line"># 假定size=<span class="number">10</span>M<span class="punctuation">,</span> 文件为<span class="number">20</span>MiB 则使用两个来源下载; 文件为<span class="number">15</span>MiB 则使用一个来源下载</span><br><span class="line">min-split-size=<span class="number">10</span>M</span><br><span class="line"># 单个任务最大线程数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#split=<span class="number">5</span></span><br><span class="line"># 分片选择算法<span class="punctuation">,</span>有助于视频的边下边播同时兼顾减少建立连接的次数</span><br><span class="line">stream-piece-selector=geom</span><br><span class="line"># 整体下载速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-download-limit=<span class="number">0</span></span><br><span class="line"># 单个任务下载速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-download-limit=<span class="number">0</span></span><br><span class="line"># 整体上传速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-upload-limit=<span class="number">0</span></span><br><span class="line"># 单个任务上传速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-upload-limit=<span class="number">0</span></span><br><span class="line"># 禁用IPv6<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">#disable-ipv6=<span class="keyword">true</span></span><br><span class="line"># 连接超时时间<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">60</span></span><br><span class="line">#timeout=<span class="number">60</span></span><br><span class="line"># 最大重试次数<span class="punctuation">,</span> 设置为<span class="number">0</span>表示不限制重试次数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-tries=<span class="number">5</span></span><br><span class="line"># 设置重试等待的秒数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#retry-wait=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">## 进度保存相关 ##</span><br><span class="line"></span><br><span class="line"># 日志文件</span><br><span class="line">log-level=notice</span><br><span class="line">log=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.log</span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line"># 需提前创建一个空文件否则会报错</span><br><span class="line">input-file=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 在Aria2退出时保存`错误/未完成`的下载任务到会话文件</span><br><span class="line">save-session=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 定时保存会话<span class="punctuation">,</span> <span class="number">0</span>为退出时才保存<span class="punctuation">,</span> 需<span class="number">1.16</span><span class="number">.1</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">save-session-interval=<span class="number">60</span></span><br><span class="line"></span><br><span class="line"># 强制保存会话<span class="punctuation">,</span> 即使任务已经完成<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span><br><span class="line">#force-save=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## RPC相关设置 ##</span><br><span class="line"></span><br><span class="line"># 启用RPC<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">enable-rpc=<span class="keyword">true</span></span><br><span class="line"># 允许所有来源<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-allow-origin-all=<span class="keyword">true</span></span><br><span class="line"># 允许非外部访问<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-listen-all=<span class="keyword">true</span></span><br><span class="line"># RPC监听端口<span class="punctuation">,</span> 端口被占用时可以修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6800</span></span><br><span class="line">rpc-listen-port=<span class="number">6800</span></span><br><span class="line"># 设置的RPC授权令牌</span><br><span class="line"># 此处使用`openssl rand -base64 <span class="number">32</span>`命令生成&lt;TOKEN&gt;</span><br><span class="line"># 此次需要自行配置，将&lt;TOKEN&gt;整体替换为你的RPC“密码”</span><br><span class="line">rpc-secret=&lt;TOKEN&gt;</span><br><span class="line"># 是否启用 RPC 服务的 SSL/TLS 加密<span class="punctuation">,</span></span><br><span class="line"># 启用加密后 RPC 服务需要使用 https 或者 wss 协议连接</span><br><span class="line">#rpc-secure=<span class="keyword">true</span></span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的证书文件<span class="punctuation">,</span></span><br><span class="line"># 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥</span><br><span class="line">#rpc-certificate=/path/to/certificate.pem</span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的私钥文件</span><br><span class="line">#rpc-private-key=/path/to/certificate.key</span><br><span class="line"></span><br><span class="line">## HTTP 设置 ##</span><br><span class="line"></span><br><span class="line"># 自定义 User Agent</span><br><span class="line">user-agent=Mozilla/<span class="number">5.0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_15_1) AppleWebKit/<span class="number">537.36</span> (KHTML<span class="punctuation">,</span> like Gecko) Chrome/<span class="number">80.0</span><span class="number">.3987</span><span class="number">.85</span> Safari/<span class="number">537.36</span></span><br><span class="line"></span><br><span class="line">## BT/PT下载相关 ##</span><br><span class="line"></span><br><span class="line"># 当下载的是一个种子(以.torrent结尾)时<span class="punctuation">,</span> 自动开始BT任务<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">follow-torrent=<span class="keyword">true</span></span><br><span class="line"># BT监听端口<span class="punctuation">,</span> 当端口被屏蔽时使用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 单个种子最大连接数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">55</span></span><br><span class="line">#bt-max-peers=<span class="number">55</span></span><br><span class="line"></span><br><span class="line">### DHT 功能<span class="punctuation">,</span> 仅对 BT 生效<span class="punctuation">,</span> PT 无效###</span><br><span class="line"># 打开 DHT (IPv4) 功能</span><br><span class="line">enable-dht=<span class="keyword">true</span></span><br><span class="line"># 打开 DHT (IPv6) 功能</span><br><span class="line">enable-dht6=<span class="keyword">true</span></span><br><span class="line"># DHT网络监听端口<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">dht-listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 本地节点查找</span><br><span class="line">bt-enable-lpd=<span class="keyword">true</span></span><br><span class="line"># 种子交换</span><br><span class="line">enable-peer-exchange=<span class="keyword">true</span></span><br><span class="line"># DHT (IPv4) 路由表文件路径</span><br><span class="line">dht-file-path=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht.dat</span><br><span class="line"># DHT (IPv6) 路由表文件路径</span><br><span class="line">dht-file-path6=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht6.dat</span><br><span class="line"></span><br><span class="line"># 客户端伪装<span class="punctuation">,</span> PT需要</span><br><span class="line">peer-id-prefix=-UT341-</span><br><span class="line">peer-agent=uTorrent/<span class="number">341</span>(<span class="number">109279400</span>)(<span class="number">30888</span>)</span><br><span class="line"></span><br><span class="line"># 同一服务器连接数</span><br><span class="line"># 每个种子限速<span class="punctuation">,</span> 对少种的PT很有用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">50</span>K</span><br><span class="line">#bt-request-peer-speed-limit=<span class="number">50</span>K</span><br><span class="line"># 当种子的分享率达到这个数时<span class="punctuation">,</span> 自动停止做种<span class="punctuation">,</span> <span class="number">0</span>为一直做种<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1.0</span></span><br><span class="line">seed-ratio=<span class="number">0</span></span><br><span class="line"># BT校验相关<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">#bt-hash-check-seed=<span class="keyword">true</span></span><br><span class="line"># 继续之前的BT任务时<span class="punctuation">,</span> 无需再次校验<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-seed-unverified=<span class="keyword">true</span></span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent文件)<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-save-metadata=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line"># BT 服务器地址</span><br><span class="line"># 逗号分隔的 BT 服务器地址. 如果服务器地址在 --bt-exclude-tracker 选项中<span class="punctuation">,</span> 其将不会生效.</span><br><span class="line">bt-tracker=udp<span class="punctuation">:</span><span class="comment">//tracker.coppersurfer.tk:6969/announce,udp://tracker.leechers-paradise.org:6969/announce,udp://tracker.opentrackr.org:1337/announce,udp://p4p.arenabg.com:1337/announce,udp://9.rarbg.to:2710/announce,udp://9.rarbg.me:2710/announce,udp://tracker.internetwarriors.net:1337/announce,udp://exodus.desync.com:6969/announce,udp://tracker.tiny-vps.com:6969/announce,udp://tracker.moeking.me:6969/announce,udp://retracker.lanta-net.ru:2710/announce,udp://open.stealth.si:80/announce,udp://open.demonii.si:1337/announce,udp://tracker.torrent.eu.org:451/announce,udp://tracker.cyberia.is:6969/announce,udp://denis.stalker.upeer.me:6969/announce,udp://tracker3.itzmx.com:6961/announce,udp://ipv4.tracker.harry.lu:80/announce,udp://valakas.rollo.dnsabr.com:2710/announce,udp://tracker.nyaa.uk:6969/announce,udp://retracker.netbynet.ru:2710/announce,udp://opentor.org:2710/announce,udp://explodie.org:6969/announce,http://explodie.org:6969/announce,udp://zephir.monocul.us:6969/announce,udp://xxxtor.com:2710/announce,udp://tracker.zum.bi:6969/announce,udp://tracker.yoshi210.com:6969/announce,udp://tracker.uw0.xyz:6969/announce,udp://tracker.sbsub.com:2710/announce,udp://tracker.lelux.fi:6969/announce,udp://tracker.iamhansen.xyz:2000/announce,udp://tracker.filemail.com:6969/announce,udp://tracker.dler.org:6969/announce,udp://retracker.sevstar.net:2710/announce,udp://retracker.akado-ural.ru:80/announce,udp://open.nyap2p.com:6969/announce,udp://chihaya.toss.li:9696/announce,udp://bt2.archive.org:6969/announce,udp://bt1.archive.org:6969/announce,udp://bt.okmp3.ru:2710/announce,https://tracker.nanoha.org:443/announce,http://tracker.torrentyorg.pl:80/announce,http://tracker.opentrackr.org:1337/announce,http://tracker.internetwarriors.net:1337/announce,http://tracker.bt4g.com:2095/announce,http://t.nyaatracker.com:80/announce,http://retracker.sevstar.net:2710/announce,http://pow7.com:80/announce,http://mail2.zelenaya.net:80/announce,http://h4.trakx.nibba.trade:80/announce,udp://tracker4.itzmx.com:2710/announce,udp://tracker2.itzmx.com:6961/announce,udp://tracker.zerobytes.xyz:1337/announce,udp://tracker.swateam.org.uk:2710/announce,udp://tr.bangumi.moe:6969/announce,udp://qg.lorzl.gq:2710/announce,udp://opentracker.i2p.rocks:6969/announce,udp://bt2.54new.com:8080/announce,https://tracker.opentracker.se:443/announce,https://tracker.lelux.fi:443/announce,http://www.loushao.net:8080/announce,http://vps02.net.orel.ru:80/announce,http://tracker4.itzmx.com:2710/announce,http://tracker3.itzmx.com:6961/announce,http://tracker2.itzmx.com:6961/announce,http://tracker1.itzmx.com:8080/announce,http://tracker01.loveapp.com:6789/announce,http://tracker.zerobytes.xyz:1337/announce,http://tracker.yoshi210.com:6969/announce,http://tracker.nyap2p.com:8080/announce,http://tracker.lelux.fi:80/announce,http://tracker.bz:80/announce,http://opentracker.i2p.rocks:6969/announce,http://open.acgnxtracker.com:80/announce</span></span><br><span class="line"># BT 排除服务器地址</span><br><span class="line">bt-exclude-tracker=</span><br><span class="line"></span><br><span class="line"># 启用后台进程</span><br><span class="line">daemon=<span class="keyword">false</span></span><br><span class="line"></span><br><span class="line"># 部分事件hook<span class="punctuation">,</span> 调用第三方命令<span class="punctuation">:</span>/path/to/command</span><br><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载错误</span><br><span class="line">on-download-error=</span><br><span class="line"></span><br><span class="line"># 代理 仅支持 HTTP 协议</span><br><span class="line">#all-proxy=http<span class="punctuation">:</span><span class="comment">//127.0.0.1:1087</span></span><br></pre></td></tr></table></figure></div><p>Considerations for this profile are as follows:</p><ul><li>RPC mode is enabled by default.</li><li>The RPC authorization token has been set, please change it to your own.</li><li>BT tracker has been added.</li></ul><h2 id="Set-to-self-boot"><a href="#Set-to-self-boot" class="headerlink" title="Set to self-boot"></a>Set to self-boot</h2><h3 id="Create-a-user’s-startup-file"><a href="#Create-a-user’s-startup-file" class="headerlink" title="Create a user’s startup file"></a>Create a user’s startup file</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/Library/LaunchAgents/aria2.plist</span><br><span class="line">vim ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><p>Write as follows:</p><div class="highlight-wrap" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>aria2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/bin/aria2c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>WorkingDirectory<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/YOUR-OWN-USERNAME/Downloads<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>Be sure to change the user name of the <em>WorkingDirectory</em> directory to your own user name.</p></blockquote><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check plist files</span></span><br><span class="line">plutil ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Chmod file</span></span><br><span class="line"><span class="built_in">chmod</span> 644 ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><h3 id="Add-and-enable-self-startup-files"><a href="#Add-and-enable-self-startup-files" class="headerlink" title="Add and enable self-startup files"></a>Add and enable self-startup files</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add</span></span><br><span class="line">launchctl load ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete</span></span><br><span class="line">launchctl unload ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start</span></span><br><span class="line">launchctl start aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Stop</span></span><br><span class="line">launchctl stop aria2</span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>If you have previously added aria2 startup files, remember to delete the startup items and then add them again!</p></blockquote><h2 id="Add-automatic-update-BT-tracker-function"><a href="#Add-automatic-update-BT-tracker-function" class="headerlink" title="Add automatic update BT tracker function"></a>Add automatic update BT tracker function</h2><h3 id="Create-a-trackers-list-aria2-sh-script"><a href="#Create-a-trackers-list-aria2-sh-script" class="headerlink" title="Create a trackers-list-aria2.sh script"></a>Create a trackers-list-aria2.sh script</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/trackers-list-aria2.sh</span><br><span class="line">vim ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><p>The script reads as follows:</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 文件名 trackers-list-aria2.sh</span></span><br><span class="line"><span class="comment"># aria2 设置文件路径</span></span><br><span class="line">CONF=<span class="variable">$&#123;HOME&#125;</span>/.aria2/aria2.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置选择的 trackerlist （可选 all_aria2.txt, best_aria2.txt, http_aria2.txt）</span></span><br><span class="line">trackerfile=all_aria2.txt</span><br><span class="line"><span class="comment"># downloadfile=https://raw.githubusercontent.com/ngosang/trackerslist/master/$&#123;trackerfile&#125;</span></span><br><span class="line">downloadfile=https://trackerslist.com/<span class="variable">$&#123;trackerfile&#125;</span></span><br><span class="line"></span><br><span class="line">list=$(curl -fsSL <span class="variable">$&#123;downloadfile&#125;</span>)</span><br><span class="line"><span class="keyword">if</span> ! grep -q <span class="string">&quot;bt-tracker&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span> ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 添加 bt-tracker 服务器信息......\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\nbt-tracker=<span class="variable">$&#123;list&#125;</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 更新 bt-tracker 服务器信息.....\033[0m&quot;</span></span><br><span class="line">    sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&quot;s@bt-tracker.*@bt-tracker=<span class="variable">$&#123;list&#125;</span>@g&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 重启 aria2 服务</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 停止 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl stop aria2</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 启动 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl start aria2</span><br></pre></td></tr></table></figure></div><p>Set permissions:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><h3 id="Set-up-the-task-scheduler-to-achieve-automatic-updates"><a href="#Set-up-the-task-scheduler-to-achieve-automatic-updates" class="headerlink" title="Set up the task scheduler to achieve automatic updates"></a>Set up the task scheduler to achieve automatic updates</h3><p>Compile the current user task plan:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>Use <strong>crontab -l</strong> command to view the current user task schedule. The contents are as follows:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MAILTO = <span class="string">&quot;&quot;</span></span><br><span class="line">0 18 * * * ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><blockquote><p>2022/05/27 update:</p><p>Add <em>MAILTO = “”</em> configuration to avoid <em>You have new mail</em> prompts.</p><p>If such notification has already occurred, enter <code>mail</code> to view and eliminate it.</p></blockquote><p>Or you can command directly:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(crontab -l 2&amp;&gt; /dev/null; <span class="built_in">echo</span> <span class="string">&quot;0 18 * * * ~/.aria2/trackers-list-aria2.sh&quot;</span>) | crontab</span><br></pre></td></tr></table></figure></div><blockquote><p>The above indicates:</p><p>Automatically update BT tracker and restart aria2 service at 6: 00 p.m. every day.</p><p>Cancel the scheduled task:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>Then delete the content manually, or run it directly:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l 2&amp;&gt; /dev/null| sed <span class="string">&quot;/trackers-list-aria2.sh/d&quot;</span> | crontab</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Add-Download-Notification"><a href="#Add-Download-Notification" class="headerlink" title="Add Download-Notification"></a>Add Download-Notification</h3><p>Final effect: when the download is complete, a prompt box will pop up in the upper right corner of the screen to display the file name of the completed download, and voice broadcast: “there is a file that has been downloaded, please check it!”</p><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180124115.webp" data-caption=" An example of aria2 prompt box under macOS "><picture>               <source srcset="aria2-mac/image-20220319180124115.webp" type="image/webp">               <img src="aria2-mac/image-20220319180124115.png" alt=" An example of aria2 prompt box under macOS "></picture></a></p><h3 id="Create-a-download-complete-hook-sh-script"><a href="#Create-a-download-complete-hook-sh-script" class="headerlink" title="Create a download-complete-hook.sh script"></a>Create a download-complete-hook.sh script</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/download-complete-hook.sh</span><br><span class="line">vim ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><p>The script reads as follows:</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># 文件名 download-complete-hook.sh</span></span><br><span class="line"><span class="comment"># 给aria2 RPC添加一个下载完成通知 for macOS</span></span><br><span class="line"><span class="comment"># 变量 3 表示下载完成文件的路径</span></span><br><span class="line"><span class="comment"># 具体提示框设置可参考`https://code-maven.com/display-notification-from-the-mac-command-line`。</span></span><br><span class="line"><span class="comment"># 不支持设置自定义图标</span></span><br><span class="line"></span><br><span class="line">fname=`<span class="built_in">basename</span> <span class="variable">$3</span>`</span><br><span class="line">osascript &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">display notification &quot;$fname 已经下载完成！&quot; with title &quot;【下载完成】&quot;</span></span><br><span class="line"><span class="string">say &quot;有个文件下载完成，请查收！&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></div><p>Set permissions:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h3 id="Add-Hook-Settings"><a href="#Add-Hook-Settings" class="headerlink" title="Add Hook Settings"></a>Add Hook Settings</h3><blockquote><p>The <em>aria2.conf</em> configuration file above already contains the following, and those who use the above file can skip this section directly.</p></blockquote><p>Add the following to the <strong>aria2.conf</strong> :</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h2 id="Aria2-web-UI"><a href="#Aria2-web-UI" class="headerlink" title="Aria2 web UI"></a>Aria2 web UI</h2><p>Do not need to install, just use the browser to open: <a href="http://ariang.mayswind.net/latest/">AriaNg UI</a> .</p><h3 id="PRC-Setting"><a href="#PRC-Setting" class="headerlink" title="PRC Setting"></a>PRC Setting</h3><blockquote><p>Set according to the PRC-related settings in the <em>aria2.conf</em> configuration file.</p></blockquote><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180542315.webp" data-caption=" AriaNg PRC Setting "><picture>               <source srcset="aria2-mac/image-20220319180542315.webp" type="image/webp">               <img src="aria2-mac/image-20220319180542315.png" alt=" AriaNg PRC Setting "></picture></a></p><h2 id="Install-the-browser-download-plug-in"><a href="#Install-the-browser-download-plug-in" class="headerlink" title="Install the browser download plug-in"></a>Install the browser download plug-in</h2><p><a href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome plug-in</a></p><ul><li>Built-in an offline AriaNg version of UI</li><li>Integrate right-click download menu</li></ul><blockquote><p>The built-in offline AriaNg version also requires <em>PRC Setting</em> , otherwise you will not be able to connect successfully.</p></blockquote><h2 id="Reference-only"><a href="#Reference-only" class="headerlink" title="Reference only"></a>Reference only</h2><h3 id="Download-the-file-from-the-network-disk"><a href="#Download-the-file-from-the-network-disk" class="headerlink" title="Download the file from the network disk"></a>Download the file from the network disk</h3><p><a href="https://greasyfork.org/zh-CN/scripts/436446">网盘直链下载助手</a>: it needs to be enabled by installing script managers such as the extension plug-in <a href="https://violentmonkey.github.io/get-it/">Violentmonkey</a> or <a href="https://www.tampermonkey.net/">Tampermonkey</a> .</p><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><blockquote><p>Use with <a href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome Plugin-in</a> .</p></blockquote><ol><li>Select the file you want to download and click “Aria download” or “RPC download” on the download assistant page to push it to the Aria2 UI interface.</li><li>After clicking the appropriate option with the mouse, select “send Link”, and then confirm the download.</li></ol><p><a data-fancybox="gallery" data-src="aria2-mac/QQ20220319-175017.gif" data-caption=" Plug-in usage example "><picture>               <source srcset="aria2-mac/QQ20220319-175017.gif" type="image/webp">               <img src="aria2-mac/QQ20220319-175017.gif" alt=" Plug-in usage example "></picture></a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/maboloshi/">GitHub maboloshi</a></p>]]></content>
    
    
    <summary type="html">Backed up the process of configuring aria2 under the macOS and cooperating with many plug-ins in Chrome browser to download multithreading and many other functions. Most of them are shared by GitHub authors and have been noted at the end of the article.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="macos" scheme="https://vccv.cc/en/tags/macos/"/>
    
    <category term="aria2" scheme="https://vccv.cc/en/tags/aria2/"/>
    
  </entry>
  
  <entry>
    <title>Install qinglong Panel on linux server</title>
    <link href="https://vccv.cc/en/article/qinglong-jd.html"/>
    <id>https://vccv.cc/en/article/qinglong-jd.html</id>
    <published>2022-03-10T05:04:37.000Z</published>
    <updated>2022-03-10T05:04:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Since my intention is to squeeze the value out of idle servers, this article is all about deployment with the server as the body, other devices such as N1 or Playcloud, please find your own information to deploy.</p><h2 id="Server-Selection"><a href="#Server-Selection" class="headerlink" title="Server Selection"></a>Server Selection</h2><p>Region selection.</p><p>It is best to choose a domestic server, so that it is safer for the Jingdong hanging, but there are network problems (connection to GitHub is unstable and troublesome), while foreign servers have no problems in this regard.</p><p>Select Centos 7 x64 for the system.</p><blockquote><p>Centos 7 is better compared to the Green Dragon panel. I have tested that some environment dependencies of Ubuntu system cannot be installed, which is more troublesome.</p></blockquote><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><ul><li><p>Install <strong>Docker</strong>：</p><p>China</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure></div><p>Others</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker</span><br></pre></td></tr></table></figure></div></li><li><p>Start Docker and set it to self-start</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure></div></li><li><p>Pull Mirror</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull whyour/qinglong:latest</span><br></pre></td></tr></table></figure></div></li><li><p>Deployment Panel</p><div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit \</span><br><span class="line">-v $PWD/ql/config:/ql/config \</span><br><span class="line">-v $PWD/ql/log:/ql/log \</span><br><span class="line">-v $PWD/ql/db:/ql/db \</span><br><span class="line">-p 5600:5600 \</span><br><span class="line">--name qinglong \</span><br><span class="line">--hostname qinglong \</span><br><span class="line">--restart always \</span><br><span class="line">whyour/qinglong:latest</span><br></pre></td></tr></table></figure></div><blockquote><p>The fifth line of the port number (5600) is recommended to be modified to be safer.</p></blockquote></li></ul><h2 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h2><p>Visit <strong>IP:Port number</strong>, e.g. local address 127.0.0.1:5600 to access the Green Dragon panel installation interface.</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310160646421.webp" data-caption=" Initialization "><picture>               <source srcset="qinglong-jd/image-20220310160646421.webp" type="image/webp">               <img src="qinglong-jd/image-20220310160646421.png" alt=" Initialization "></picture></a></p><p>Just follow the process once.</p><blockquote><p>Notification settings there can be configured with multiple notification methods, choose the one you use most often. If not, you can also skip or Baidu Sever Sauce (simple, not recommended), Enterprise WeChat Robot (recommended for those who use Enterprise WeChat).</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310161019853.webp" data-caption=" Notification Settings "><picture>               <source srcset="qinglong-jd/image-20220310161019853.webp" type="image/webp">               <img src="qinglong-jd/image-20220310161019853.png" alt=" Notification Settings "></picture></a></p></blockquote><h2 id="Add-task"><a href="#Add-task" class="headerlink" title="Add task"></a>Add task</h2><p>Go to the main menu and select New Task in the upper right corner:</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310161222686.webp" data-caption=" Add task "><picture>               <source srcset="qinglong-jd/image-20220310161222686.webp" type="image/webp">               <img src="qinglong-jd/image-20220310161222686.png" alt=" Add task "></picture></a></p><p>Name is arbitrary, can not be filled; command is as follows, one line, a total of nine; timing rules can fill in their own, I default here 0 0 0 * * * , which means 0 hours, 0 minutes and 0 seconds of each day.</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ql repo https://github.com/KingRan/KR.git <span class="string">&quot;jd_|jx_|jdCookie&quot;</span> <span class="string">&quot;activity|backUp&quot;</span> <span class="string">&quot;^jd[^_]|USER|utils|function|sign|sendNotify|ql|JDJR&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/curtinlv/JD-Script.git</span><br><span class="line"></span><br><span class="line">ql repo https://github.com/Zy143L/wskey.git <span class="string">&quot;wskey&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo ql repo https://github.com/smiek2121/scripts.git <span class="string">&quot;jd_|gua_&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;ZooFaker_Necklace.js|JDJRValidator_Pure.js|sign_graphics_validate.js|cleancart_activity.js|jdCookie.js|sendNotify.js&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/Yun-City/City.git <span class="string">&quot;jd_|jx_|gua_|jddj_|getJDCookie&quot;</span> <span class="string">&quot;activity|backUp&quot;</span> <span class="string">&quot;^jd[^_]|USER|function|utils|sendnotify|ZooFaker_Necklace|jd_Cookie|JDJRValidator_|sign_graphics_validate|ql|magic|cleancart_activity&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/6dylan6/jdpro.git <span class="string">&quot;jd_|jx_|jddj_&quot;</span> <span class="string">&quot;backUp&quot;</span> <span class="string">&quot;^jd[^_]|USER|JD|function|sendNotify&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/gys619/Absinthe.git <span class="string">&quot;jd_|jx_|jddj_|gua_|getJDCookie|wskey&quot;</span> <span class="string">&quot;activity|backUp&quot;</span> <span class="string">&quot;^jd[^_]|USER|utils|ZooFaker_Necklace|JDJRValidator_|sign_graphics_validate|jddj_cookie|function|ql|magic|JDJR|JD&quot;</span> <span class="string">&quot;main&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/zero205/JD_tencent_scf.git <span class="string">&quot;jd_|jx_|jdCookie&quot;</span> <span class="string">&quot;backUp|icon&quot;</span> <span class="string">&quot;^jd[^_]|USER|sendNotify|sign_graphics_validate|JDJR|JDSign|ql&quot;</span> <span class="string">&quot;main&quot;</span></span><br><span class="line"></span><br><span class="line">ql repo https://github.com/whyour/hundun.git <span class="string">&quot;quanx&quot;</span> <span class="string">&quot;tokens|caiyun|didi|donate|fold|Env&quot;</span></span><br></pre></td></tr></table></figure></div><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310162558349.webp" data-caption=" New assignment "><picture>               <source srcset="qinglong-jd/image-20220310162558349.webp" type="image/webp">               <img src="qinglong-jd/image-20220310162558349.png" alt=" New assignment "></picture></a></p><p>Once all of them are filled in, we actively run through them, select them all and click <strong>Run All</strong>. Wait a while and you will see hundreds of additional tasks.</p><h2 id="Configuring-Jingdong-cookies"><a href="#Configuring-Jingdong-cookies" class="headerlink" title="Configuring Jingdong cookies"></a>Configuring Jingdong cookies</h2><p>Here I am using <strong>Google Chrome</strong>, visit the <em><a href="https://bean.m.jd.com/bean/signIndex.action">Jingdong mobile login address</a></em> , open the developer mode (<strong>Shortcut key: F12</strong>), open the <strong>Network</strong> tab, follow the webpage prompts to log in to your Jingdong account, and copy the account cookie, as shown in the following figure.</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310163451895.webp" data-caption=" Jingdong cookie "><picture>               <source srcset="qinglong-jd/image-20220310163451895.webp" type="image/webp">               <img src="qinglong-jd/image-20220310163451895.png" alt=" Jingdong cookie "></picture></a></p><p>Then go back to Qinglong panel, select <strong>Environment Variables</strong> —&gt; <strong>New Variable</strong>, the name is <strong>JD_COOKIE</strong>, the value is the cookie just copied, and the auto split hold is <strong>No</strong>. Click OK to finish adding finally.</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310163958888.webp" data-caption=" New Variable "><picture>               <source srcset="qinglong-jd/image-20220310163958888.webp" type="image/webp">               <img src="qinglong-jd/image-20220310163958888.png" alt=" New Variable "></picture></a></p><blockquote><ul><li><p>Some tips.</p><ul><li><p><del>Multiple accounts only need to have the value <em>Line feed to enter the next cookie</em> inside, you cannot create another variable.</del></p></li><li><p>Mutiple accounts need to switch the <em>AUTO_SPLIT</em> option to <em>YES</em> on the newest version.<a data-fancybox="gallery" data-src="qinglong-jd/image-20220602190915779.webp" data-caption="auto split"><picture>               <source srcset="qinglong-jd/image-20220602190915779.webp" type="image/webp">               <img src="qinglong-jd/image-20220602190915779.png" alt="auto split"></picture></a></p></li><li><p>The cookie values only need to be <em>pt_key</em> and <em>pt_pin</em>, if you don’t know how to copy and paste them all, it’s fine.</p></li><li><p>Do not perform frequently to avoid black numbers.</p></li><li><p>Jingdong account is recommended to be bound to WeChat, the activity lottery draw to WeChat red envelope will be automatically withdrawn to WeChat wallet.</p></li></ul></li></ul></blockquote><h2 id="Modify-configuration-file-optional"><a href="#Modify-configuration-file-optional" class="headerlink" title="Modify configuration file (optional)"></a>Modify configuration file (optional)</h2><p>Click <strong>Configuration file</strong>, you can modify the notification push service in it. The notification push here is the push of daily tasks, and the push set at the beginning is the login push of Qinglong panel, etc. It is recommended to set it up here, but be aware that the messages are usually particularly numerous.</p><h2 id="Installing-Dependencies"><a href="#Installing-Dependencies" class="headerlink" title="Installing Dependencies"></a>Installing Dependencies</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enter</span></span><br><span class="line">docker <span class="built_in">exec</span> -it qinglong bash</span><br><span class="line"><span class="comment"># Install run</span></span><br><span class="line">curl -fsSL https://ghproxy.com/https://raw.githubusercontent.com/shufflewzc/QLDependency/main/Shell/QLOneKeyDependency.sh | sh</span><br></pre></td></tr></table></figure></div><p>A long wait to finish is all it takes.</p><blockquote><p>If your Qinglong container is not called <em>qinglong</em>, please replace it yourself.</p></blockquote><h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><p>At this point we are finally done, we can select the number of pages as <strong>500 Article/Page</strong> and then run the batch of tasks by selecting all.</p><p><a data-fancybox="gallery" data-src="qinglong-jd/image-20220310165735358.webp" data-caption=" Number of pages "><picture>               <source srcset="qinglong-jd/image-20220310165735358.webp" type="image/webp">               <img src="qinglong-jd/image-20220310165735358.png" alt=" Number of pages "></picture></a></p><p>The task will run automatically and regularly in the future, so you don’t need to worry about it anymore.</p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/whyour/qinglong">Qinglong Panel Open Source Projecct</a></p><h2 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h2><p>Update a fool-proof one-click script for the novice or those who don’t want to fuss:</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q https://raw.githubusercontents.com/shufflewzc/VIP/main/Scripts/sh/ql.sh -O ql.sh &amp;&amp; bash ql.sh</span><br></pre></td></tr></table></figure></div><p>You need to pre-install <strong>wget</strong>, centos users can directly <strong>yum install wget</strong>, other systems can do it by themselves.</p><h2 id="Update-1"><a href="#Update-1" class="headerlink" title="Update 1"></a>Update 1</h2><p>Be sure to download the <strong>京东</strong>、<strong>京喜</strong>、<strong>京东极速版</strong> apps and open the following activities (some need to choose to plant or produce items to choose on their own, do not leave it empty, otherwise it is equivalent to the activity is not open), in case the script can not run the unopened activities, resulting in lower earnings.</p><blockquote><p>京东 tasks：东东农场、东东萌宠、宠汪汪、种豆得豆；</p><p>京喜 tasks：京喜财富岛、京喜牧场、京喜工厂；</p><p>京东 tasks：汪汪乐园</p><p>note that we need to bind the WeChat (some scripts will automatically withdraw cash to WeChat).</p></blockquote><h2 id="Update-2"><a href="#Update-2" class="headerlink" title="Update 2"></a>Update 2</h2><p>2022/06/02 update the mutiple accounts configuration.</p><h2 id="Update-3"><a href="#Update-3" class="headerlink" title="Update 3"></a>Update 3</h2><p>2022/06/12 update the jd-cookie web link.</p>]]></content>
    
    
    <summary type="html">In contact with the Qinglong panel deployment sign in after consulting a lot of information, found to be a simple introduction to the East and West, so the idea of writing this article was born. The tutorial is detailed and lists all the pits that you have stepped in, if there are any omissions, welcome to add!</summary>
    
    
    
    <category term="linux" scheme="https://vccv.cc/en/categories/linux/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/linux/technique/"/>
    
    
    <category term="qinglong" scheme="https://vccv.cc/en/tags/qinglong/"/>
    
    <category term="linux" scheme="https://vccv.cc/en/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Self-use iOS Jailbreak Plugin and Source Backup</title>
    <link href="https://vccv.cc/en/article/jailbreak-plugin-backup.html"/>
    <id>https://vccv.cc/en/article/jailbreak-plugin-backup.html</id>
    <published>2022-02-28T03:16:02.000Z</published>
    <updated>2022-02-28T03:16:02.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Model: 12mini</p><p>System: iOS 14.2.1</p><p>Software: unc0ver</p><p>Store: cydia + zebra</p></blockquote><h2 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h2><ul><li><p><a href="https://repo.cydiabc.top/">小苹果</a></p></li><li><p><a href="https://havoc.app/">Havoc</a></p></li><li><p><a href="https://opa334.github.io/">opa334</a></p></li><li><p><a href="https://creaturecoding.com/repo/">Shuffle Official</a></p></li><li><p><a href="http://tigisoftware.com/cydia/">Filza Official</a></p></li><li><p><a href="http://cokepokes.github.io/">AppStore++ Official</a></p></li><li><p><a href="http://ib-soft.net/cydia/">iCleaner Pro Official</a></p></li><li><p><a href="https://lenglengyu.com/">lenglengyu</a></p></li><li><p><a href="http://repo.niceios.com/">NiceiOS</a></p></li><li><p><a href="http://repo.qqtlr.com/">Hi客 Chineseization</a></p></li><li><p><a href="https://miro92.com/repo/">MiRO92</a></p></li><li><p><a href="http://apt.thebigboss.org/repofiles/cydia/">BigBoss</a></p></li><li><p><a href="https://repo.co.kr/">A-Bypass Official</a></p></li><li><p><a href="https://lzsxcl.github.io/repo/">h2 Official</a></p></li><li><p><a href="https://repo.chariz.com/">Chariz</a></p></li><li><p><a href="http://limneos.net/repo/">BioProtect XS Official</a></p></li><li><p><a href="https://udevsharold.github.io/repo/">Bakgrunnur Official</a></p></li><li><p><a href="https://sharman79.github.io/Netskao/">Netskao Backup</a></p><blockquote><p>2022.04 Updated.</p><p><a href="https://repo.initnil.com/">Netskao Official</a> has reopened.</p></blockquote></li></ul><blockquote><p>Some self-contained sources and some development sources are not listed.</p></blockquote><h2 id="Plug-in"><a href="#Plug-in" class="headerlink" title="Plug-in"></a>Plug-in</h2><h3 id="Paid-plug-ins"><a href="#Paid-plug-ins" class="headerlink" title="Paid plug-ins"></a>Paid plug-ins</h3><blockquote><p>Paid plug-ins in the case of their own ability or recommended to pay to support the author, thank them for their efforts. As the majority of paid plug-ins are outside the region, you can register PayPal bound domestic card use.</p></blockquote><ul><li>App Hider: Hide the app</li><li>iCleaner Pro: Clean up junk and troubleshoot plug-ins</li><li>Filza: powerful file manager, direct install deb and ipa</li><li>Fake GPS Pro: virtual positioning, simulated Wi-Fi</li><li>h2: A comprehensive plug-in</li><li>Snapper2 + Snapper2 CC Toggle: powerful screenshot plugin</li><li>NiceCaller: system call enhancement, common window calls</li><li>Crane: Alternative Multi-opening Plugin</li><li>CopyLog: Clipboard management enhancement</li><li>Flex 3: System Enhancement Artifact</li><li>InstaLauncher 2: Slide sideways to open the software</li><li>Aemulo: nfc enhancement, simulating non-encrypted cards added to wallets</li><li>Some paid plugins from Cold Rain Source</li></ul><h3 id="Free-Plugin"><a href="#Free-Plugin" class="headerlink" title="Free Plugin"></a>Free Plugin</h3><ul><li>AppSync Unified: Turn off system signature verification and install ipa</li><li>QQ Purification: QQ Enhancement</li><li>WeChat purification: WeChat opens Callkit and more</li><li>PerfectGrabber: Game mode pull down to show power time</li><li>PullClearNC: Pull down to clear all notifications</li><li>Many other software optimization plugins in Netskao</li><li>Shuffle: Setting up plug-in categorization</li><li>StoreSwitcher 2: App Store quick account switching</li><li>AppStore++: App Store enhancement, mainly download old versions</li><li>VideoAdsSpeed: for those who can’t block ads and disguise speeding up skipping</li><li>Choicy, A-Bypass, Shadow: Blocking Jailbreak</li><li>Eyeplugs: notification blocking, similar to the Android game mode in the message do not disturb</li><li>Safari Plus: Bring your own browser enhancements</li><li>Tranzlo: translation plugin, free and powerful</li><li>CrackTool4: Crack part of the paid plug-ins</li><li>CyDown: cydia enhancements and paid plugins crack</li><li>Shortmoji 2: Native Input Method Enhancement</li></ul><h2 id="To-be-updated"><a href="#To-be-updated" class="headerlink" title="To be updated"></a>To be updated</h2><p>The list of plugins will be updated all the time, and the quality plugins I use will be updated and uploaded from time to time.</p>]]></content>
    
    
    <summary type="html">Personal jailbreak self-use plugins and jailbreak source backup directory, just in case. By the way, we recommend some conscientious authors.</summary>
    
    
    
    <category term="ios" scheme="https://vccv.cc/en/categories/ios/"/>
    
    <category term="backup" scheme="https://vccv.cc/en/categories/ios/backup/"/>
    
    
    <category term="jailbreak" scheme="https://vccv.cc/en/tags/jailbreak/"/>
    
    <category term="ios" scheme="https://vccv.cc/en/tags/ios/"/>
    
  </entry>
  
  <entry>
    <title>Cactus Use Fancybox Image Enlargement</title>
    <link href="https://vccv.cc/en/article/fancybox-cactus.html"/>
    <id>https://vccv.cc/en/article/fancybox-cactus.html</id>
    <published>2022-02-20T07:24:12.000Z</published>
    <updated>2022-02-20T07:24:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Causes"><a href="#Causes" class="headerlink" title="Causes"></a>Causes</h2><p>This blog theme cactus does not have a picture enlargement function, when looking at the tutorial pictures often appear too small text and can not see the situation clearly. After searching, I found this plugin <strong>fancybox</strong> which works well.</p><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>The following image is the official website of fancyapps, you can see that in addition to fancybox there are other Javascript UI libraries.</p><p><a data-fancybox="gallery" data-src="fancybox-cactus/image-20220220160055554.webp" data-caption=" fancyapps official website "><picture>               <source srcset="fancybox-cactus/image-20220220160055554.webp" type="image/webp">               <img src="fancybox-cactus/image-20220220160055554.png" alt=" fancyapps official website "></picture></a></p><h3 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><p>Go to <a href="https://fancyapps.com/docs/ui/installation">Documentation for fancybox</a> and see in the <strong>Installation</strong> section that we can install via npm and bring in directly via CDN. Since this is a blog site, I choose to bring it in directly via CDN.</p><blockquote><p>You can also use standalone UMD build by downloading the files or using directly from the CDN on your page:</p><ul><li><a href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js">https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js</a></li><li><a href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css">https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css</a></li></ul></blockquote><p>In the <strong>hexo-folder/themes/cactus/layout/_partial/head.ejs</strong> file, we introduce the css file by adding the code at the end of the head tag:</p><div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">fancybox</span>.<span class="property">enabled</span>) &#123;%&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></div><p>In the <strong>scripts.ejs</strong> file in the same directory, we introduce the js file by adding the code directly to the last line:</p><div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="title class_">FancyBox</span> --&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">fancybox</span>.<span class="property">enabled</span>) &#123;%&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></div><p>You can find that I added conditional judgments, so to add to the <strong>theme_config.yml</strong> file:</p><div class="highlight-wrap" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enable FancyBox</span></span><br><span class="line"><span class="attr">fancybox:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></div><p>As for whether to introduce it directly, it all depends on what you like.</p><h3 id="Modify-configuration"><a href="#Modify-configuration" class="headerlink" title="Modify configuration"></a>Modify configuration</h3><p>Continue to look at the official documentation can be found, we just need to simply img tag <strong>&lt;img</strong> outside of a layer of a tag <strong>&lt;a</strong>, plus the tag attribute <strong>data-fancybox</strong> <strong>data-src</strong> <strong>data-caption</strong>, you can achieve the function.</p><p>At first I planned to introduce the js script directly to modify it, but I found it useless. Then I thought, maybe hexo will render markdown to html at the moment after the external js script takes effect? I did not go deeper into the cause, if there are big brothers know these, welcome to comment pointing!</p><p>So I decided to try to see if I could start directly with the renderer. Searching for the default renderer for hexo is <strong>hexo-renderer-marked</strong>. In the <strong>hexo-folder/node_modules/hexo-renderer-marked/lib/renderer.js</strong> file, search for the keyword <strong>img</strong> and find the relevant code changes as follows:</p><div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Before</span></span><br><span class="line"><span class="keyword">let</span> out = <span class="string">`&lt;img src=&quot;<span class="subst">$&#123;encodeURL(href)&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (text) out += <span class="string">` alt=&quot;<span class="subst">$&#123;text&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (title) out += <span class="string">` title=&quot;<span class="subst">$&#123;title&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (lazyload) out += <span class="string">&#x27; loading=&quot;lazy&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">out += <span class="string">&#x27;&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// After</span></span><br><span class="line"><span class="keyword">let</span> out = <span class="string">`&lt;a data-fancybox=&quot;gallery&quot; data-src=&quot;<span class="subst">$&#123;href&#125;</span>&quot; data-caption=&quot;<span class="subst">$&#123;text&#125;</span>&quot;&gt;&lt;img src=&quot;<span class="subst">$&#123;encodeURL(href)&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (text) out += <span class="string">` alt=&quot;<span class="subst">$&#123;text&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (title) out += <span class="string">` title=&quot;<span class="subst">$&#123;title&#125;</span>&quot;`</span>;</span><br><span class="line"><span class="keyword">if</span> (lazyload) out += <span class="string">&#x27; loading=&quot;lazy&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">out += <span class="string">&#x27;&gt;&lt;/a&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure></div><h3 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h3><p>After executing the <strong>hexo clean &amp;&amp; hexo s</strong> preview, I found that the display is normal and the function is available, the problem is solved.</p><h2 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h2><p>Take a picture to see the effect.</p><p><a data-fancybox="gallery" data-src="fancybox-cactus/image-20220220172801964.webp" data-caption=" Final Results "><picture>               <source srcset="fancybox-cactus/image-20220220172801964.webp" type="image/webp">               <img src="fancybox-cactus/image-20220220172801964.png" alt=" Final Results "></picture></a></p><p>It’s so nice and satisfying hahaha.</p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://fancyapps.com/docs/ui/fancybox/">Fancybox</a></p>]]></content>
    
    
    <summary type="html">Install fancybox to hexo theme cactus some experience for your reference. fancybox can solve the problem of cactus theme images can not be enlarged, thanks to fancyapps to make a contribution.</summary>
    
    
    
    <category term="hexo" scheme="https://vccv.cc/en/categories/hexo/"/>
    
    <category term="beautify" scheme="https://vccv.cc/en/categories/hexo/beautify/"/>
    
    
    <category term="beautify" scheme="https://vccv.cc/en/tags/beautify/"/>
    
    <category term="cactus" scheme="https://vccv.cc/en/tags/cactus/"/>
    
    <category term="fancybox" scheme="https://vccv.cc/en/tags/fancybox/"/>
    
  </entry>
  
  <entry>
    <title>JetBrains Family Bucket Activation Tutorial 2022</title>
    <link href="https://vccv.cc/en/article/jetbrains-activate.html"/>
    <id>https://vccv.cc/en/article/jetbrains-activate.html</id>
    <published>2022-01-06T06:12:54.000Z</published>
    <updated>2023-09-30T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><blockquote><p>Valid for the entire JetBrains family of buckets, including IDEA, PyCharm, GoLand, WebStorm, etc.</p><p><strong>For personal use only</strong>!</p></blockquote><p>Before the tutorial, if you have installed an older version, I recommend to <strong>uninstall and reinstall</strong> to start.</p><table><thead><tr><th>IDE</th><th>Official Website Address</th></tr></thead><tbody><tr><td>IDEA</td><td><a href="https://www.jetbrains.com/idea/download/other.html">https://www.jetbrains.com/idea/download/other.html</a></td></tr><tr><td>PyCharm</td><td><a href="https://www.jetbrains.com/pycharm/download/other.html">https://www.jetbrains.com/pycharm/download/other.html</a></td></tr><tr><td>GoLand</td><td><a href="https://www.jetbrains.com/go/download/other.html">https://www.jetbrains.com/go/download/other.html</a></td></tr><tr><td>WebStorm</td><td><a href="https://www.jetbrains.com/webstorm/download/other.html">https://www.jetbrains.com/webstorm/download/other.html</a></td></tr></tbody></table><h2 id="Update-3"><a href="#Update-3" class="headerlink" title="Update 3"></a>Update 3</h2><p>Regardless of the software, it is recommended to use the latest version of 2021.3._. After testing, this version is the easiest to operate and the most stable.</p><p>After activation, please turn off automatic update checking in the settings (keyword: update).</p><h2 id="2021-Version-2-3-and-later"><a href="#2021-Version-2-3-and-later" class="headerlink" title="2021.Version 2.3 and later"></a>2021.Version 2.3 and later</h2><blockquote><p>As of January 6, 2022, the latest version for Mac is 2021.3.1.</p></blockquote><p>Starting with version 2021.2.3, the Jetbrains trial policy was updated: mandatory account login, trial period tied to account. At this time, we achieve activation by means of network interception.</p><h3 id="Mac-version"><a href="#Mac-version" class="headerlink" title="Mac version"></a>Mac version</h3><p>Because I am using the Mac version, the tutorial will be relatively more detailed.</p><ol><li><p>New download the IDE you need, if you have installed the unlimited trial, modified the hosts, please first <strong>Uninstall the old version and install it again</strong> , otherwise it can not be activated.</p><p>The following is an example of PyCharm.</p></li><li><p>Once installed, open it first, go to the activation page, <strong>Do not close</strong>, and then proceed with the following steps.</p></li><li><p>Download <a href="https://yuesir.lanzouo.com/ig1O9yg1uxe">ja-netfilter.zip</a> and unzip it to a location you can find.</p><blockquote><p>2022.04.17 Updated:</p><p>For the latest 2022.1 version of <a href="https://yuesir.lanzoum.com/iNlyJ03cykid">ja-netfilter.zip</a> .</p></blockquote></li><li><p>Open Access, click on <strong>Applications</strong> on the left side to find <strong>PyCharm</strong>, right click on the <strong>PyCharm</strong> icon and click on <strong>Show package contents</strong> .</p></li><li><p>Go to the <strong>Contents/bin</strong> directory and use a text editor to open the <strong>pycharm.vmoptions</strong> file.</p><blockquote><p>Recommended download for editing using <em>Sublime Text</em>.</p></blockquote></li><li><p>Add <code>-javaagent:/ABUSOLUTE-PATH/ja-netfilter.jar</code> at the end, remember to change it to your own <strong>Absolute path</strong> and save the file.</p></li><li><p>Exit PyCharm with the shortcut <strong>Command + Q</strong> .</p></li><li><p>Reopen, select <strong>Activate PyCharm</strong> and then click <strong>Activation Code</strong> .</p><blockquote><p>2022.04.17 Updated:</p><p>Another activation option is available here, which is even simpler.</p><p><a data-fancybox="gallery" data-src="jetbrains-activate/image-20220417181002264.webp" data-caption=" License server activation method "><picture>               <source srcset="jetbrains-activate/image-20220417181002264.webp" type="image/webp">               <img src="jetbrains-activate/image-20220417181002264.png" alt=" License server activation method "></picture></a></p><p>Select the <em>License Server</em> method (license server), enter the server address: <em><a href="https://jetbra.in/">https://jetbra.in</a></em> , and activate it.</p></blockquote></li><li><p>Copy the activation code below and paste it into the input box in the activation window and click <strong>Activate</strong>. Over!</p></li><li><p>Other: If you have not tried JetBrains products, you do not need to use the following activation code, just select Register Account to try when you open the IDE at <strong>Step 2</strong>, and the subsequent steps remain the same.</p></li></ol>   <div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFB45W18MX-eyJsaWNlbnNlSWQiOiJJRkI0NVcxOE1YIiwibGljZW5zZWVOYW1lIjoi5rC45LmF5r+A5rS7IHd3d8K3YWppaHVvwrdjb20iLCJhc3NpZ25lZU5hbWUiOiIiLCJhc3NpZ25lZUVtYWlsIjoiIiwibGljZW5zZVJlc3RyaWN0aW9uIjoiIiwiY2hlY2tDb25jdXJyZW50VXNlIjpmYWxzZSwicHJvZHVjdHMiOlt7ImNvZGUiOiJEUE4iLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IkRCIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJQUyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiSUkiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJTQyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJHTyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiRE0iLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJTRiIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJEUyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUEMiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJDIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJDTCIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiV1MiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJEIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJSUzAiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IlJNIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUlNWIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IkRDIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOmZhbHNlfSx7ImNvZGUiOiJSU1UiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6ZmFsc2V9LHsiY29kZSI6IkRQIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBEQiIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFNJIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBQUyIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQQ1dNUCIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQR08iLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFBDIiwicGFpZFVwVG8iOiIyMDIyLTAyLTA0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBSQiIsInBhaWRVcFRvIjoiMjAyMi0wMi0wNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQU1ciLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUlMiLCJwYWlkVXBUbyI6IjIwMjItMDItMDQiLCJleHRlbmRlZCI6dHJ1ZX1dLCJtZXRhZGF0YSI6IjAxMjAyMjAxMDVQUEFNMDAwMDA1IiwiaGFzaCI6IjI5NjkzNjI3LzA6LTIwNjkyMjgzNDciLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-MEkjEOAC1dEQpMqlge5gs64YYPdP1gNn0miz12/3xTQQ+bk8qMymnwKk/rCNNH8xe3DLneF+YMm0Orvz6QTTW12KeQ1uOPoOnBjDFvsjoT4NtzhXgVDYJ0lQlTapJFPTCyqfuir1RHw08SLPjAxFrQROVkR315E3oHCdmz8ZEB/sahLK081cgxrqFznXtLrSi17ZaCDvbO/0dhChY1dur6SnjOMTShytrRKc4w6/wn1lbfncBVL7pPMwzSOAgA5NPToC3uxDzEJh3Hhpip8okaa28dohFherPzHR9/jT2yh3Gyh2NraqoNtQTFoPwxkOYahKEw06jWrISRA1mH57tw==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDCP4uk4SlVdA5nuA3DQC+NsEnZS9npFnO0zrmMWcz1++q2UWJNuGTh0rwi+3fUJIArfvVh7gNtIp93rxjtrQAuf4/Fa6sySp4c32MeFACfC0q+oUoWebhOIaYTYUxm4LAZ355vzt8YeDPmvWKxA81udqEk4gU9NNAOz1Um5/8LyR8SGsSc4EDBRSjcMWMwMkYSauGqGcEUK8WhfplsyF61lKSOFA6VmfUmeDK15rUWWLbOMKgn2cxFA98A+s74T9Oo96CU7rp/umDXvhnyhAXSukw/qCGOVhwKR8B6aeDtoBWQgjnvMtPgOUPRTPkPGbwPwwDkvAHYiuKJ7Bd2wH7rAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBAB2J1ysRudbkqmkUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/wi9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD</span><br></pre></td></tr></table></figure></div><h3 id="Windows-version"><a href="#Windows-version" class="headerlink" title="Windows version"></a>Windows version</h3><p><del><strong>Step 4</strong> is different from the Mac version, others are similar:</del></p><ul><li><del>Next, find the <strong>vmoptions</strong> file in the IDE installation directory. Whether you are using <strong>IDEA</strong>, <strong>WebStorm</strong>, <strong>PyCharm</strong> or something else, the file name is <strong>xxxxx.vmoptions</strong> .</del></li></ul><ol><li><p>Perform steps 1-2 of the tutorial under Mac.</p></li><li><p>Clear any previously used activation methods.</p></li><li><p>Download <a href="https://yuesir.lanzouo.com/iGxtCzqu98d">Activation Script</a> and unzip it.</p><ul><li><p><strong>scripts</strong>: Scripts for automatic installation and uninstallation of cracked patches (including scripts for Windows, Mac and Linux systems) are placed.</p><blockquote><p>For the problem of not finding the <em>idea.vmoptions</em> file, this time it is much easier to introduce the patch directly by running the script.</p></blockquote></li><li><p><strong>vmoptions</strong> : JetBrains products are placed in the <strong>xxx.vmoptions</strong> The new version 2021.3.2 we can refer directly to this folder under <strong>xxx.vmoptions</strong> configuration file.</p></li></ul></li><li><p>Click to run the <strong>install-current-user.vbs</strong> script to install the crack patch for the current user.</p><blockquote><p><strong>install-all-users.vbs</strong> Installed for all users, not recommended.</p></blockquote></li><li><p>If a prompt pops up, click OK and wait a few seconds.</p></li><li><p>Perform steps 7-10 of the tutorial for Mac.</p><blockquote><p>After successful activation, the patch folder cann’t be moved or deleted, because the script will not find the corresponding file, and the activation will be invalid. So, just leave it in the dust, and don’t move it.</p></blockquote></li></ol><h3 id="Linux-version"><a href="#Linux-version" class="headerlink" title="Linux version"></a>Linux version</h3><p>Refer to the Windows version activation tutorial.</p><p>Step 4 Click Run <strong>install.sh</strong> script to install it.</p><h2 id="2021-Version-2-2-and-earlier"><a href="#2021-Version-2-2-and-earlier" class="headerlink" title="2021.Version 2.2 and earlier"></a>2021.Version 2.2 and earlier</h2><p>2021.2.2 and before versions, we can achieve permanent use by unlimited reset trial period patch.</p><ol><li><p>Installing plug-ins</p><p>Offline installation method:</p><p>1.1、Download the plug-in<br><a href="https://plugins.zhile.io/files/ide-eval-resetter-2.1.6.zip">Download Address</a></p><p>1.2、Install the plug-in</p><p>Download the plug-in zip package directly and drag the zip package directly into the IDE window to install the plug-in. If you can’t drag and drop the installation, you can manually install the plugin at <strong>(Install Plugin From Disk…)</strong> in <strong>Settings/Preferences… -&gt; Plugins</strong> and the plugin will prompt for successful installation.</p><hr><p>Online installation method:</p><p>Just search <strong>IDE Eval Reset</strong> to install it.</p></li><li><p>Using the plug-in</p><ul><li><p>After successful installation of the plugin, there will be an additional <strong>Eval Reset</strong> button under <strong>Help</strong>. Generally, when the IDE window is cut out or cut back (window loses/gains focus) it will trigger an event to detect if it has not been reset for a long time (25 days) and give you a notification to choose. (The first time you install it, you will be prompted directly)</p></li><li><p>The main interface of the plugin can also be called up manually at</p><p>If the IDE does not have the project open, click on the menu in the Welcome screen: <strong>Get Help -&gt; Eval Reset</strong>. If the IDE has opened the project, click on the menu: <strong>Help -&gt; Eval Reset</strong>. The main screen of the plug-in is brought up with 2 buttons and 1 checkbox.</p><ul><li>button: <strong>Reload</strong> is used to refresh the information displayed on the screen.</li><li>button: <strong>Reset</strong> Clicking on it will ask if you want to reset the trial information and restart the IDE. Select Yes to perform the reset and restart the IDE to take effect, or No to do nothing.</li><li>Check the box: <strong>Auto reset before per restart</strong> . When checked, the trial information will be automatically reset every time you restart/quit the IDE.</li></ul></li></ul></li></ol><h2 id="Success-Screenshot"><a href="#Success-Screenshot" class="headerlink" title="Success Screenshot"></a>Success Screenshot</h2><p><a data-fancybox="gallery" data-src="jetbrains-activate/image-20220106145338969.webp" data-caption=" Success Screenshot "><picture>               <source srcset="jetbrains-activate/image-20220106145338969.webp" type="image/webp">               <img src="jetbrains-activate/image-20220106145338969.png" alt=" Success Screenshot "></picture></a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/ja-netfilter/ja-netfilter">GitHub pengzhile</a></p><p><a href="https://www.macwk.com/article/jetbrains-crack">MacWk Pertim</a></p><h2 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h2><p>I have tested (under Mac environment), after upgrading to the latest version <strong>2021.3.2</strong>, the first method still works, only <strong>Repeat steps 4-7</strong> is needed, you can upgrade with no worries.</p><p>The official countermeasures seem to have been added under Windows, and the file can no longer be found in the user directory, so this time I have updated the corresponding part of the tutorial.</p><p>Also. After successful activation, it is recommended not to upgrade the new version, it works just fine, you say.</p><h2 id="Update-1"><a href="#Update-1" class="headerlink" title="Update 1"></a>Update 1</h2><p>2021.3.3 was updated successfully.</p><p><a data-fancybox="gallery" data-src="jetbrains-activate/image-20220321174826134.webp" data-caption=" 2021.3.3 version "><picture>               <source srcset="jetbrains-activate/image-20220321174826134.webp" type="image/webp">               <img src="jetbrains-activate/image-20220321174826134.png" alt=" 2021.3.3 version "></picture></a></p><h2 id="Update-2"><a href="#Update-2" class="headerlink" title="Update 2"></a>Update 2</h2><p>Mac version 2022.1, the previous failed, updated the article.</p><p><a data-fancybox="gallery" data-src="jetbrains-activate/image-20220417180532192.webp" data-caption=" 2022.1 version "><picture>               <source srcset="jetbrains-activate/image-20220417180532192.webp" type="image/webp">               <img src="jetbrains-activate/image-20220417180532192.png" alt=" 2022.1 version "></picture></a></p>]]></content>
    
    
    <summary type="html">This activation method is valid for all JetBrains family buckets, including IDEA, PyCharm, GoLand, WebStorm, etc., for personal learning reference only! If you have previously installed an older version, it is recommended to uninstall and reinstall and start fresh.</summary>
    
    
    
    <category term="macos" scheme="https://vccv.cc/en/categories/macos/"/>
    
    <category term="technique" scheme="https://vccv.cc/en/categories/macos/technique/"/>
    
    
    <category term="macos" scheme="https://vccv.cc/en/tags/macos/"/>
    
    <category term="crack" scheme="https://vccv.cc/en/tags/crack/"/>
    
    <category term="jetbrains" scheme="https://vccv.cc/en/tags/jetbrains/"/>
    
  </entry>
  
  <entry>
    <title>iOS Jailbreak Plugin PassBy Customization</title>
    <link href="https://vccv.cc/en/article/passby-fix.html"/>
    <id>https://vccv.cc/en/article/passby-fix.html</id>
    <published>2022-01-01T15:19:51.000Z</published>
    <updated>2022-01-01T15:19:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>I had heard about a plug-in for <strong>Smart Unlock</strong> called IntelligentPass 4. I found its official source and purchased it for $2.99 and discovered the “pain point” of such plug-ins, which is also the pain point of such plug-ins that can unlock by identifying secure Bluetooth devices.</p><blockquote><p>Since iOS7 you can not get the MAC address of the Bluetooth device directly from the API, you can only use the UUID to identify the device, it should be noted that the same device does not show the same UUID on different phones, so it can not be used for unique identification.</p></blockquote><p>But what I needed most was to use the Bluetooth auto-unlock feature in it, and after my constant attempts, that type of plugin was unable to discover my Amazfit watch device.</p><blockquote><p>By the way, after finding out that the plugin didn’t work for me, I immediately contacted the author of the plugin source by email to get help or a refund. But!!! No one gave a shit about me. I then went to Reddit and found out that this plugin store is not reputable and has no after sales service. Remember to avoid the pit, my $2.99 ah 😭.</p></blockquote><p>At this point, I found the open source project <strong>PassBy</strong> again and my eyes turned to it.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>On the issue of the project I found that there were also people who had such problems:</p><p><a data-fancybox="gallery" data-src="passby-fix/image-20220114222356631.webp" data-caption=" Question "><picture>               <source srcset="passby-fix/image-20220114222356631.webp" type="image/webp">               <img src="passby-fix/image-20220114222356631.png" alt=" Question "></picture></a></p><p>Fortunately, PassBy is an open source plugin, and I saw some insights mentioned in the comments under that issue earlier:</p><p><a data-fancybox="gallery" data-src="passby-fix/image-20220114222622805.webp" data-caption=" Comments "><picture>               <source srcset="passby-fix/image-20220114222622805.webp" type="image/webp">               <img src="passby-fix/image-20220114222622805.png" alt=" Comments "></picture></a></p><p>He says the <strong>BluetoothManager</strong> header used to get the Bluetooth device, can we get it by creating a version without <strong>if(name)</strong>.</p><p>Since then, I think I can modify the source code myself and add the name of the device I need inside the judgment. It can’t get my device, so I’ll add it myself and think it should still work 😂.</p><h3 id="Build-environment"><a href="#Build-environment" class="headerlink" title="Build environment"></a>Build environment</h3><p>After cloning the source code locally, I found that it was built via <strong>theos</strong>, so as a first step I had to set up the environment so that I could compile the plugin proper. theos’ <a href="https://theos.dev/docs/">Official Documents</a>is very detailed, and I’m on a Mac, so I followed its introduction about Mac systems to install.</p><p><a href="https://theos.dev/docs/installation-macos">Installation instructions for macOS</a>.</p><h3 id="Compilation"><a href="#Compilation" class="headerlink" title="Compilation"></a>Compilation</h3><p>After I built it, I tried to compile it first, but I found that PassBy needs <strong>iOS SDK</strong> version 13.3, but I didn’t find it in the official SDK provided by theos. Luckily, I found <a href="https://github.com/SniperGER/iOS13-Private-SDK">SniperGER provides the iOS 13.3 SDK</a> in Google.</p><blockquote><p>Copy the SDK folder(s) in sdks to $THEOS/sdks and the folder(s) in include to $THEOS/include.</p></blockquote><h3 id="Modify-source-code"><a href="#Modify-source-code" class="headerlink" title="Modify source code"></a>Modify source code</h3><p>Opened the <strong>Tweak.xm</strong> file (I used Sublime Text) and found the main function <strong>isUsingBT</strong> that controls this piece of Bluetooth functionality by searching for the keyword <strong>bluetooth</strong>, the original code is as follows:</p><div class="highlight-wrap" data-rel="Objc"><figure class="iseeu highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">BOOL</span> isUsingBT()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (useGracePeriodOnBT &amp;&amp; allowedBTs) &#123;</span><br><span class="line">        <span class="built_in">NSArray</span> * connectedDevices = [[BluetoothManager sharedInstance] connectedDevices];</span><br><span class="line">        <span class="keyword">for</span> (BluetoothDevice * bluetoothDevice <span class="keyword">in</span> connectedDevices) &#123;</span><br><span class="line">            <span class="built_in">NSString</span> * deviceName = [bluetoothDevice name];</span><br><span class="line">            <span class="keyword">if</span> (deviceName &amp;&amp; [deviceName length] &amp;&amp; [allowedBTs containsObject:SHA1(deviceName)]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>Because I was not familiar with the <strong>objective-c</strong> language, and did not go to the system to learn it, so I only relied on a little bit of learned C language to look at the bottom, and found that indeed, as mentioned above, the <strong>BluetoothManager</strong> header file used, where the most important logic is as follows:</p><div class="highlight-wrap" data-rel="Objc"><figure class="iseeu highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (deviceName &amp;&amp; [deviceName length] &amp;&amp; [allowedBTs containsObject:SHA1(deviceName)]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure></div><p>It stores the name of your allowed secure Bluetooth device <strong>deviceName</strong> into <strong>allowedBTs</strong> and I also found that it stores the data <strong>sha1</strong> value of <strong>devicename</strong> into the <strong>passbybt.plist</strong> file eventually:</p><div class="highlight-wrap" data-rel="Objc"><figure class="iseeu highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> BT_PLIST_PATH   <span class="string">&quot;/var/mobile/Library/Preferences/com.giorgioiavicoli.passbybt.plist&quot;</span></span></span><br></pre></td></tr></table></figure></div><p>So I modified the <strong>isUsingBT()</strong> function as follows:</p><div class="highlight-wrap" data-rel="Objc"><figure class="iseeu highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">BOOL</span> isUsingBT()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (useGracePeriodOnBT &amp;&amp; allowedBTs) &#123;</span><br><span class="line">        <span class="built_in">NSArray</span> * connectedDevices = [[BluetoothManager sharedInstance] connectedDevices];</span><br><span class="line">        <span class="keyword">for</span> (BluetoothDevice * bluetoothDevice <span class="keyword">in</span> connectedDevices) &#123;</span><br><span class="line">            <span class="built_in">NSString</span> * deviceName = [bluetoothDevice name];</span><br><span class="line">            <span class="keyword">if</span> (deviceName &amp;&amp; [deviceName length] &amp;&amp; [allowedBTs containsObject:SHA1(deviceName)]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ([allowedBTs containsObject:SHA1(<span class="string">@&quot;Amazfit GTS 2&quot;</span>)]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>Note: I need to add the device name <strong>Amazfit GTS 2</strong>, please modify it according to your personal situation!</p><h3 id="Modify-file"><a href="#Modify-file" class="headerlink" title="Modify file"></a>Modify file</h3><p>Above you see that it is storing the data <strong>sha1</strong> value of the device name in the file <strong>passbybt.plist</strong>. We found this file in the iPhone using <strong>Filza</strong> and found that it is indeed so, it is in a dictionary format.</p><table><thead><tr><th>sha1</th><th>bool</th></tr></thead><tbody><tr><td>063dc8e6c26233fc20a129a31403a642ea1095c4</td><td>true</td></tr><tr><td>811e9e206b053a4e02c74155bfa27b6c84e7dcad</td><td>true</td></tr></tbody></table><p>We can use the following web tool to generate the corresponding sha1 value for the device name and then add a new key-value pair: <a href="https://passwords-generator.org/sha1-hash-generator">SHA-1 Hash Generator</a> .</p><blockquote><p>2022.12.15 Updates.</p><p>Thanks to Vivian Chen for sending me an email alerting me that the site for generating sha1-hash is not working and for providing a new site, thanks again!</p><p><a data-fancybox="gallery" data-src="passby-fix/image-20221215103030016.webp" data-caption=" Generate sha1 values "><picture>               <source srcset="passby-fix/image-20221215103030016.webp" type="image/webp">               <img src="passby-fix/image-20221215103030016.png" alt=" Generate sha1 values "></picture></a></p><p><del>Special Updates.</del></p><p><del>The Lowercase hash option on the web page must be checked to convert all hash values to lowercase, always remember!!!</del></p></blockquote><p><a data-fancybox="gallery" data-src="passby-fix/image-20220113161956969.webp" data-caption=" Generate sha1 values "><picture>               <source srcset="passby-fix/image-20220113161956969.webp" type="image/webp">               <img src="passby-fix/image-20220113161956969.png" alt=" Generate sha1 values "></picture></a></p><h3 id="Packaged-and-Install"><a href="#Packaged-and-Install" class="headerlink" title="Packaged and Install"></a>Packaged and Install</h3><p>Create a new terminal in the PassBy project folder and enter the command <strong>make package</strong> to package the deb file and open it with Filza to install it.</p><p>Note: If the installation with <strong>Zebra</strong> does not work, modify the version number, open the <strong>control</strong> file in the root directory of PassBy, modify <strong>Version</strong> and then package and install it.</p><h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>After testing, I was able to unlock and use my Amazfit GTS 2 properly. Since I’m not familiar with Obejective-c language, I’m satisfied that I was able to solve the problem successfully, although the steps are still troublesome.</p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://github.com/giorgioiavicoli/PassBy">Github PassBy</a></p><p><a href="https://github.com/theos/theos">Github theos</a></p><h2 id="Update-1"><a href="#Update-1" class="headerlink" title="Update 1"></a>Update 1</h2><p>I found after using the plugin for a while that my phone would have an extra two or three seconds of black screen when lit. Sure enough, on GitHub this just found that someone also mentioned this problem, limited to my technical inability to know what this problem is and how to solve it, so I gave up on this plug-in.</p><p><a data-fancybox="gallery" data-src="passby-fix/image-20220114234532701.webp" data-caption=" Black screen bug "><picture>               <source srcset="passby-fix/image-20220114234532701.webp" type="image/webp">               <img src="passby-fix/image-20220114234532701.png" alt=" Black screen bug "></picture></a></p><h2 id="Update-2"><a href="#Update-2" class="headerlink" title="Update 2"></a>Update 2</h2><p>If there is a failure to compile error, prompting <strong>File Not Found</strong>, do the following as prompted in the compilation section.</p><blockquote><p>Copy the SDK folder(s) in sdks to $THEOS/sdks and the folder(s) in include to $THEOS/include.</p></blockquote><p>This operation is also shown in the SDK author’s ReadME file on GitHub, please read it in detail.</p><h2 id="Update-3"><a href="#Update-3" class="headerlink" title="Update 3"></a>Update 3</h2><p>In view of my technical inability, according to the article so modified, security aspects seem to be some problems, and I do not know how to improve.</p><p>If you don’t mind and don’t know how to compile, you can leave a message in the comments section at <strong>Equipment name</strong> and I will compile it for you.</p><p>After installation, the device does not appear inside the device list of the plugin settings, i.e. it does not change. Just remember <em><strong>In the passbybt.plist file, change the value to true for on and false for off</strong></em> .</p>]]></content>
    
    
    <summary type="html">I have heard about some smart unlocking plugins like IntelligentPass 4 and PassBy, and I found the &quot;pain point&quot; of these plugins: the Bluetooth unlocking feature is disabled. By modifying the source code of PassBy, we can solve this problem sideways.</summary>
    
    
    
    <category term="ios" scheme="https://vccv.cc/en/categories/ios/"/>
    
    <category term="crack" scheme="https://vccv.cc/en/categories/ios/crack/"/>
    
    
    <category term="jailbreak" scheme="https://vccv.cc/en/tags/jailbreak/"/>
    
    <category term="ios" scheme="https://vccv.cc/en/tags/ios/"/>
    
    <category term="passby" scheme="https://vccv.cc/en/tags/passby/"/>
    
  </entry>
  
  <entry>
    <title>Cactus&#39;s Codeblock Style Beautification Tour</title>
    <link href="https://vccv.cc/en/article/cactus-codeblock-beautify.html"/>
    <id>https://vccv.cc/en/article/cactus-codeblock-beautify.html</id>
    <published>2021-12-27T07:42:28.000Z</published>
    <updated>2021-12-27T07:42:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Antecedents"><a href="#Antecedents" class="headerlink" title="Antecedents"></a>Antecedents</h2><p>I do not like cactus’s original codeblock style very much. Because I used to use wordpress theme, which has the style of imitation mac. But cactus does not have the style settings for the code block, so I decided to do it myself and revamp the theme!</p><h2 id="After"><a href="#After" class="headerlink" title="After"></a>After</h2><p>I’m glad I found a tutorial on the internet, although it’s not a handy tutorial exclusively for cactus, but after a period of time, I managed to solve it hahaha 😂 I’d like to thank the original author here.</p><p>As usual, share it to those who come later, so as not to waste time by repeatedly building the wheel.</p><ol><li><p>It is recommended to browse through the original tutorial: <a href="https://blog.imlete.cn/article/Hexo-add-CodeBlock.html">Hexo-Add codeblock borders</a> .</p></li><li><p>The following modifications are specific to the cactus theme and are for reference only.</p><ul><li><p>Find the <strong>style.styl</strong> file for the topic in the <strong>source/css</strong> directory and modify the corresponding location of the code as follows:</p><div class="highlight-wrap" data-rel="Styl"><figure class="iseeu highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Code</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/codeFrame&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/theme&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/diff&#x27;</span></span><br><span class="line">...................</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlight</span></span><br><span class="line"><span class="attribute">margin</span>: <span class="number">2rem</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></div></li><li><p>In the same location of the above file <code>.highlight</code>code block will</p><p><code>border-radius: 4px</code> Deletion.</p><p><code>background: $color-background-code</code> Delete.</p></li><li><p>Same as above add properties to <code>.btn-copy</code> <code>top: 0.2rem</code>.</p></li></ul></li><li><p>Finally I deleted all the original files from the <strong>_highlight</strong> folder, leaving only the three new files.</p><p><a data-fancybox="gallery" data-src="cactus-codeblock-beautify/image-20211227223103409.webp" data-caption=" Modify file "><picture>               <source srcset="cactus-codeblock-beautify/image-20211227223103409.webp" type="image/webp">               <img src="cactus-codeblock-beautify/image-20211227223103409.png" alt=" Modify file "></picture></a></p></li><li><p>Attention：</p><ul><li>The third step in the original tutorial I found I could just skip because the code related to the cactus code block is in the <strong>style.styl</strong> file.</li><li>To change the different highlighting styles for code blocks, simply change the <strong>diff.styl</strong> file.</li></ul></li></ol><h2 id="Final-Results"><a href="#Final-Results" class="headerlink" title="Final Results"></a>Final Results</h2><p>Before modification:</p><p><a data-fancybox="gallery" data-src="cactus-codeblock-beautify/image-20211227223503492.webp" data-caption=" Before modification "><picture>               <source srcset="cactus-codeblock-beautify/image-20211227223503492.webp" type="image/webp">               <img src="cactus-codeblock-beautify/image-20211227223503492.png" alt=" Before modification "></picture></a></p><p> After modification:</p><p><a data-fancybox="gallery" data-src="cactus-codeblock-beautify/image-20211227172137422.webp" data-caption=" After modification "><picture>               <source srcset="cactus-codeblock-beautify/image-20211227172137422.webp" type="image/webp">               <img src="cactus-codeblock-beautify/image-20211227172137422.png" alt=" After modification "></picture></a></p><p>I am personally satisfied with the drop, the color scheme all depends on your own play haha.</p>]]></content>
    
    
    <summary type="html">I do not like cactus&#39;s original codeblock style very much. Because I used to use wordpress theme, which has the style of imitation mac. But cactus does not have the style settings for the code block, so I decided to do it myself and revamp the theme!</summary>
    
    
    
    <category term="hexo" scheme="https://vccv.cc/en/categories/hexo/"/>
    
    <category term="beautify" scheme="https://vccv.cc/en/categories/hexo/beautify/"/>
    
    
    <category term="codeblock" scheme="https://vccv.cc/en/tags/codeblock/"/>
    
    <category term="beautify" scheme="https://vccv.cc/en/tags/beautify/"/>
    
    <category term="cactus" scheme="https://vccv.cc/en/tags/cactus/"/>
    
  </entry>
  
  <entry>
    <title>iOS Jailbroken Devices Also to Play Genshin Impact</title>
    <link href="https://vccv.cc/en/article/ios-jailbreak-genshin.html"/>
    <id>https://vccv.cc/en/article/ios-jailbreak-genshin.html</id>
    <published>2021-12-23T14:29:23.000Z</published>
    <updated>2022-09-30T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Update-3"><a href="#Update-3" class="headerlink" title="Update 3"></a>Update 3</h2><p>After the feedback in the comment section, as of 2022/07/16 the latest version of the iOS version, the shielding plug-in in the article download link can still be used normally.</p><p>In view of the unstable update of the BigBoss source, it is recommended to use the first version of the plug-in inside the article download link.</p><h2 id="What-happened"><a href="#What-happened" class="headerlink" title="What happened"></a>What happened</h2><p>On 2021-12-22 at 14:00, the Genshin Impact on the iOS also started to detect the jailbroken device, prompting “Data abnormal, please log in again”.</p><p><a data-fancybox="gallery" data-src="ios-jailbreak-genshin/img.webp" data-caption=" Official Warning "><picture>               <source srcset="ios-jailbreak-genshin/img.webp" type="image/webp">               <img src="ios-jailbreak-genshin/img.png" alt=" Official Warning "></picture></a></p><h2 id="After"><a href="#After" class="headerlink" title="After"></a>After</h2><p>I searched for keywords on GitHub and found a foreign brother who had released a jailbreak plugin six days ago.</p><p>BUT!!!</p><p>The original author mistakenly misspelled the name of the Genshin Impact’s package in China as follows:</p><p><a data-fancybox="gallery" data-src="ios-jailbreak-genshin/error.webp" data-caption=" Error Code "><picture>               <source srcset="ios-jailbreak-genshin/error.webp" type="image/webp">               <img src="ios-jailbreak-genshin/error.png" alt=" Error Code "></picture></a></p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Original code:</p><div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; Filter = &#123; Bundles = ( &quot;com.miHoYo.GenshinImpact&quot;, &quot;com.miHoYo.Yanshen&quot; ); &#125;; &#125;</span><br></pre></td></tr></table></figure></div><p>Correction to:</p><div class="highlight-wrap" data-rel="Code"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; Filter = &#123; Bundles = ( &quot;com.miHoYo.GenshinImpact&quot;, &quot;com.miHoYo.Yuanshen&quot; ); &#125;; &#125;</span><br></pre></td></tr></table></figure></div><p>I unpacked and modified the deb package packed by the original author and recompiled it for distribution, doing a small and insignificant thing.</p><h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>By my test, the Genshin Impact national service has been able to run normally, the international service to be tested.</p><blockquote><p>Test Equipment:</p><p>Model: 12mini</p><p>iOS version: 14.2.1</p><p>Jailbreak software: unc0ver</p></blockquote><h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><p><a href="https://yuesir.lanzouo.com/iejurxwygaf">Lanzou Cloud</a></p><h2 id="Thanks🙏"><a href="#Thanks🙏" class="headerlink" title="Thanks🙏"></a>Thanks🙏</h2><p><a href="https://github.com/iVoider/GenshinJailbreakBypass">Github iVoider</a></p><h2 id="Update-1"><a href="#Update-1" class="headerlink" title="Update 1"></a>Update 1</h2><p>The author has uploaded a maintenance plugin on BigBoss source called <strong>原神（国服）屏蔽越狱</strong> . It has been tested and works fine, please go ahead and download and install it directly.</p><h2 id="Update-2"><a href="#Update-2" class="headerlink" title="Update 2"></a>Update 2</h2><p>The plugin has been renamed to <strong>原神防越狱检测</strong> .</p>]]></content>
    
    
    <summary type="html">On 2021-12-22 14:00, the Genshin Imapct began to detect jailbreak devices, prompting &quot;data exception, please re-login&quot;. I searched for keywords on GitHub and found a shield jailbreak plugin and modified it to work properly on the iOS.</summary>
    
    
    
    <category term="ios" scheme="https://vccv.cc/en/categories/ios/"/>
    
    <category term="crack" scheme="https://vccv.cc/en/categories/ios/crack/"/>
    
    
    <category term="genshin impact" scheme="https://vccv.cc/en/tags/genshin-impact/"/>
    
    <category term="jailbreak" scheme="https://vccv.cc/en/tags/jailbreak/"/>
    
    <category term="ios" scheme="https://vccv.cc/en/tags/ios/"/>
    
  </entry>
  
  <entry>
    <title>Python Notebook</title>
    <link href="https://vccv.cc/en/article/python-notebook.html"/>
    <id>https://vccv.cc/en/article/python-notebook.html</id>
    <published>2021-10-05T14:59:01.000Z</published>
    <updated>2021-10-05T14:59:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Life is not easy, exams too.</p></blockquote><ul><li>Python Programming from Beginning to Practice is Python 3.5, while in Python 3.6 the internal algorithm of dict was rewritten, hence <strong>3.6 dict is ordered, prior to this version it was unordered</strong>. <a href="https://legacy.python.org/dev/peps/pep-0468/">Reference Links</a></li><li>String formatting <code>f&#39;Results of the &#123;event&#125;&#39;</code></li></ul>]]></content>
    
    
    <summary type="html">The blogger&#39;s personal python learning notebook, recording the key points encountered in the learning process. python programming from the beginning to the ground!</summary>
    
    
    
    <category term="thinking" scheme="https://vccv.cc/en/categories/thinking/"/>
    
    <category term="note" scheme="https://vccv.cc/en/categories/thinking/note/"/>
    
    
    <category term="python" scheme="https://vccv.cc/en/tags/python/"/>
    
    <category term="study" scheme="https://vccv.cc/en/tags/study/"/>
    
    <category term="notebook" scheme="https://vccv.cc/en/tags/notebook/"/>
    
  </entry>
  
</feed>