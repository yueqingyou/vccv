<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><script src="/sw-register.js"></script><meta name="description" content="Backed up the process of configuring aria2 under the macOS and cooperating with many plug-ins in Chrome browser to download multithreading and many other functions. Most of them are shared by GitHub a"><meta property="og:type" content="article"><meta property="og:title" content="MacOS User&#39;s Aria2 Configuration"><meta property="og:url" content="https://vccv.cc/en/article/aria2-mac.html"><meta property="og:site_name" content="Yuesir"><meta property="og:description" content="Backed up the process of configuring aria2 under the macOS and cooperating with many plug-ins in Chrome browser to download multithreading and many other functions. Most of them are shared by GitHub a"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://vccv.cc/en/article/aria2-mac/image-20220319180124115.png"><meta property="og:image" content="https://vccv.cc/en/article/aria2-mac/image-20220319180542315.png"><meta property="og:image" content="https://vccv.cc/en/article/aria2-mac/QQ20220319-175017.gif"><meta property="article:published_time" content="2022-03-19T08:49:15.000Z"><meta property="article:modified_time" content="2022-03-19T08:49:15.000Z"><meta property="article:author" content="Yuesir"><meta property="article:tag" content="macos"><meta property="article:tag" content="aria2"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://vccv.cc/en/article/aria2-mac/image-20220319180124115.png"><link rel="shortcut icon" href="/en/images/favicon.ico"><link rel="icon" type="image/png" href="/en/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon.png"><title>MacOS User&#39;s Aria2 Configuration｜Yuesir</title><link rel="stylesheet" href="/en/css/style.css"><link rel="stylesheet" href="/en/css/style-dark.css"><script src="/en/js/switch.js"></script><link rel="stylesheet" href="/en/css/fancybox.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/en/atom.xml" title="Yuesir" type="application/atom+xml">
</head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="Previous post" href="/en/article/takagi-san.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="Next post" href="/en/article/qinglong-jd.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="Back to top" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="Switch theme"><i class="fas fa-lightbulb" aria-hidden="true" onmouseover='$("#i-switch").toggle()' onmouseout='$("#i-switch").toggle()' onclick="switchNightMode()"></i></a></li><li><a class="icon" aria-label="Back to home" href="/en/"><i class="fas fa-home" aria-hidden="true" onmouseover='$("#i-home").toggle()' onmouseout='$("#i-home").toggle()'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-switch" class="info" style="display:none">Switch theme</span> <span id="i-home" class="info" style="display:none">Back to home</span></span><br><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-Aria2"><span class="toc-number">1.1.</span> <span class="toc-text">What is Aria2?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preparation-before-configuration"><span class="toc-number">1.2.</span> <span class="toc-text">Preparation before configuration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-and-configure-Aria2"><span class="toc-number">2.</span> <span class="toc-text">Install and configure Aria2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-to-self-boot"><span class="toc-number">3.</span> <span class="toc-text">Set to self-boot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-user%E2%80%99s-startup-file"><span class="toc-number">3.1.</span> <span class="toc-text">Create a user’s startup file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-and-enable-self-startup-files"><span class="toc-number">3.2.</span> <span class="toc-text">Add and enable self-startup files</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-automatic-update-BT-tracker-function"><span class="toc-number">4.</span> <span class="toc-text">Add automatic update BT tracker function</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-trackers-list-aria2-sh-script"><span class="toc-number">4.1.</span> <span class="toc-text">Create a trackers-list-aria2.sh script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Set-up-the-task-scheduler-to-achieve-automatic-updates"><span class="toc-number">4.2.</span> <span class="toc-text">Set up the task scheduler to achieve automatic updates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-Download-Notification"><span class="toc-number">4.3.</span> <span class="toc-text">Add Download-Notification</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-download-complete-hook-sh-script"><span class="toc-number">4.4.</span> <span class="toc-text">Create a download-complete-hook.sh script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-Hook-Settings"><span class="toc-number">4.5.</span> <span class="toc-text">Add Hook Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aria2-web-UI"><span class="toc-number">5.</span> <span class="toc-text">Aria2 web UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PRC-Setting"><span class="toc-number">5.1.</span> <span class="toc-text">PRC Setting</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-the-browser-download-plug-in"><span class="toc-number">6.</span> <span class="toc-text">Install the browser download plug-in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-only"><span class="toc-number">7.</span> <span class="toc-text">Reference only</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Download-the-file-from-the-network-disk"><span class="toc-number">7.1.</span> <span class="toc-text">Download the file from the network disk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Usage"><span class="toc-number">7.1.1.</span> <span class="toc-text">Usage</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Thanks"><span class="toc-number">8.</span> <span class="toc-text">Thanks</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><a href="javascript:void(0);" onclick="switchNightMode()"><h1 class="posttitle" itemprop="name headline">MacOS User&#39;s Aria2 Configuration</h1></a><div class="meta"><div class="postdate">Posted: <time datetime="2022-03-19T08:49:15.000Z" itemprop="datePublished">2022-03-19</time> (Updated: <time datetime="2022-03-19T08:49:15.000Z" itemprop="dateModified">2022-03-19</time>)</div><div class="article-category"><i class="fas fa-archive"></i> <a class="category-link" href="/en/categories/macos/">macos</a> › <a class="category-link" href="/en/categories/macos/technique/">technique</a></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link-link" href="/en/tags/aria2/" rel="tag">aria2</a>, <a class="tag-link-link" href="/en/tags/macos/" rel="tag">macos</a></div></div></header><div class="content" itemprop="articleBody"><h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><h3 id="What-is-Aria2"><a href="#What-is-Aria2" class="headerlink" title="What is Aria2?"></a>What is Aria2?</h3><blockquote><p>Aria2 is a free, cross-platform command line interface download manager that supports HTTP, HTTPS, FTP, Bittorrent and Metalink.</p><p>Another feature of Aria2 is that you can use JSON-RPC and XML-RPC for HTTP remote download control, and the JSON-RPC interface is available through WebSocket.</p></blockquote><p>I mainly use to download seed Bittorrent files and multithreaded downloads.</p><h3 id="Preparation-before-configuration"><a href="#Preparation-before-configuration" class="headerlink" title="Preparation before configuration"></a>Preparation before configuration</h3><ul><li><p>Installed <a target="_blank" rel="noopener" href="https://brew.sh/index_zh-cn">Homebrew</a> 。</p></li><li><p>Ability of using <strong>vim</strong> or other editors.</p><blockquote><p>Common commands:</p><p>Press the <em>i</em> key in the open vim interface to enter edit mode; Press the <em>Esc</em> key to exit edit mode and enter command line mode; Use the <em><strong>:wq</strong></em> command to save and exit.</p></blockquote></li></ul><h2 id="Install-and-configure-Aria2"><a href="#Install-and-configure-Aria2" class="headerlink" title="Install and configure Aria2"></a>Install and configure Aria2</h2><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install aria2 by Homebrew</span></span><br><span class="line">brew install aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create aria2.conf and aria2.session files</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/.aria2 &amp;&amp; <span class="built_in">cd</span> ~/.aria2</span><br><span class="line"><span class="built_in">touch</span> aria2.conf</span><br><span class="line"><span class="built_in">touch</span> aria2.session</span><br></pre></td></tr></table></figure></div><p>Edit the configuration file <strong>aria2.conf</strong> :</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">## 文件保存相关 ##</span><br><span class="line"></span><br><span class="line"># 文件的保存路径(可使用绝对路径或相对路径)<span class="punctuation">,</span> 默认<span class="punctuation">:</span> Mac下Downloads下载文件夹</span><br><span class="line">dir=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/Downloads</span><br><span class="line"># 启用磁盘缓存<span class="punctuation">,</span> <span class="number">0</span>为禁用缓存<span class="punctuation">,</span> 需<span class="number">1.16</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">16</span>M</span><br><span class="line">disk-cache=<span class="number">32</span>M</span><br><span class="line"># 文件预分配方式<span class="punctuation">,</span> 能有效降低磁盘碎片<span class="punctuation">,</span> 默认<span class="punctuation">:</span>prealloc</span><br><span class="line"># 预分配所需时间<span class="punctuation">:</span> none &lt; falloc ? trunc &lt; prealloc</span><br><span class="line"># falloc和trunc则需要文件系统和内核支持</span><br><span class="line"># NTFS建议使用falloc<span class="punctuation">,</span> EXT3/<span class="number">4</span>建议trunc<span class="punctuation">,</span> MAC 下需要注释此项</span><br><span class="line">#file-allocation=none</span><br><span class="line"># 断点续传</span><br><span class="line">continue=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## 下载连接相关 ##</span><br><span class="line"></span><br><span class="line"># 最大同时下载任务数<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-concurrent-downloads=<span class="number">5</span></span><br><span class="line"># 同一服务器连接数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span> 最大值<span class="number">16</span></span><br><span class="line">max-connection-per-server=<span class="number">5</span></span><br><span class="line"># 最小文件分片大小<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 取值范围<span class="number">1</span>M <span class="number">-1024</span>M<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">20</span>M</span><br><span class="line"># 假定size=<span class="number">10</span>M<span class="punctuation">,</span> 文件为<span class="number">20</span>MiB 则使用两个来源下载; 文件为<span class="number">15</span>MiB 则使用一个来源下载</span><br><span class="line">min-split-size=<span class="number">10</span>M</span><br><span class="line"># 单个任务最大线程数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#split=<span class="number">5</span></span><br><span class="line"># 分片选择算法<span class="punctuation">,</span>有助于视频的边下边播同时兼顾减少建立连接的次数</span><br><span class="line">stream-piece-selector=geom</span><br><span class="line"># 整体下载速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-download-limit=<span class="number">0</span></span><br><span class="line"># 单个任务下载速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-download-limit=<span class="number">0</span></span><br><span class="line"># 整体上传速度限制<span class="punctuation">,</span> 运行时可修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-overall-upload-limit=<span class="number">0</span></span><br><span class="line"># 单个任务上传速度限制<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#max-upload-limit=<span class="number">0</span></span><br><span class="line"># 禁用IPv6<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">#disable-ipv6=<span class="keyword">true</span></span><br><span class="line"># 连接超时时间<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">60</span></span><br><span class="line">#timeout=<span class="number">60</span></span><br><span class="line"># 最大重试次数<span class="punctuation">,</span> 设置为<span class="number">0</span>表示不限制重试次数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">#max-tries=<span class="number">5</span></span><br><span class="line"># 设置重试等待的秒数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">#retry-wait=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">## 进度保存相关 ##</span><br><span class="line"></span><br><span class="line"># 日志文件</span><br><span class="line">log-level=notice</span><br><span class="line">log=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.log</span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line"># 需提前创建一个空文件否则会报错</span><br><span class="line">input-file=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 在Aria2退出时保存`错误/未完成`的下载任务到会话文件</span><br><span class="line">save-session=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/aria2.session</span><br><span class="line"># 定时保存会话<span class="punctuation">,</span> <span class="number">0</span>为退出时才保存<span class="punctuation">,</span> 需<span class="number">1.16</span><span class="number">.1</span>以上版本<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">0</span></span><br><span class="line">save-session-interval=<span class="number">60</span></span><br><span class="line"></span><br><span class="line"># 强制保存会话<span class="punctuation">,</span> 即使任务已经完成<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span><br><span class="line">#force-save=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">## RPC相关设置 ##</span><br><span class="line"></span><br><span class="line"># 启用RPC<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">enable-rpc=<span class="keyword">true</span></span><br><span class="line"># 允许所有来源<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-allow-origin-all=<span class="keyword">true</span></span><br><span class="line"># 允许非外部访问<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">rpc-listen-all=<span class="keyword">true</span></span><br><span class="line"># RPC监听端口<span class="punctuation">,</span> 端口被占用时可以修改<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6800</span></span><br><span class="line">rpc-listen-port=<span class="number">6800</span></span><br><span class="line"># 设置的RPC授权令牌</span><br><span class="line"># 此处使用`openssl rand -base64 <span class="number">32</span>`命令生成&lt;TOKEN&gt;</span><br><span class="line"># 此次需要自行配置，将&lt;TOKEN&gt;整体替换为你的RPC“密码”</span><br><span class="line">rpc-secret=&lt;TOKEN&gt;</span><br><span class="line"># 是否启用 RPC 服务的 SSL/TLS 加密<span class="punctuation">,</span></span><br><span class="line"># 启用加密后 RPC 服务需要使用 https 或者 wss 协议连接</span><br><span class="line">#rpc-secure=<span class="keyword">true</span></span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的证书文件<span class="punctuation">,</span></span><br><span class="line"># 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥</span><br><span class="line">#rpc-certificate=/path/to/certificate.pem</span><br><span class="line"># 在 RPC 服务中启用 SSL/TLS 加密时的私钥文件</span><br><span class="line">#rpc-private-key=/path/to/certificate.key</span><br><span class="line"></span><br><span class="line">## HTTP 设置 ##</span><br><span class="line"></span><br><span class="line"># 自定义 User Agent</span><br><span class="line">user-agent=Mozilla/<span class="number">5.0</span> (Macintosh; Intel Mac OS X <span class="number">10</span>_15_1) AppleWebKit/<span class="number">537.36</span> (KHTML<span class="punctuation">,</span> like Gecko) Chrome/<span class="number">80.0</span><span class="number">.3987</span><span class="number">.85</span> Safari/<span class="number">537.36</span></span><br><span class="line"></span><br><span class="line">## BT/PT下载相关 ##</span><br><span class="line"></span><br><span class="line"># 当下载的是一个种子(以.torrent结尾)时<span class="punctuation">,</span> 自动开始BT任务<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">follow-torrent=<span class="keyword">true</span></span><br><span class="line"># BT监听端口<span class="punctuation">,</span> 当端口被屏蔽时使用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 单个种子最大连接数<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">55</span></span><br><span class="line">#bt-max-peers=<span class="number">55</span></span><br><span class="line"></span><br><span class="line">### DHT 功能<span class="punctuation">,</span> 仅对 BT 生效<span class="punctuation">,</span> PT 无效###</span><br><span class="line"># 打开 DHT (IPv4) 功能</span><br><span class="line">enable-dht=<span class="keyword">true</span></span><br><span class="line"># 打开 DHT (IPv6) 功能</span><br><span class="line">enable-dht6=<span class="keyword">true</span></span><br><span class="line"># DHT网络监听端口<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">6881</span><span class="number">-6999</span></span><br><span class="line">dht-listen-port=<span class="number">6881</span><span class="number">-6999</span></span><br><span class="line"># 本地节点查找</span><br><span class="line">bt-enable-lpd=<span class="keyword">true</span></span><br><span class="line"># 种子交换</span><br><span class="line">enable-peer-exchange=<span class="keyword">true</span></span><br><span class="line"># DHT (IPv4) 路由表文件路径</span><br><span class="line">dht-file-path=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht.dat</span><br><span class="line"># DHT (IPv6) 路由表文件路径</span><br><span class="line">dht-file-path6=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/dht6.dat</span><br><span class="line"></span><br><span class="line"># 客户端伪装<span class="punctuation">,</span> PT需要</span><br><span class="line">peer-id-prefix=-UT341-</span><br><span class="line">peer-agent=uTorrent/<span class="number">341</span>(<span class="number">109279400</span>)(<span class="number">30888</span>)</span><br><span class="line"></span><br><span class="line"># 同一服务器连接数</span><br><span class="line"># 每个种子限速<span class="punctuation">,</span> 对少种的PT很有用<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">50</span>K</span><br><span class="line">#bt-request-peer-speed-limit=<span class="number">50</span>K</span><br><span class="line"># 当种子的分享率达到这个数时<span class="punctuation">,</span> 自动停止做种<span class="punctuation">,</span> <span class="number">0</span>为一直做种<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">1.0</span></span><br><span class="line">seed-ratio=<span class="number">0</span></span><br><span class="line"># BT校验相关<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">true</span></span><br><span class="line">#bt-hash-check-seed=<span class="keyword">true</span></span><br><span class="line"># 继续之前的BT任务时<span class="punctuation">,</span> 无需再次校验<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-seed-unverified=<span class="keyword">true</span></span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent文件)<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="keyword">false</span></span><br><span class="line">bt-save-metadata=<span class="keyword">true</span></span><br><span class="line"></span><br><span class="line"># BT 服务器地址</span><br><span class="line"># 逗号分隔的 BT 服务器地址. 如果服务器地址在 --bt-exclude-tracker 选项中<span class="punctuation">,</span> 其将不会生效.</span><br><span class="line">bt-tracker=udp<span class="punctuation">:</span><span class="comment">//tracker.coppersurfer.tk:6969/announce,udp://tracker.leechers-paradise.org:6969/announce,udp://tracker.opentrackr.org:1337/announce,udp://p4p.arenabg.com:1337/announce,udp://9.rarbg.to:2710/announce,udp://9.rarbg.me:2710/announce,udp://tracker.internetwarriors.net:1337/announce,udp://exodus.desync.com:6969/announce,udp://tracker.tiny-vps.com:6969/announce,udp://tracker.moeking.me:6969/announce,udp://retracker.lanta-net.ru:2710/announce,udp://open.stealth.si:80/announce,udp://open.demonii.si:1337/announce,udp://tracker.torrent.eu.org:451/announce,udp://tracker.cyberia.is:6969/announce,udp://denis.stalker.upeer.me:6969/announce,udp://tracker3.itzmx.com:6961/announce,udp://ipv4.tracker.harry.lu:80/announce,udp://valakas.rollo.dnsabr.com:2710/announce,udp://tracker.nyaa.uk:6969/announce,udp://retracker.netbynet.ru:2710/announce,udp://opentor.org:2710/announce,udp://explodie.org:6969/announce,http://explodie.org:6969/announce,udp://zephir.monocul.us:6969/announce,udp://xxxtor.com:2710/announce,udp://tracker.zum.bi:6969/announce,udp://tracker.yoshi210.com:6969/announce,udp://tracker.uw0.xyz:6969/announce,udp://tracker.sbsub.com:2710/announce,udp://tracker.lelux.fi:6969/announce,udp://tracker.iamhansen.xyz:2000/announce,udp://tracker.filemail.com:6969/announce,udp://tracker.dler.org:6969/announce,udp://retracker.sevstar.net:2710/announce,udp://retracker.akado-ural.ru:80/announce,udp://open.nyap2p.com:6969/announce,udp://chihaya.toss.li:9696/announce,udp://bt2.archive.org:6969/announce,udp://bt1.archive.org:6969/announce,udp://bt.okmp3.ru:2710/announce,https://tracker.nanoha.org:443/announce,http://tracker.torrentyorg.pl:80/announce,http://tracker.opentrackr.org:1337/announce,http://tracker.internetwarriors.net:1337/announce,http://tracker.bt4g.com:2095/announce,http://t.nyaatracker.com:80/announce,http://retracker.sevstar.net:2710/announce,http://pow7.com:80/announce,http://mail2.zelenaya.net:80/announce,http://h4.trakx.nibba.trade:80/announce,udp://tracker4.itzmx.com:2710/announce,udp://tracker2.itzmx.com:6961/announce,udp://tracker.zerobytes.xyz:1337/announce,udp://tracker.swateam.org.uk:2710/announce,udp://tr.bangumi.moe:6969/announce,udp://qg.lorzl.gq:2710/announce,udp://opentracker.i2p.rocks:6969/announce,udp://bt2.54new.com:8080/announce,https://tracker.opentracker.se:443/announce,https://tracker.lelux.fi:443/announce,http://www.loushao.net:8080/announce,http://vps02.net.orel.ru:80/announce,http://tracker4.itzmx.com:2710/announce,http://tracker3.itzmx.com:6961/announce,http://tracker2.itzmx.com:6961/announce,http://tracker1.itzmx.com:8080/announce,http://tracker01.loveapp.com:6789/announce,http://tracker.zerobytes.xyz:1337/announce,http://tracker.yoshi210.com:6969/announce,http://tracker.nyap2p.com:8080/announce,http://tracker.lelux.fi:80/announce,http://tracker.bz:80/announce,http://opentracker.i2p.rocks:6969/announce,http://open.acgnxtracker.com:80/announce</span></span><br><span class="line"># BT 排除服务器地址</span><br><span class="line">bt-exclude-tracker=</span><br><span class="line"></span><br><span class="line"># 启用后台进程</span><br><span class="line">daemon=<span class="keyword">false</span></span><br><span class="line"></span><br><span class="line"># 部分事件hook<span class="punctuation">,</span> 调用第三方命令<span class="punctuation">:</span>/path/to/command</span><br><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载错误</span><br><span class="line">on-download-error=</span><br><span class="line"></span><br><span class="line"># 代理 仅支持 HTTP 协议</span><br><span class="line">#all-proxy=http<span class="punctuation">:</span><span class="comment">//127.0.0.1:1087</span></span><br></pre></td></tr></table></figure></div><p>Considerations for this profile are as follows:</p><ul><li>RPC mode is enabled by default.</li><li>The RPC authorization token has been set, please change it to your own.</li><li>BT tracker has been added.</li></ul><h2 id="Set-to-self-boot"><a href="#Set-to-self-boot" class="headerlink" title="Set to self-boot"></a>Set to self-boot</h2><h3 id="Create-a-user’s-startup-file"><a href="#Create-a-user’s-startup-file" class="headerlink" title="Create a user’s startup file"></a>Create a user’s startup file</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/Library/LaunchAgents/aria2.plist</span><br><span class="line">vim ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><p>Write as follows:</p><div class="highlight-wrap" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>aria2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/bin/aria2c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>WorkingDirectory<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/YOUR-OWN-USERNAME/Downloads<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>Be sure to change the user name of the <em>WorkingDirectory</em> directory to your own user name.</p></blockquote><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check plist files</span></span><br><span class="line">plutil ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Chmod file</span></span><br><span class="line"><span class="built_in">chmod</span> 644 ~/Library/LaunchAgents/aria2.plist</span><br></pre></td></tr></table></figure></div><h3 id="Add-and-enable-self-startup-files"><a href="#Add-and-enable-self-startup-files" class="headerlink" title="Add and enable self-startup files"></a>Add and enable self-startup files</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add</span></span><br><span class="line">launchctl load ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete</span></span><br><span class="line">launchctl unload ~/Library/LaunchAgents/aria2.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start</span></span><br><span class="line">launchctl start aria2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Stop</span></span><br><span class="line">launchctl stop aria2</span><br></pre></td></tr></table></figure></div><blockquote><p>Note:</p><p>If you have previously added aria2 startup files, remember to delete the startup items and then add them again!</p></blockquote><h2 id="Add-automatic-update-BT-tracker-function"><a href="#Add-automatic-update-BT-tracker-function" class="headerlink" title="Add automatic update BT tracker function"></a>Add automatic update BT tracker function</h2><h3 id="Create-a-trackers-list-aria2-sh-script"><a href="#Create-a-trackers-list-aria2-sh-script" class="headerlink" title="Create a trackers-list-aria2.sh script"></a>Create a trackers-list-aria2.sh script</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/trackers-list-aria2.sh</span><br><span class="line">vim ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><p>The script reads as follows:</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 文件名 trackers-list-aria2.sh</span></span><br><span class="line"><span class="comment"># aria2 设置文件路径</span></span><br><span class="line">CONF=<span class="variable">$&#123;HOME&#125;</span>/.aria2/aria2.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置选择的 trackerlist （可选 all_aria2.txt, best_aria2.txt, http_aria2.txt）</span></span><br><span class="line">trackerfile=all_aria2.txt</span><br><span class="line"><span class="comment"># downloadfile=https://raw.githubusercontent.com/ngosang/trackerslist/master/$&#123;trackerfile&#125;</span></span><br><span class="line">downloadfile=https://trackerslist.com/<span class="variable">$&#123;trackerfile&#125;</span></span><br><span class="line"></span><br><span class="line">list=$(curl -fsSL <span class="variable">$&#123;downloadfile&#125;</span>)</span><br><span class="line"><span class="keyword">if</span> ! grep -q <span class="string">&quot;bt-tracker&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span> ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 添加 bt-tracker 服务器信息......\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\nbt-tracker=<span class="variable">$&#123;list&#125;</span>&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 更新 bt-tracker 服务器信息.....\033[0m&quot;</span></span><br><span class="line">    sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&quot;s@bt-tracker.*@bt-tracker=<span class="variable">$&#123;list&#125;</span>@g&quot;</span> <span class="string">&quot;<span class="variable">$&#123;CONF&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 重启 aria2 服务</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 停止 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl stop aria2</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m==&gt; 启动 aria2 服务......\033[0m&quot;</span></span><br><span class="line">launchctl start aria2</span><br></pre></td></tr></table></figure></div><p>Set permissions:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><h3 id="Set-up-the-task-scheduler-to-achieve-automatic-updates"><a href="#Set-up-the-task-scheduler-to-achieve-automatic-updates" class="headerlink" title="Set up the task scheduler to achieve automatic updates"></a>Set up the task scheduler to achieve automatic updates</h3><p>Compile the current user task plan:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>Use <strong>crontab -l</strong> command to view the current user task schedule. The contents are as follows:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MAILTO = <span class="string">&quot;&quot;</span></span><br><span class="line">0 18 * * * ~/.aria2/trackers-list-aria2.sh</span><br></pre></td></tr></table></figure></div><blockquote><p>2022/05/27 update:</p><p>Add <em>MAILTO = “”</em> configuration to avoid <em>You have new mail</em> prompts.</p><p>If such notification has already occurred, enter <code>mail</code> to view and eliminate it.</p></blockquote><p>Or you can command directly:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(crontab -l 2&amp;&gt; /dev/null; <span class="built_in">echo</span> <span class="string">&quot;0 18 * * * ~/.aria2/trackers-list-aria2.sh&quot;</span>) | crontab</span><br></pre></td></tr></table></figure></div><blockquote><p>The above indicates:</p><p>Automatically update BT tracker and restart aria2 service at 6: 00 p.m. every day.</p><p>Cancel the scheduled task:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></div><p>Then delete the content manually, or run it directly:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l 2&amp;&gt; /dev/null| sed <span class="string">&quot;/trackers-list-aria2.sh/d&quot;</span> | crontab</span><br></pre></td></tr></table></figure></div></blockquote><h3 id="Add-Download-Notification"><a href="#Add-Download-Notification" class="headerlink" title="Add Download-Notification"></a>Add Download-Notification</h3><p>Final effect: when the download is complete, a prompt box will pop up in the upper right corner of the screen to display the file name of the completed download, and voice broadcast: “there is a file that has been downloaded, please check it!”</p><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180124115.webp" data-caption=" An example of aria2 prompt box under macOS "><picture><source srcset="aria2-mac/image-20220319180124115.webp" type="image/webp"><img src="aria2-mac/image-20220319180124115.png" alt=" An example of aria2 prompt box under macOS "></picture></a></p><h3 id="Create-a-download-complete-hook-sh-script"><a href="#Create-a-download-complete-hook-sh-script" class="headerlink" title="Create a download-complete-hook.sh script"></a>Create a download-complete-hook.sh script</h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> ~/.aria2/download-complete-hook.sh</span><br><span class="line">vim ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><p>The script reads as follows:</p><div class="highlight-wrap" data-rel="Sh"><figure class="iseeu highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># 文件名 download-complete-hook.sh</span></span><br><span class="line"><span class="comment"># 给aria2 RPC添加一个下载完成通知 for macOS</span></span><br><span class="line"><span class="comment"># 变量 3 表示下载完成文件的路径</span></span><br><span class="line"><span class="comment"># 具体提示框设置可参考`https://code-maven.com/display-notification-from-the-mac-command-line`。</span></span><br><span class="line"><span class="comment"># 不支持设置自定义图标</span></span><br><span class="line"></span><br><span class="line">fname=`<span class="built_in">basename</span> <span class="variable">$3</span>`</span><br><span class="line">osascript &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">display notification &quot;$fname 已经下载完成！&quot; with title &quot;【下载完成】&quot;</span></span><br><span class="line"><span class="string">say &quot;有个文件下载完成，请查收！&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure></div><p>Set permissions:</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ~/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h3 id="Add-Hook-Settings"><a href="#Add-Hook-Settings" class="headerlink" title="Add Hook Settings"></a>Add Hook Settings</h3><blockquote><p>The <em>aria2.conf</em> configuration file above already contains the following, and those who use the above file can skip this section directly.</p></blockquote><p>Add the following to the <strong>aria2.conf</strong> :</p><div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># BT下载完成(如有做种将包含做种，如需调用请务必确定设定完成做种条件)</span><br><span class="line">on-bt-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br><span class="line"># 下载完成</span><br><span class="line">on-download-complete=$<span class="punctuation">&#123;</span>HOME<span class="punctuation">&#125;</span>/.aria2/download-complete-hook.sh</span><br></pre></td></tr></table></figure></div><h2 id="Aria2-web-UI"><a href="#Aria2-web-UI" class="headerlink" title="Aria2 web UI"></a>Aria2 web UI</h2><p>Do not need to install, just use the browser to open: <a target="_blank" rel="noopener" href="http://ariang.mayswind.net/latest/">AriaNg UI</a> .</p><h3 id="PRC-Setting"><a href="#PRC-Setting" class="headerlink" title="PRC Setting"></a>PRC Setting</h3><blockquote><p>Set according to the PRC-related settings in the <em>aria2.conf</em> configuration file.</p></blockquote><p><a data-fancybox="gallery" data-src="aria2-mac/image-20220319180542315.webp" data-caption=" AriaNg PRC Setting "><picture><source srcset="aria2-mac/image-20220319180542315.webp" type="image/webp"><img src="aria2-mac/image-20220319180542315.png" alt=" AriaNg PRC Setting "></picture></a></p><h2 id="Install-the-browser-download-plug-in"><a href="#Install-the-browser-download-plug-in" class="headerlink" title="Install the browser download plug-in"></a>Install the browser download plug-in</h2><p><a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome plug-in</a></p><ul><li>Built-in an offline AriaNg version of UI</li><li>Integrate right-click download menu</li></ul><blockquote><p>The built-in offline AriaNg version also requires <em>PRC Setting</em> , otherwise you will not be able to connect successfully.</p></blockquote><h2 id="Reference-only"><a href="#Reference-only" class="headerlink" title="Reference only"></a>Reference only</h2><h3 id="Download-the-file-from-the-network-disk"><a href="#Download-the-file-from-the-network-disk" class="headerlink" title="Download the file from the network disk"></a>Download the file from the network disk</h3><p><a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN/scripts/436446">网盘直链下载助手</a>: it needs to be enabled by installing script managers such as the extension plug-in <a target="_blank" rel="noopener" href="https://violentmonkey.github.io/get-it/">Violentmonkey</a> or <a target="_blank" rel="noopener" href="https://www.tampermonkey.net/">Tampermonkey</a> .</p><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><blockquote><p>Use with <a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">Aria2 for Chrome Plugin-in</a> .</p></blockquote><ol><li>Select the file you want to download and click “Aria download” or “RPC download” on the download assistant page to push it to the Aria2 UI interface.</li><li>After clicking the appropriate option with the mouse, select “send Link”, and then confirm the download.</li></ol><p><a data-fancybox="gallery" data-src="aria2-mac/QQ20220319-175017.gif" data-caption=" Plug-in usage example "><picture><source srcset="aria2-mac/QQ20220319-175017.gif" type="image/webp"><img src="aria2-mac/QQ20220319-175017.gif" alt=" Plug-in usage example "></picture></a></p><h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a target="_blank" rel="noopener" href="https://github.com/maboloshi/">GitHub maboloshi</a></p><div id="copyright"><style>#easter-egg{border:0;padding:10px 0;position:relative}#easter-egg::before{font-family:"Font Awesome 5 Free";font-weight:900;content:"Page Over \f1b0  Thank You";position:absolute;padding:0 10px;line-height:1px;white-space:nowrap;left:50%;transform:translateX(-50%)}</style><hr id="easter-egg"><blockquote style="padding:0"><p>Author: Yuesir</p><p>Link: <a href="/en/article/aria2-mac.html" target="_blank" title="MacOS User&#39;s Aria2 Configuration">https://vccv.cc/en/article/aria2-mac.html</a></p><p>Copyright: All articles except special statements are used <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a> license agreement, reproduced please indicate the source!</p></blockquote><hr></div></div></article><div class="blog-post-comments"><div id="tcomment"><noscript>Please enable JavaScript to view the comments.</noscript></div></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-Aria2"><span class="toc-number">1.1.</span> <span class="toc-text">What is Aria2?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preparation-before-configuration"><span class="toc-number">1.2.</span> <span class="toc-text">Preparation before configuration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-and-configure-Aria2"><span class="toc-number">2.</span> <span class="toc-text">Install and configure Aria2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-to-self-boot"><span class="toc-number">3.</span> <span class="toc-text">Set to self-boot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-user%E2%80%99s-startup-file"><span class="toc-number">3.1.</span> <span class="toc-text">Create a user’s startup file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-and-enable-self-startup-files"><span class="toc-number">3.2.</span> <span class="toc-text">Add and enable self-startup files</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Add-automatic-update-BT-tracker-function"><span class="toc-number">4.</span> <span class="toc-text">Add automatic update BT tracker function</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-trackers-list-aria2-sh-script"><span class="toc-number">4.1.</span> <span class="toc-text">Create a trackers-list-aria2.sh script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Set-up-the-task-scheduler-to-achieve-automatic-updates"><span class="toc-number">4.2.</span> <span class="toc-text">Set up the task scheduler to achieve automatic updates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-Download-Notification"><span class="toc-number">4.3.</span> <span class="toc-text">Add Download-Notification</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-download-complete-hook-sh-script"><span class="toc-number">4.4.</span> <span class="toc-text">Create a download-complete-hook.sh script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-Hook-Settings"><span class="toc-number">4.5.</span> <span class="toc-text">Add Hook Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aria2-web-UI"><span class="toc-number">5.</span> <span class="toc-text">Aria2 web UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PRC-Setting"><span class="toc-number">5.1.</span> <span class="toc-text">PRC Setting</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-the-browser-download-plug-in"><span class="toc-number">6.</span> <span class="toc-text">Install the browser download plug-in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-only"><span class="toc-number">7.</span> <span class="toc-text">Reference only</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Download-the-file-from-the-network-disk"><span class="toc-number">7.1.</span> <span class="toc-text">Download the file from the network disk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Usage"><span class="toc-number">7.1.1.</span> <span class="toc-text">Usage</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Thanks"><span class="toc-number">8.</span> <span class="toc-text">Thanks</span></a></li></ol></div><div id="actions-footer"><a id="menu" class="icon" onclick='$("#nav-footer").toggle()'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" onclick='$("#toc-footer").toggle()'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="switch" class="icon" onclick="switchNightMode()"><i class="fas fa-lightbulb fa-lg" aria-hidden="true"></i> Theme</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2020-2024 Yuesir <a href="https://github.com/probberechts/hexo-theme-cactus" rel="nofollow" target="_blank">Cactus</a> <a href="/en/atom.xml" target="_blank">RSS</a></div><div class="footer-right"><nav><ul><li><a href="/en">Home</a></li><li><a href="/en/tags">Tag</a></li><li><a href="/en/search">Search</a></li><li><a href="/en/tools">Tool</a></li><li><a href="/en/about">About</a></li></ul></nav></div></footer></div><link rel="preload" href="/en/lib/font-awesome/css/all.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="/en/lib/font-awesome/css/all.min.css"></noscript><script src="/en/lib/jquery/jquery.min.js"></script><script src="/en/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$((function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard"><i class="far fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","").replace(/^\s+|\s+$/g,"")}}).on("success",(function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()}))}))</script><script src="/en/js/main.js"></script><script src="/en/lib/fancybox/fancybox.umd.js"></script><script src="/en/lib/twikoo/twikoo.all.min.js"></script><script>twikoo.init({envId:"https://twikoo.vccv.cc",el:"#tcomment",lang:"en",onCommentLoaded:function(){for(var t=document.getElementsByClassName("tk-content"),e=0;e<t.length;e++){var n=t[e].getElementsByTagName("img");if(n.length>0)for(var a=0;a<n.length;a++){var o=n[a];if("tk-owo-emotion"!=o.className){var r=document.createElement("a");r.setAttribute("data-fancybox","gallery"),r.setAttribute("data-src",o.getAttribute("src")),r.setAttribute("data-caption","Comment: "+o.getAttribute("alt")),r.appendChild(o.cloneNode(!1)),o.parentNode.insertBefore(r,o.nextSibling),o.remove()}}}}})</script><script src="/lib/april-fool/load.js"></script></body></html>